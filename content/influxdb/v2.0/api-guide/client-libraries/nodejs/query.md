---
title: Query data with the JavaScript client library
description: >
  Use the Node.js JavaScript client library to query data with the InfluxDB API.
menu:
  influxdb_2_0:
    name: Query
    parent: Node.js
influxdb/v2.0/tags: [client libraries, JavaScript]
weight: 201
aliases:
  - /influxdb/v2.0/reference/api/client-libraries/nodejs/query
---

Use the [InfluxDB Javascript client library](https://github.com/influxdata/influxdb-client-js) in a Node.js environment to query InfluxDB.  

The following example sends a Flux query to an InfluxDB bucket and outputs rows from an observable table.

## Before you begin

- [Install the client library and other dependencies](/{{% latest "influxdb" %}}/v2.0/api-guide/client-libraries/nodejs/install.md).

## Query InfluxDB 

1. Change to your new project directory and create a TypeScript file for your query module.

   ```sh
   cd influx-node-app && touch query.ts
   ```
2. Instantiate an `InfluxDB` client. Provide your InfluxDB `url` and `token`.     Use the `getQueryApi()` method of the `InfluxDB` client and provide your InfluxDB `org` to create a configured **query client**.

   ```js
   const queryApi = influxDB.getQueryApi(org)
   ```
3. Create a Flux query and include your `bucket` name. Store the query as a string variable.
   {{% warn %}}
   To prevent SQL injection attacks, avoid concatenating unsafe user input with queries. 
   {{% /warn %}}

   ```js
   const fluxQuery =
     'from(bucket:"air_sensor")
     |> range(start: 0)
     |> filter(fn: (r) => r._measurement == "temperature")'
   ```
4. Use `queryRows()` to query InfluxDB. The `queryRows` method takes a Flux query and an **Observer** object and returns an [**Observable**](http://reactivex.io/rxjs/manual/overview.html#observable)[table](/{{% latest "influxdb" %}}/reference/syntax/annotated-csv/#tables) with metadata and rows.

   Provide your Flux query as `query` your observer as `consumer`. 

   ```js
   queryApi.queryRows(query: fluxQuery, consumer: {
     next(row: string[], tableMeta: FluxTableMetaData) {
       const o = tableMeta.toObject(row)
       console.log(
         `${o._time} ${o._measurement} in '${o.location}' (${o.sensor_id}): ${o._field}=${o._value}`
       )
     }
   }
   ```
5. In your terminal, set your InfluxDB environment variables and use `node` to execute the Javascript file generated by the `tsc` compiler. The script outputs your InfluxDB rows followed by "Finished SUCCESS". 

```sh
 export INFLUX_URL=https://cloud2.influxdata.com \
 && export INFLUX_API_TOKEN=YOUR_API_TOKEN \
 && export INFLUX_ORG=YOUR_INFLUX_ORG \
 && node query.js
```

### Complete example

```js
{{% get-shared-text "api/v2.0/query/query.ts" %}}
```

{{% api/v2dot0/nodejs/learn-more %}}
