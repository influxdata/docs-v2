---
title: Log and trace InfluxDB Enterprise operations
description: >
  Learn about logging locations, redirecting HTTP request logging, structured logging, and tracing.
menu:
  enterprise_influxdb_1_9:
    name: Log and trace
    weight: 90
    parent: Administration
draft: true
---

Write log information to other locations, use different service managers, and use different log output formats.
InfluxDB writes log output, by default, to `stderr`.
Depending on your use case, you may opt to write this log information to another location. 
User different service managers to override this default.

* [Write log output to log file](#write-log-output-to-log-file)
* [Write log output to flat file](#write-log-output-to-flat-file)
* [Redirect HTTP request logging](#redirect-http-access-logging)
* [Use structured logging](#use-structured-logging)
* [Use tracing](#use-tracing)

## Write log output to log file

To write log output to `stderr`, redirect `stderr` to a file:

```
influxdb-meta 2>$HOME/my_log_file # Meta nodes
influxd 2>$HOME/my_log_file # Data nodes
```

## Manage log output to flat files 

You can use logrotate to rotate the log files generated by InfluxDB on systems where logs are written to flat files.

To use logrotate, create a configuration file that specify which logfiles to rotate. Learn more about logrotate and configuration files [here](http://manpages.ubuntu.com/manpages/cosmic/en/man8/logrotate.8.html).

### View logs with systemd

InfluxDB on systemd uses the system configured default for logging (usually `journald`).  

To access the logs directed to the systemd journal, use this command: 

```
sudo journalctl -u <node-type>.service
```

To view meta node logs, run `sudo journalctl -u influxdb-meta.service`. 

To view data node logs, run `sudo journalctl -u influxdb.service`. 

For more information about configuring `journald`, see [the systemd journald documentation]

## Redirect HTTP access logging

By default, when HTTP request logging is enabled, the HTTP logs are included with internal InfluxDB logging. To redirect the HTTP request log entries to a separate file so that the log files are easier to read, monitor, and debug, do the following:

1. Locate the `[http]` section of your InfluxDB configuration file. 
2. Set the `access-log-path` option to specify the path where HTTP log entries should be written.

**Notes:**

* If `influxd` is unable to access the specified path, it will log an error and fall back to writing the request log to `stderr`.
* The `[httpd]` prefix is stripped when HTTP request logging is redirected to a separate file, allowing access log parsing tools (like [lnav](https://lnav.org)) to render the files without additional modification.
* To rotate the HTTP request log file, use the `copytruncate` method of `logrotate` or similar to leave the original file in place. 

See [Redirecting HTTP request logging](/enterprise_influxdb/v1.8/administration/logs/#redirecting-http-access-logging) in the InfluxDB OSS documentation to learn more. 

## Use structured logging

Structured logging enables machine-readable and more developer-friendly log output formats. 

Use the `logfmt` and `json` structured log formats in InfluxDB Enterprise for easy filtering and searching with external tools and to simply integration of InfluxDB logs with Splunk, Papertrail, Elasticsearch, and other third party tools.

Use the following InfluxDB logging configuration options as needed:

* `format`: `auto` (default) | `logfmt` | `json`
* `level`: `error` | `warn` | `info` (default) | `debug`
* `suppress-logo`: `false` (default) | `true`

For details on these logging configuration options and their corresponding environment variables, see [Logging options](/influxdb/v1.8/administration/config#logging-settings). 

## Use tracing

To trace InfluxDB operations to find errors and discover performance bottlenecks, use the following keys:

#### Tracing identifier key

The `trace_id` key specifies a unique identifier for a specific instance of a trace. Use this key to filter and correlate all related log entries for an operation.

All operation traces include consistent starting and ending log entries, with the same message (`msg`) describing the operation (e.g., "TSM compaction"), but adding the appropriate `op_event` context (either `start` or `end`). 

For an example, see [Finding all trace log entries for an InfluxDB operation](/influxdb/v1.8/administration/logs/#finding-all-trace-log-entries-for-an-influxdb-operation).

**Example:** `trace_id=06R0P94G000`

#### Log identifier context key

Identify _every_ log entry with the log identifier key (`log_id`) for a single execution of an `influxd` process. 

Although the log file can be split by a single execution, use the consistent `log_id` to search for log aggregation services.

For more information about tracing InfluxDB operations, see [here](/influxdb/v1.8/administration/logs/#tracing). 