articles:
  - path: api/authentication
    fields:
      name: Authentication
      describes: []
      title: Authentication
      description: >
        With InfluxDB 3 Clustered, InfluxDB Management API endpoints require the
        following credential:


        - `Authorization MANAGEMENT_TOKEN`: the `Authorization` HTTP header with
        a [management token](/influxdb3/clustered/admin/tokens/management/).

          See how to [create a management token](/influxdb3/clustered/admin/tokens/management/).

          By default, management tokens in InfluxDB 3 are short-lived tokens issued by an OAuth2 identity provider that grant a specific user administrative access to your InfluxDB cluster. However, for automation purposes, you can manually create management tokens that authenticate directly with your InfluxDB cluster and do not require human interaction with your identity provider.
      tag: Authentication
      isConceptual: true
      menuGroup: Concepts
      operations: []
      tagDescription: >
        With InfluxDB 3 Clustered, InfluxDB Management API endpoints require the
        following credential:


        - `Authorization MANAGEMENT_TOKEN`: the `Authorization` HTTP header with
        a [management token](/influxdb3/clustered/admin/tokens/management/).

          See how to [create a management token](/influxdb3/clustered/admin/tokens/management/).

          By default, management tokens in InfluxDB 3 are short-lived tokens issued by an OAuth2 identity provider that grant a specific user administrative access to your InfluxDB cluster. However, for automation purposes, you can manually create management tokens that authenticate directly with your InfluxDB cluster and do not require human interaction with your identity provider.
      showSecuritySchemes: true
      source: >-
        static/openapi/influxdb-clustered/tags/tags/influxdb-clustered-authentication.yaml
      staticFilePath: >-
        /openapi/influxdb-clustered/tags/tags/influxdb-clustered-authentication.yaml
  - path: api/database-tokens
    fields:
      name: Database tokens
      describes:
        - /tokens
        - /tokens/{tokenId}
      title: Database tokens
      description: Manage database read/write tokens for a cluster
      tag: Database tokens
      isConceptual: false
      menuGroup: Other
      operations:
        - operationId: GetDatabaseTokens
          method: GET
          path: /tokens
          summary: Get all database tokens for a cluster
          tags:
            - Database tokens
        - operationId: CreateDatabaseToken
          method: POST
          path: /tokens
          summary: Create a database token
          tags:
            - Database tokens
        - operationId: GetDatabaseToken
          method: GET
          path: /tokens/{tokenId}
          summary: Get a database token
          tags:
            - Database tokens
        - operationId: UpdateDatabaseToken
          method: PATCH
          path: /tokens/{tokenId}
          summary: Update a database token
          tags:
            - Database tokens
        - operationId: DeleteDatabaseToken
          method: DELETE
          path: /tokens/{tokenId}
          summary: Delete a database token
          tags:
            - Database tokens
      tagDescription: Manage database read/write tokens for a cluster
      source: >-
        static/openapi/influxdb-clustered/tags/tags/influxdb-clustered-database-tokens.yaml
      staticFilePath: >-
        /openapi/influxdb-clustered/tags/tags/influxdb-clustered-database-tokens.yaml
  - path: api/databases
    fields:
      name: Databases
      describes:
        - /databases
        - /databases/{databaseName}
      title: Databases
      description: Manage databases for a cluster
      tag: Databases
      isConceptual: false
      menuGroup: Other
      operations:
        - operationId: GetClusterDatabases
          method: GET
          path: /databases
          summary: Get all databases for a cluster
          tags:
            - Databases
        - operationId: CreateClusterDatabase
          method: POST
          path: /databases
          summary: Create a database
          tags:
            - Databases
        - operationId: UpdateClusterDatabase
          method: PATCH
          path: /databases/{databaseName}
          summary: Update a database
          tags:
            - Databases
        - operationId: DeleteClusterDatabase
          method: DELETE
          path: /databases/{databaseName}
          summary: Delete a database
          tags:
            - Databases
      tagDescription: Manage databases for a cluster
      source: >-
        static/openapi/influxdb-clustered/tags/tags/influxdb-clustered-databases.yaml
      staticFilePath: /openapi/influxdb-clustered/tags/tags/influxdb-clustered-databases.yaml
  - path: api/quickstart
    fields:
      name: Quickstart
      describes: []
      title: Quickstart
      description: >
        The following example script shows how to use `curl` to make database
        and token management requests:


        ```shell
         #!/bin/bash

         # Usage:
         # Note the leading space in the command below to keep secrets out of the shell history
         #
         # ```
         #  MANAGEMENT_TOKEN=<MANAGEMENT_TOKEN> ./scripts/test_http_api_v0_endpoints.sh
         # ```

         # Env var validation
         if [ -z "${MANAGEMENT_TOKEN}" ]; then
           echo "
         [Error]: âŒ
           \$MANAGEMENT_TOKEN env var is required.
             "
             exit 1
         fi

        HOST="https://cluster-host.com"

         # Database request functions
         list_databases () {
           local response=$( \
             curl \
               --location "$HOST/api/v0/databases" \
               --header "Accept: application/json" \
               --header "Authorization: Bearer $MANAGEMENT_TOKEN" \
           )
           echo "$response"
         }

         create_database () {
           local databaseName=$1
           local response=$( \
             curl \
               --location "$HOST/api/v0/databases" \
               --header "Accept: application/json" \
               --header 'Content-Type: application/json' \
               --header "Authorization: Bearer $MANAGEMENT_TOKEN" \
               --data '{
                 "name": "'$databaseName'",
                 "maxTables": 75,
                 "maxColumnsPerTable": 90,
                 "retentionPeriod": 600000000000,
                 "partitionTemplate": [
                   {
                     "type": "tag",
                     "value": "abc"
                   },
                   {
                     "type": "bucket",
                     "value": {
                       "tagName": "def",
                       "numberOfBuckets": 5
                     }
                   }
                 ]
               }' \
           )
           echo "$response"
         }

         update_database () {
           local databaseName=$1
           local response=$( \
             curl \
               --location "$HOST/api/v0/databases/$databaseName" \
               --request PATCH \
               --header "Accept: application/json" \
               --header 'Content-Type: application/json' \
               --header "Authorization: Bearer $MANAGEMENT_TOKEN" \
               --data '{
                 "maxTables": 150,
                 "maxColumnsPerTable": 180,
                 "retentionPeriod": 1200000000000
               }' \
           )
           echo "$response"
         }

         delete_database () {
           local databaseName=$1
           local response=$( \
             curl \
               --location "$HOST/api/v0/databases/$databaseName" \
               --request DELETE \
               --header "Accept: application/json" \
               --header "Authorization: Bearer $MANAGEMENT_TOKEN" \
           )
           echo "$response"
         }

         # Token request functions
         list_tokens () {
           local response=$( \
             curl \
               --location "$HOST/api/v0/tokens" \
               --header "Accept: application/json" \
               --header "Authorization: Bearer $MANAGEMENT_TOKEN" \
           )
           echo "$response"
         }

         create_token () {
           local response=$( \
             curl \
               --location "$HOST/api/v0/tokens" \
               --header "Accept: application/json" \
               --header 'Content-Type: application/json' \
               --header "Authorization: Bearer $MANAGEMENT_TOKEN" \
               --data '{
                 "description": "my test token",
                 "permissions": [
                   {
                     "action": "write",
                     "resource": "database_one"
                   },
                   {
                     "action": "read",
                     "resource": "database_two"
                   }
                 ]
               }' \
           )
           echo "$response"
         }

         get_token () {
           local token_id=$1
           local response=$( \
             curl \
               --location "$HOST/api/v0/tokens/$tokenId" \
               --header "Accept: application/json" \
               --header "Authorization: Bearer $MANAGEMENT_TOKEN" \
           )
           echo "$response"
         }

         update_token () {
           local token_id=$1
           local response=$( \
             curl \
               --location "$HOST/api/v0/tokens/$tokenId" \
               --request PATCH \
               --header "Accept: application/json" \
               --header 'Content-Type: application/json' \
               --header "Authorization: Bearer $MANAGEMENT_TOKEN" \
               --data '{
                 "description": "my updated test token",
                 "permissions": [
                   {
                     "action": "database_one",
                     "resource": "read"
                   }
                 ]
               }' \
           )
           echo "$response"
         }

         delete_token () {
           local token_id=$1
           local response=$( \
             curl \
               --location "$HOST/api/v0/tokens/$tokenId" \
               --request DELETE \
               --header "Accept: application/json" \
               --header "Authorization: Bearer $MANAGEMENT_TOKEN" \
           )
           echo "$response"
         }


         # Test database endpoints
         databaseName="test_database_$RANDOM"

         printf "\nðŸ—ï¸   Creating database...  ðŸ—ï¸\n\n"
         response="$(create_database $databaseName)"
         echo $response | jq
         printf "\nðŸ—ï¸   Creating database successful  ðŸ—ï¸\n\n"

         printf "\nâ¬†ï¸   Updating database...  â¬†ï¸\n\n"
         response="$(update_database $databaseName)"
         echo $response | jq
         printf "\nâ¬†ï¸   Updating database successful  â¬†ï¸\n\n"

         printf "\nâ¬‡ï¸   Listing databases...  â¬‡ï¸\n\n"
         response="$(list_databases)"
         echo $response | jq
         printf "\nâ¬‡ï¸   Listing databases successful  â¬‡ï¸\n\n"

         printf "\nðŸ—‘ï¸   Deleting database...  ðŸ—‘ï¸\n\n"
         response="$(delete_database $databaseName)"
         echo $response | jq
         printf "\nðŸ—‘ï¸   Deleting database successful  ðŸ—‘ï¸\n\n"


         # Test token endpoints
         printf "\nðŸ—ï¸   Creating token...  ðŸ—ï¸\n\n"
         response="$(create_token)"
         echo $response | jq
         tokenId=$(echo $response | jq '.id')
         printf "\nðŸ—ï¸   Creating token successful  ðŸ—ï¸\n\n"

         printf "\nâ¬‡ï¸   Getting token...  â¬‡ï¸\n\n"
         response="$(get_token $tokenId)"
         echo $response | jq
         printf "\nâ¬‡ï¸   Getting token successful  â¬‡ï¸\n\n"

         printf "\nâ¬†ï¸   Updating token...  â¬†ï¸\n\n"
         response="$(update_token $tokenId)"
         echo $response | jq
         printf "\nâ¬†ï¸   Updating token successful  â¬†ï¸\n\n"

         printf "\nðŸ“‹   Listing tokens...  ðŸ“‹\n\n"
         response="$(list_tokens)"
         echo $response | jq
         printf "\nðŸ“‹   Listing tokens successful  ðŸ“‹\n\n"

         printf "\nðŸ—‘ï¸   Deleting token...  ðŸ—‘ï¸\n\n"
         response="$(delete_token $tokenId)"
         echo $response | jq
         printf "\nðŸ—‘ï¸   Deleting token successful  ðŸ—‘ï¸\n\n"
             ```
      tag: Quickstart
      isConceptual: true
      menuGroup: Other
      operations: []
      tagDescription: >
        The following example script shows how to use `curl` to make database
        and token management requests:


        ```shell
         #!/bin/bash

         # Usage:
         # Note the leading space in the command below to keep secrets out of the shell history
         #
         # ```
         #  MANAGEMENT_TOKEN=<MANAGEMENT_TOKEN> ./scripts/test_http_api_v0_endpoints.sh
         # ```

         # Env var validation
         if [ -z "${MANAGEMENT_TOKEN}" ]; then
           echo "
         [Error]: âŒ
           \$MANAGEMENT_TOKEN env var is required.
             "
             exit 1
         fi

        HOST="https://cluster-host.com"

         # Database request functions
         list_databases () {
           local response=$( \
             curl \
               --location "$HOST/api/v0/databases" \
               --header "Accept: application/json" \
               --header "Authorization: Bearer $MANAGEMENT_TOKEN" \
           )
           echo "$response"
         }

         create_database () {
           local databaseName=$1
           local response=$( \
             curl \
               --location "$HOST/api/v0/databases" \
               --header "Accept: application/json" \
               --header 'Content-Type: application/json' \
               --header "Authorization: Bearer $MANAGEMENT_TOKEN" \
               --data '{
                 "name": "'$databaseName'",
                 "maxTables": 75,
                 "maxColumnsPerTable": 90,
                 "retentionPeriod": 600000000000,
                 "partitionTemplate": [
                   {
                     "type": "tag",
                     "value": "abc"
                   },
                   {
                     "type": "bucket",
                     "value": {
                       "tagName": "def",
                       "numberOfBuckets": 5
                     }
                   }
                 ]
               }' \
           )
           echo "$response"
         }

         update_database () {
           local databaseName=$1
           local response=$( \
             curl \
               --location "$HOST/api/v0/databases/$databaseName" \
               --request PATCH \
               --header "Accept: application/json" \
               --header 'Content-Type: application/json' \
               --header "Authorization: Bearer $MANAGEMENT_TOKEN" \
               --data '{
                 "maxTables": 150,
                 "maxColumnsPerTable": 180,
                 "retentionPeriod": 1200000000000
               }' \
           )
           echo "$response"
         }

         delete_database () {
           local databaseName=$1
           local response=$( \
             curl \
               --location "$HOST/api/v0/databases/$databaseName" \
               --request DELETE \
               --header "Accept: application/json" \
               --header "Authorization: Bearer $MANAGEMENT_TOKEN" \
           )
           echo "$response"
         }

         # Token request functions
         list_tokens () {
           local response=$( \
             curl \
               --location "$HOST/api/v0/tokens" \
               --header "Accept: application/json" \
               --header "Authorization: Bearer $MANAGEMENT_TOKEN" \
           )
           echo "$response"
         }

         create_token () {
           local response=$( \
             curl \
               --location "$HOST/api/v0/tokens" \
               --header "Accept: application/json" \
               --header 'Content-Type: application/json' \
               --header "Authorization: Bearer $MANAGEMENT_TOKEN" \
               --data '{
                 "description": "my test token",
                 "permissions": [
                   {
                     "action": "write",
                     "resource": "database_one"
                   },
                   {
                     "action": "read",
                     "resource": "database_two"
                   }
                 ]
               }' \
           )
           echo "$response"
         }

         get_token () {
           local token_id=$1
           local response=$( \
             curl \
               --location "$HOST/api/v0/tokens/$tokenId" \
               --header "Accept: application/json" \
               --header "Authorization: Bearer $MANAGEMENT_TOKEN" \
           )
           echo "$response"
         }

         update_token () {
           local token_id=$1
           local response=$( \
             curl \
               --location "$HOST/api/v0/tokens/$tokenId" \
               --request PATCH \
               --header "Accept: application/json" \
               --header 'Content-Type: application/json' \
               --header "Authorization: Bearer $MANAGEMENT_TOKEN" \
               --data '{
                 "description": "my updated test token",
                 "permissions": [
                   {
                     "action": "database_one",
                     "resource": "read"
                   }
                 ]
               }' \
           )
           echo "$response"
         }

         delete_token () {
           local token_id=$1
           local response=$( \
             curl \
               --location "$HOST/api/v0/tokens/$tokenId" \
               --request DELETE \
               --header "Accept: application/json" \
               --header "Authorization: Bearer $MANAGEMENT_TOKEN" \
           )
           echo "$response"
         }


         # Test database endpoints
         databaseName="test_database_$RANDOM"

         printf "\nðŸ—ï¸   Creating database...  ðŸ—ï¸\n\n"
         response="$(create_database $databaseName)"
         echo $response | jq
         printf "\nðŸ—ï¸   Creating database successful  ðŸ—ï¸\n\n"

         printf "\nâ¬†ï¸   Updating database...  â¬†ï¸\n\n"
         response="$(update_database $databaseName)"
         echo $response | jq
         printf "\nâ¬†ï¸   Updating database successful  â¬†ï¸\n\n"

         printf "\nâ¬‡ï¸   Listing databases...  â¬‡ï¸\n\n"
         response="$(list_databases)"
         echo $response | jq
         printf "\nâ¬‡ï¸   Listing databases successful  â¬‡ï¸\n\n"

         printf "\nðŸ—‘ï¸   Deleting database...  ðŸ—‘ï¸\n\n"
         response="$(delete_database $databaseName)"
         echo $response | jq
         printf "\nðŸ—‘ï¸   Deleting database successful  ðŸ—‘ï¸\n\n"


         # Test token endpoints
         printf "\nðŸ—ï¸   Creating token...  ðŸ—ï¸\n\n"
         response="$(create_token)"
         echo $response | jq
         tokenId=$(echo $response | jq '.id')
         printf "\nðŸ—ï¸   Creating token successful  ðŸ—ï¸\n\n"

         printf "\nâ¬‡ï¸   Getting token...  â¬‡ï¸\n\n"
         response="$(get_token $tokenId)"
         echo $response | jq
         printf "\nâ¬‡ï¸   Getting token successful  â¬‡ï¸\n\n"

         printf "\nâ¬†ï¸   Updating token...  â¬†ï¸\n\n"
         response="$(update_token $tokenId)"
         echo $response | jq
         printf "\nâ¬†ï¸   Updating token successful  â¬†ï¸\n\n"

         printf "\nðŸ“‹   Listing tokens...  ðŸ“‹\n\n"
         response="$(list_tokens)"
         echo $response | jq
         printf "\nðŸ“‹   Listing tokens successful  ðŸ“‹\n\n"

         printf "\nðŸ—‘ï¸   Deleting token...  ðŸ—‘ï¸\n\n"
         response="$(delete_token $tokenId)"
         echo $response | jq
         printf "\nðŸ—‘ï¸   Deleting token successful  ðŸ—‘ï¸\n\n"
             ```
      source: >-
        static/openapi/influxdb-clustered/tags/tags/influxdb-clustered-quickstart.yaml
      staticFilePath: /openapi/influxdb-clustered/tags/tags/influxdb-clustered-quickstart.yaml
  - path: api/tables
    fields:
      name: Tables
      describes:
        - /databases/{databaseName}/tables
      title: Tables
      description: Manage tables in a database
      tag: Tables
      isConceptual: false
      menuGroup: Other
      operations:
        - operationId: CreateClusterDatabaseTable
          method: POST
          path: /databases/{databaseName}/tables
          summary: Create a database table
          tags:
            - Tables
      tagDescription: Manage tables in a database
      source: >-
        static/openapi/influxdb-clustered/tags/tags/influxdb-clustered-tables.yaml
      staticFilePath: /openapi/influxdb-clustered/tags/tags/influxdb-clustered-tables.yaml
