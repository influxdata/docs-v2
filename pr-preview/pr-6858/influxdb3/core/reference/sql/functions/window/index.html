



<!doctype html>
<html lang="en">
  <head>
    

<script async src="https://www.googletagmanager.com/gtag/js?id=G-CNWQ54SDD8"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-CNWQ54SDD8', {
    'send_page_view': true,
    'transport_type': 'beacon'
  });
</script>


    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

    








  
    
  




  
  
  





<title>SQL window functions | &lt;nil&gt; Documentation</title>


    <meta name="description" content="SQL window functions perform an operation across a set of rows related to the current row.">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link rel="shortcut icon" href="/img/favicon.png" type="image/png" sizes="32x32">

    






    
  
    
  
    
  
    
  
    
  
    
  







  








  
  
    
      <script type="module" src="/docs-v2/pr-preview/pr-6858/js/main.js"></script>
    
  

    







  
  
    
    
               
    
               
    
      
        
               
    
               
    
               
    
               
    
               
    
  
    
    
               
    
               
    
               
    
               
    
      
        
               
    
               
    
               
    
  
    
    
               
    
               
    
               
    
      
        
               
    
               
    
               
    
               
    
  
    
    
               
    
      
        
               
    
               
    
               
    
               
    
               
    
               
    
  
    
    
      
        
               
    
               
    
               
    
               
    
               
    
               
    
               
    
  




<link rel="canonical" href="https://influxdata.github.io/docs-v2/pr-preview/pr-6858/docs-v2/pr-preview/pr-6858/influxdb3/enterprise/reference/sql/functions/window/" />

    
<style>
  body {
    visibility: hidden;
  }
</style>


<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css"/>









<link rel="stylesheet" title="light-theme" type="text/css" href="/docs-v2/pr-preview/pr-6858/light-theme.b3ec7ef29f9dbd6a45081f267694dfa311a1ae2c9730ef0c09015444d533e10e.css">


<link rel="alternate stylesheet" title="dark-theme" type="text/css" href="/docs-v2/pr-preview/pr-6858/dark-theme.7c69e86e08c9940319f3ec7f7d6fef4a06f15c35c23f45f8745311ba910d146b.css">


<link rel="stylesheet" title="sidebar-open" type="text/css" href="/docs-v2/pr-preview/pr-6858/dark-theme.56ede7c71d3385876a1c762e207372a1699e829612d789f952885f820d50394a.css">


<link rel="alternate stylesheet" title="sidebar-closed" type="text/css" href="/docs-v2/pr-preview/pr-6858/light-theme.b9796198db2f4e595588f9612cc06faa5b6f61322119b20af095d82a792468f7.css">


<link rel="stylesheet" type="text/css" href="/docs-v2/pr-preview/pr-6858/api.css">

    <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:ital,wght@0,500;0,700;1,500;1,700&family=Rubik:ital,wght@0,400;0,500;0,700;1,400;1,500;1,700&display=swap" rel="stylesheet">
    








  
  
    <meta name="docsearch:searchTag" content="docs-v2-pr-preview">
  





    





<meta name="latest" content="false">
<meta name="last-modified" content="2025-09-05 08:26:38 -0600 -0600">
    
<script type="text/javascript">
(function() {
  var didInit = false;
  function initMunchkin() {
    if(didInit === false) {
      didInit = true;
      Munchkin.init('972-GDU-533');
    }
  }
  var s = document.createElement('script');
  s.type = 'text/javascript';
  s.async = true;
  s.src = '//munchkin.marketo.net/munchkin.js';
  s.onreadystatechange = function() {
    if (this.readyState == 'complete' || this.readyState == 'loaded') {
      initMunchkin();
    }
  };
  s.onload = initMunchkin;
  document.getElementsByTagName('head')[0].appendChild(s);
})();
</script>


<img referrerpolicy="no-referrer-when-downgrade" src="https://static.scarf.sh/a.png?x-pxid=5581ee6b-3e7c-42b8-a507-38ea055c35ca"/>



    <meta name="Copyright" content="InfluxData Inc." />
  </head>
  <body class='docs-v2' data-component="theme" data-theme-callback="setVisibility">
    
<noscript>
  <iframe src="https://www.googletagmanager.com/ns.html?id=GTM-WXRH9C" height="0" width="0" style="display:none;visibility:hidden"></iframe>
</noscript>










<div class="topnav">
  <div class="topnav-left">
    <a class="influx-home" href="https://www.influxdata.com" title="InfluxData"><span
        class="icon-influx-logo"></span><span class="icon-influx-logotype"></span></a>
    <span class="divider"></span>
    <a class="docs-home" href="/"><span class=short>Doc</span><span class="long">umentation</span></a>
  </div>
  <div class="topnav-right">
    
      <div class="selector-dropdowns">
        































<div class="product-list" data-component="product-selector">
  <div id="product-dropdown">
    <p class="selected">Select product</p>
  </div>
  <div id="dropdown-items">
    <div class="product-group">
      <div class="group-title"><p>InfluxDB 3</p></div>
      <ul class="item-list products" data-category="Self-managed">
        <li>
  
  

  
  
  
  
  
  
  
  <a href='/influxdb3/core/' class="active">InfluxDB 3 Core <span class="state">New</span></a>
</li>
        <li>
  
  

  
  
  
  
  
  
  
  <a href='/influxdb3/enterprise/' >InfluxDB 3 Enterprise <span class="state">New</span></a>
</li>
        <li>
  
  

  
  
  
  
  
  
  
  <a href='/influxdb3/clustered/' >InfluxDB Clustered</a>
</li>
      </ul>
      <ul class="item-list products" data-category="Fully-Managed">
        <li>
  
  

  
  
  
  
  
  
  
  <a href='/influxdb3/cloud-serverless/' >InfluxDB Cloud Serverless</a>
</li>
        <li>
  
  

  
  
  
  
  
  
  
  <a href='/influxdb3/cloud-dedicated/' >InfluxDB Cloud Dedicated</a>
</li>
      </ul>
      <ul class="item-list products" data-category="Tools">
        <li>
  
  

  
  
  
  
  
  
  
  <a href='/influxdb3/explorer/' >InfluxDB 3 Explorer <span class="state">New</span></a>
</li>
      </ul>
    </div>
    <div class="product-group">
      <div class="group-title"><p>InfluxDB 2</p></div>
      <ul class="item-list products">
        <li>
  
  

  
  
  
  
  
  
  
  <a href='/influxdb/v2/' >InfluxDB OSS v2</a>
</li>
        <li>
  
  

  
  
  
  
  
  
  
  <a href='/influxdb/cloud/' >InfluxDB Cloud (TSM)</a>
</li>
        <li>
  
  

  
  
  
  
  
  
  
  <a href='/flux/v0/' >Flux</a>
</li>
      </ul>
    </div>
    <div class="product-group">
      <div class="group-title"><p>InfluxDB 1</p></div>
      <ul class="item-list products">
        <li>
  
  

  
  
  
  
  
  
  
  <a href='/influxdb/v1/' >InfluxDB OSS v1</a>
</li>
        <li>
  
  

  
  
  
  
  
  
  
  <a href='/enterprise_influxdb/v1/' >InfluxDB Enterprise</a>
</li>
        <li>
  
  
    
  

  
  
  
  
  
  
  
  <a href='/platform/#influxdb-cloud-1' >InfluxDB Cloud 1</a>
</li>
      </ul>
    </div>
    <div class="product-group">
      <div class="group-title"><p>Telegraf</p></div>
      <ul class="item-list products">
        <li>
  
  

  
  
  
  
  
  
  
  <a href='/telegraf/v1/' >Telegraf</a>
</li>
        <li>
  
  

  
  
  
  
  
  
  
  <a href='/telegraf/controller/' >Telegraf Controller <span class="state">alpha</span></a>
</li>
      </ul>
    </div>
    <div class="product-group">
      <div class="group-title"><p>Other products</p></div>
      <ul class="item-list products">
        <li>
  
  

  
  
  
  
  
  
  
  <a href='/chronograf/v1/' >Chronograf</a>
</li>
        <li>
  
  

  
  
  
  
  
  
  
  <a href='/kapacitor/v1/' >Kapacitor</a>
</li>
      </ul>
    </div>
  </div>
</div>


      </div>
      <div class="buttons">
        <div class="search-btn" data-component="search-button">
          <button id="search-btn" data-action="toggle"><span class="cf-icon Search_New"></span></button>
        </div>
        <button class="url-trigger" href="#"><span class="cf-icon CogSolid_New"></span></button>
        <span data-component="theme-switch">
          <button class="theme-switch theme-switch-light">
            <span class="cf-icon Lightmode_New"></span></button>
          <button class="theme-switch theme-switch-dark">
            <span class="cf-icon Darkmode_New"></span></button>
        </span>
      </div>
    
  </div>
</div>

<div class="page-wrapper">
  











  











  




<aside class="sidebar">
  <div class="sidebar-toggle" data-component="sidebar-toggle" data-state="closed" ><a data-action="toggle" href="#"><span
      class="cf-icon SidebarClose"></span></a></div>
  <div class="search-and-nav-toggle">
    <div class="sidebar--search" data-component="sidebar-search">
      <input  class="sidebar--search-field"
              id="algolia-search-input"
              type="text"
              accesskey="s"
              autocomplete="off"
              autocorrect="off"
              autocapitalize="off"
              spellcheck="false"
              dir="auto"
              placeholder='Search the docs'>
    </div>
    <a id="contents-toggle-btn" href="#">
      <span class="toggle-hamburger"></span>
    </a>
  </div>
  <ul id="nav-tree">

  
  
  

  
  





  
  
  
  
  
    <li class="nav-category ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/'>InfluxDB 3 Core</a>
      
    </li>
  
    <li class="nav-category ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/install/'>Install InfluxDB 3 Core</a>
      
    </li>
  
    <li class="nav-category ">
      <a href="#" class="children-toggle "></a>
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/get-started/'>Get started</a>
      
        <ul class="children ">
        
  
  
  
  
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/get-started/setup/'>Set up Core</a>
      
    </li>
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/get-started/write/'>Write data</a>
      
    </li>
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/get-started/query/'>Query data</a>
      
    </li>
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/get-started/process/'>Process data</a>
      
    </li>
  

        </ul>
      
    </li>
  
    <li class="nav-category ">
      <a href="#" class="children-toggle "></a>
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/write-data/'>Write data</a>
      
        <ul class="children ">
        
  
  
  
  
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/write-data/client-libraries/'>Use client libraries</a>
      
    </li>
  
    <li class="nav-item ">
      <a href="#" class="children-toggle "></a>
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/write-data/http-api/'>Use the HTTP API</a>
      
        <ul class="children ">
        
  
  
  
  
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/write-data/http-api/v3-write-lp/'>Use the v3 write_lp API</a>
      
    </li>
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/write-data/http-api/compatibility-apis/'>Use v1 and v2 compatibility APIs</a>
      
    </li>
  

        </ul>
      
    </li>
  
    <li class="nav-item ">
      <a href="#" class="children-toggle "></a>
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/write-data/use-telegraf/'>Use Telegraf</a>
      
        <ul class="children ">
        
  
  
  
  
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/write-data/use-telegraf/configure/'>Configure Telegraf</a>
      
    </li>
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/write-data/use-telegraf/dual-write/'>Dual write to InfluxDB</a>
      
    </li>
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/write-data/use-telegraf/csv/'>Write CSV</a>
      
    </li>
  

        </ul>
      
    </li>
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/write-data/influxdb3-cli/'>Use the influxdb3 CLI</a>
      
    </li>
  
    <li class="nav-item ">
      <a href="#" class="children-toggle "></a>
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/write-data/best-practices/'>Best practices</a>
      
        <ul class="children ">
        
  
  
  
  
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/write-data/best-practices/schema-design/'>Schema design</a>
      
    </li>
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/write-data/best-practices/optimize-writes/'>Optimize writes</a>
      
    </li>
  

        </ul>
      
    </li>
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/write-data/troubleshoot/'>Troubleshoot issues</a>
      
    </li>
  

        </ul>
      
    </li>
  
    <li class="nav-category ">
      <a href="#" class="children-toggle "></a>
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/plugins/'>Processing engine and Python plugins</a>
      
        <ul class="children ">
        
  
  
  
  
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/plugins/extend-plugin/'>Extend plugins</a>
      
    </li>
  
    <li class="nav-item ">
      <a href="#" class="children-toggle "></a>
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/plugins/library/'>Plugin library</a>
      
        <ul class="children ">
        
  
  
  
  
  
    <li class="nav-item ">
      <a href="#" class="children-toggle "></a>
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/plugins/library/examples/'>Example plugins</a>
      
        <ul class="children ">
        
  
  
  
  
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/plugins/library/examples/wal-plugin/'>WAL plugin</a>
      
    </li>
  

        </ul>
      
    </li>
  
    <li class="nav-item ">
      <a href="#" class="children-toggle "></a>
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/plugins/library/official/'>Official plugins</a>
      
        <ul class="children ">
        
  
  
  
  
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/plugins/library/official/basic-transformation/'>Basic transformation</a>
      
    </li>
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/plugins/library/official/downsampler/'>Downsampler</a>
      
    </li>
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/plugins/library/official/forecast-error-evaluator/'>Forecast error evaluator</a>
      
    </li>
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/plugins/library/official/influxdb-to-iceberg/'>InfluxDB to Iceberg</a>
      
    </li>
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/plugins/library/official/mad-anomaly-detection/'>MAD anomaly detection</a>
      
    </li>
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/plugins/library/official/notifier/'>Notifier</a>
      
    </li>
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/plugins/library/official/prophet-forecasting/'>Prophet forecasting</a>
      
    </li>
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/plugins/library/official/state-change/'>State change</a>
      
    </li>
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/plugins/library/official/stateless-adtk-detector/'>Stateless ADTK detector</a>
      
    </li>
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/plugins/library/official/system-metrics/'>System metrics</a>
      
    </li>
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/plugins/library/official/threshold-deadman-checks/'>Threshold deadman checks</a>
      
    </li>
  

        </ul>
      
    </li>
  

        </ul>
      
    </li>
  

        </ul>
      
    </li>
  
    <li class="nav-category ">
      <a href="#" class="children-toggle "></a>
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/query-data/'>Query data</a>
      
        <ul class="children ">
        
  
  
  
  
  
    <li class="nav-item ">
      <a href="#" class="children-toggle "></a>
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/query-data/execute-queries/'>Execute queries</a>
      
        <ul class="children ">
        
  
  
  
  
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/query-data/execute-queries/influxdb3-cli/'>Use the influxdb3 CLI</a>
      
    </li>
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/query-data/execute-queries/influxdb-v3-api/'>Use the v3 query API</a>
      
    </li>
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/query-data/execute-queries/influxdb-v1-api/'>Use the v1 query API</a>
      
    </li>
  

        </ul>
      
    </li>
  
    <li class="nav-item ">
      <a href="#" class="children-toggle "></a>
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/query-data/sql/'>Query with SQL</a>
      
        <ul class="children ">
        
  
  
  
  
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/query-data/sql/explore-schema/'>Explore your schema</a>
      
    </li>
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/query-data/sql/basic-query/'>Basic query</a>
      
    </li>
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/query-data/sql/aggregate-select/'>Aggregate data</a>
      
    </li>
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/query-data/sql/cast-types/'>Cast types</a>
      
    </li>
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/query-data/sql/compare-values/'>Compare values</a>
      
    </li>
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/query-data/sql/fill-gaps/'>Fill gaps in data</a>
      
    </li>
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/query-data/sql/parameterized-queries/'>Parameterized queries</a>
      
    </li>
  

        </ul>
      
    </li>
  
    <li class="nav-item ">
      <a href="#" class="children-toggle "></a>
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/query-data/influxql/'>Query with InfluxQL</a>
      
        <ul class="children ">
        
  
  
  
  
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/query-data/influxql/explore-schema/'>Explore your schema</a>
      
    </li>
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/query-data/influxql/basic-query/'>Basic query</a>
      
    </li>
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/query-data/influxql/aggregate-select/'>Aggregate data</a>
      
    </li>
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/query-data/influxql/troubleshoot/'>Troubleshoot errors</a>
      
    </li>
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/query-data/influxql/parameterized-queries/'>Parameterized queries</a>
      
    </li>
  

        </ul>
      
    </li>
  

        </ul>
      
    </li>
  
    <li class="nav-category ">
      <a href="#" class="children-toggle "></a>
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/visualize-data/'>Visualize data</a>
      
        <ul class="children ">
        
  
  
  
  
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/visualize-data/chronograf/'>Use Chronograf</a>
      
    </li>
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/visualize-data/grafana/'>Use Grafana</a>
      
    </li>
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/visualize-data/powerbi/'>Use Power BI</a>
      
    </li>
  

        </ul>
      
    </li>
  
    <li class="nav-category ">
      <a href="#" class="children-toggle "></a>
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/admin/'>Administer InfluxDB</a>
      
        <ul class="children ">
        
  
  
  
  
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/admin/identify-version/'>Identify version</a>
      
    </li>
  
    <li class="nav-item ">
      <a href="#" class="children-toggle "></a>
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/admin/databases/'>Manage databases</a>
      
        <ul class="children ">
        
  
  
  
  
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/admin/databases/create/'>Create a database</a>
      
    </li>
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/admin/databases/list/'>List databases</a>
      
    </li>
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/admin/databases/delete/'>Delete a database</a>
      
    </li>
  

        </ul>
      
    </li>
  
    <li class="nav-item ">
      <a href="#" class="children-toggle "></a>
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/admin/tables/'>Manage tables</a>
      
        <ul class="children ">
        
  
  
  
  
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/admin/tables/create/'>Create a table</a>
      
    </li>
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/admin/tables/list/'>List tables</a>
      
    </li>
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/admin/tables/delete/'>Delete a table</a>
      
    </li>
  

        </ul>
      
    </li>
  
    <li class="nav-item ">
      <a href="#" class="children-toggle "></a>
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/admin/tokens/'>Manage tokens</a>
      
        <ul class="children ">
        
  
  
  
  
  
    <li class="nav-item ">
      <a href="#" class="children-toggle "></a>
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/admin/tokens/admin/'>Admin tokens</a>
      
        <ul class="children ">
        
  
  
  
  
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/admin/tokens/admin/create/'>Create an admin token</a>
      
    </li>
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/admin/tokens/admin/list/'>List admin tokens</a>
      
    </li>
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/admin/tokens/admin/regenerate/'>Regenerate an admin token</a>
      
    </li>
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/admin/tokens/admin/preconfigured/'>Use preconfigured admin token</a>
      
    </li>
  

        </ul>
      
    </li>
  

        </ul>
      
    </li>
  
    <li class="nav-item ">
      <a href="#" class="children-toggle "></a>
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/admin/last-value-cache/'>Manage the Last Value Cache</a>
      
        <ul class="children ">
        
  
  
  
  
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/admin/last-value-cache/create/'>Create a Last Value Cache</a>
      
    </li>
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/admin/last-value-cache/query/'>Query a Last Value Cache</a>
      
    </li>
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/admin/last-value-cache/show/'>Show Last Value Caches</a>
      
    </li>
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/admin/last-value-cache/delete/'>Delete a Last Value Cache</a>
      
    </li>
  

        </ul>
      
    </li>
  
    <li class="nav-item ">
      <a href="#" class="children-toggle "></a>
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/admin/distinct-value-cache/'>Manage the Distinct Value Cache</a>
      
        <ul class="children ">
        
  
  
  
  
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/admin/distinct-value-cache/create/'>Create a Distinct Value Cache</a>
      
    </li>
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/admin/distinct-value-cache/query/'>Query a Distinct Value Cache</a>
      
    </li>
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/admin/distinct-value-cache/show/'>Show Distinct Value Caches</a>
      
    </li>
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/admin/distinct-value-cache/delete/'>Delete a Distinct Value Cache</a>
      
    </li>
  

        </ul>
      
    </li>
  
    <li class="nav-item ">
      <a href="#" class="children-toggle "></a>
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/object-storage/'>Configure object storage</a>
      
        <ul class="children ">
        
  
  
  
  
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/object-storage/minio/'>MinIO</a>
      
    </li>
  

        </ul>
      
    </li>
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/admin/query-system-data/'>Query system data</a>
      
    </li>
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/admin/backup-restore/'>Back up and restore</a>
      
    </li>
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/admin/performance-tuning/'>Performance tuning</a>
      
    </li>
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/admin/security/'>Security</a>
      
    </li>
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/admin/upgrade/'>Upgrade Core</a>
      
    </li>
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/admin/upgrade-to-enterprise/'>Upgrade to Enterprise</a>
      
    </li>
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/admin/mcp-server/'>Use the InfluxDB MCP server</a>
      
    </li>
  

        </ul>
      
    </li>
  
    <li class="nav-category ">
      <a href="#" class="children-toggle open"></a>
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/reference/'>Reference</a>
      
        <ul class="children open">
        
  
  
  
  
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/reference/config-options/'>Configuration options</a>
      
    </li>
  
    <li class="nav-item ">
      <a href="#" class="children-toggle "></a>
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/reference/cli/'>CLIs</a>
      
        <ul class="children ">
        
  
  
  
  
  
    <li class="nav-item ">
      <a href="#" class="children-toggle "></a>
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/reference/cli/influxdb3/'>influxdb3</a>
      
        <ul class="children ">
        
  
  
  
  
  
    <li class="nav-item ">
      <a href="#" class="children-toggle "></a>
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/reference/cli/influxdb3/create/'>influxdb3 create</a>
      
        <ul class="children ">
        
  
  
  
  
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/reference/cli/influxdb3/create/database/'>influxdb3 create database</a>
      
    </li>
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/reference/cli/influxdb3/create/distinct_cache/'>influxdb3 create distinct_cache</a>
      
    </li>
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/reference/cli/influxdb3/create/last_cache/'>influxdb3 create last_cache</a>
      
    </li>
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/reference/cli/influxdb3/create/table/'>influxdb3 create table</a>
      
    </li>
  
    <li class="nav-item ">
      <a href="#" class="children-toggle "></a>
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/reference/cli/influxdb3/create/token/'>influxdb3 create token</a>
      
        <ul class="children ">
        
  
  
  
  
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/reference/cli/influxdb3/create/token/admin/'>influxdb3 create token --admin</a>
      
    </li>
  

        </ul>
      
    </li>
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/reference/cli/influxdb3/create/trigger/'>influxdb3 create trigger</a>
      
    </li>
  

        </ul>
      
    </li>
  
    <li class="nav-item ">
      <a href="#" class="children-toggle "></a>
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/reference/cli/influxdb3/delete/'>influxdb3 delete</a>
      
        <ul class="children ">
        
  
  
  
  
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/reference/cli/influxdb3/delete/token/'>influxdb3 delete token</a>
      
    </li>
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/reference/cli/influxdb3/delete/database/'>influxdb3 delete database</a>
      
    </li>
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/reference/cli/influxdb3/delete/distinct_cache/'>influxdb3 delete distinct_cache</a>
      
    </li>
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/reference/cli/influxdb3/delete/last_cache/'>influxdb3 delete last_cache</a>
      
    </li>
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/reference/cli/influxdb3/delete/table/'>influxdb3 delete table</a>
      
    </li>
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/reference/cli/influxdb3/delete/trigger/'>influxdb3 delete trigger</a>
      
    </li>
  

        </ul>
      
    </li>
  
    <li class="nav-item ">
      <a href="#" class="children-toggle "></a>
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/reference/cli/influxdb3/disable/'>influxdb3 disable</a>
      
        <ul class="children ">
        
  
  
  
  
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/reference/cli/influxdb3/disable/trigger/'>influxdb3 disable trigger</a>
      
    </li>
  

        </ul>
      
    </li>
  
    <li class="nav-item ">
      <a href="#" class="children-toggle "></a>
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/reference/cli/influxdb3/enable/'>influxdb3 enable</a>
      
        <ul class="children ">
        
  
  
  
  
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/reference/cli/influxdb3/enable/trigger/'>influxdb3 enable trigger</a>
      
    </li>
  

        </ul>
      
    </li>
  
    <li class="nav-item ">
      <a href="#" class="children-toggle "></a>
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/reference/cli/influxdb3/install/'>influxdb3 install</a>
      
        <ul class="children ">
        
  
  
  
  
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/reference/cli/influxdb3/install/package/'>influxdb3 install package</a>
      
    </li>
  

        </ul>
      
    </li>
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/reference/cli/influxdb3/query/'>influxdb3 query</a>
      
    </li>
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/reference/cli/influxdb3/serve/'>influxdb3 serve</a>
      
    </li>
  
    <li class="nav-item ">
      <a href="#" class="children-toggle "></a>
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/reference/cli/influxdb3/show/'>influxdb3 show</a>
      
        <ul class="children ">
        
  
  
  
  
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/reference/cli/influxdb3/show/plugins/'>influxdb3 show plugins</a>
      
    </li>
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/reference/cli/influxdb3/show/databases/'>influxdb3 show databases</a>
      
    </li>
  
    <li class="nav-item ">
      <a href="#" class="children-toggle "></a>
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/reference/cli/influxdb3/show/system/'>influxdb3 show system</a>
      
        <ul class="children ">
        
  
  
  
  
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/reference/cli/influxdb3/show/system/summary/'>influxdb3 show system summary</a>
      
    </li>
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/reference/cli/influxdb3/show/system/table/'>influxdb3 show system table</a>
      
    </li>
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/reference/cli/influxdb3/show/system/table-list/'>influxdb3 show system table-list</a>
      
    </li>
  

        </ul>
      
    </li>
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/reference/cli/influxdb3/show/tokens/'>influxdb3 show tokens</a>
      
    </li>
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/reference/cli/influxdb3/show/retention/'>influxdb3 show retention</a>
      
    </li>
  

        </ul>
      
    </li>
  
    <li class="nav-item ">
      <a href="#" class="children-toggle "></a>
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/reference/cli/influxdb3/test/'>influxdb3 test</a>
      
        <ul class="children ">
        
  
  
  
  
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/reference/cli/influxdb3/test/wal_plugin/'>influxdb3 test wal_plugin</a>
      
    </li>
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/reference/cli/influxdb3/test/schedule_plugin/'>influxdb3 test schedule_plugin</a>
      
    </li>
  

        </ul>
      
    </li>
  
    <li class="nav-item ">
      <a href="#" class="children-toggle "></a>
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/reference/cli/influxdb3/update/'>influxdb3 update</a>
      
        <ul class="children ">
        
  
  
  
  
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/reference/cli/influxdb3/update/database/'>influxdb3 update database</a>
      
    </li>
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/reference/cli/influxdb3/update/trigger/'>influxdb3 update trigger</a>
      
    </li>
  

        </ul>
      
    </li>
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/reference/cli/influxdb3/write/'>influxdb3 write</a>
      
    </li>
  

        </ul>
      
    </li>
  

        </ul>
      
    </li>
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/reference/line-protocol/'>Line protocol</a>
      
    </li>
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/reference/processing-engine/'>Processing engine</a>
      
    </li>
  
    <li class="nav-item ">
      <a href="#" class="children-toggle open"></a>
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/reference/sql/'>SQL reference</a>
      
        <ul class="children open">
        
  
  
  
  
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/reference/sql/data-types/'>Data types</a>
      
    </li>
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/reference/sql/select/'>SELECT statement</a>
      
    </li>
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/reference/sql/join/'>JOIN clause</a>
      
    </li>
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/reference/sql/where/'>WHERE clause</a>
      
    </li>
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/reference/sql/group-by/'>GROUP BY clause</a>
      
    </li>
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/reference/sql/order-by/'>ORDER BY clause</a>
      
    </li>
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/reference/sql/having/'>HAVING clause</a>
      
    </li>
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/reference/sql/limit/'>LIMIT clause</a>
      
    </li>
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/reference/sql/union/'>UNION clause</a>
      
    </li>
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/reference/sql/explain/'>EXPLAIN command</a>
      
    </li>
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/reference/sql/information-schema/'>Information schema</a>
      
    </li>
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/reference/sql/subqueries/'>Subqueries</a>
      
    </li>
  
    <li class="nav-item ">
      <a href="#" class="children-toggle "></a>
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/reference/sql/operators/'>Operators</a>
      
        <ul class="children ">
        
  
  
  
  
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/reference/sql/operators/arithmetic/'>Arithmetic operators</a>
      
    </li>
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/reference/sql/operators/comparison/'>Comparison operators</a>
      
    </li>
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/reference/sql/operators/logical/'>Logical operators</a>
      
    </li>
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/reference/sql/operators/bitwise/'>Bitwise operators</a>
      
    </li>
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/reference/sql/operators/other/'>Other operators</a>
      
    </li>
  

        </ul>
      
    </li>
  
    <li class="nav-item ">
      <a href="#" class="children-toggle open"></a>
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/reference/sql/functions/'>Functions</a>
      
        <ul class="children open">
        
  
  
  
  
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/reference/sql/functions/aggregate/'>Aggregate</a>
      
    </li>
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/reference/sql/functions/selector/'>Selector</a>
      
    </li>
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/reference/sql/functions/time-and-date/'>Time and date</a>
      
    </li>
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/reference/sql/functions/conditional/'>Conditional</a>
      
    </li>
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/reference/sql/functions/math/'>Math</a>
      
    </li>
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/reference/sql/functions/string/'>String</a>
      
    </li>
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/reference/sql/functions/binary-string/'>Binary string</a>
      
    </li>
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/reference/sql/functions/array/'>Array</a>
      
    </li>
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/reference/sql/functions/map/'>Map</a>
      
    </li>
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/reference/sql/functions/struct/'>Struct</a>
      
    </li>
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/reference/sql/functions/regular-expression/'>Regular expression</a>
      
    </li>
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/reference/sql/functions/hashing/'>Hashing</a>
      
    </li>
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/reference/sql/functions/cache/'>Cache</a>
      
    </li>
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/reference/sql/functions/misc/'>Miscellaneous</a>
      
    </li>
  
    <li class="nav-item active">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/reference/sql/functions/window/'>Window</a>
      
    </li>
  

        </ul>
      
    </li>
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/reference/sql/table-value-constructor/'>Table value constructor</a>
      
    </li>
  

        </ul>
      
    </li>
  
    <li class="nav-item ">
      <a href="#" class="children-toggle "></a>
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/reference/influxql/'>InfluxQL reference</a>
      
        <ul class="children ">
        
  
  
  
  
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/reference/influxql/select/'>SELECT statement</a>
      
    </li>
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/reference/influxql/where/'>WHERE clause</a>
      
    </li>
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/reference/influxql/group-by/'>GROUP BY clause</a>
      
    </li>
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/reference/influxql/order-by/'>ORDER BY clause</a>
      
    </li>
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/reference/influxql/limit-and-slimit/'>LIMIT and SLIMIT clauses</a>
      
    </li>
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/reference/influxql/offset-and-soffset/'>OFFSET and SOFFSET clauses</a>
      
    </li>
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/reference/influxql/show/'>SHOW statements</a>
      
    </li>
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/reference/influxql/subqueries/'>Subqueries</a>
      
    </li>
  
    <li class="nav-item ">
      <a href="#" class="children-toggle "></a>
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/reference/influxql/functions/'>InfluxQL functions</a>
      
        <ul class="children ">
        
  
  
  
  
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/reference/influxql/functions/aggregates/'>Aggregates</a>
      
    </li>
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/reference/influxql/functions/selectors/'>Selectors</a>
      
    </li>
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/reference/influxql/functions/transformations/'>Transformations</a>
      
    </li>
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/reference/influxql/functions/date-time/'>Date and time</a>
      
    </li>
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/reference/influxql/functions/misc/'>Miscellaneous</a>
      
    </li>
  

        </ul>
      
    </li>
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/reference/influxql/time-and-timezone/'>Time and time zones</a>
      
    </li>
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/reference/influxql/regular-expressions/'>Regular expressions</a>
      
    </li>
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/reference/influxql/quoting/'>Quotation</a>
      
    </li>
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/reference/influxql/math-operators/'>Math operators</a>
      
    </li>
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/reference/influxql/internals/'>InfluxQL internals</a>
      
    </li>
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/reference/influxql/feature-support/'>InfluxQL feature support</a>
      
    </li>
  

        </ul>
      
    </li>
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/reference/api/'>InfluxDB HTTP API</a>
      
    </li>
  
    <li class="nav-item ">
      <a href="#" class="children-toggle "></a>
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/reference/client-libraries/'>Client libraries</a>
      
        <ul class="children ">
        
  
  
  
  
  
    <li class="nav-item ">
      <a href="#" class="children-toggle "></a>
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/reference/client-libraries/flight/'>Arrow Flight clients</a>
      
        <ul class="children ">
        
  
  
  
  
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/reference/client-libraries/flight/csharp-flight/'>C# .NET</a>
      
    </li>
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/reference/client-libraries/flight/go-flight/'>Go</a>
      
    </li>
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/reference/client-libraries/flight/java-flightsql/'>Java Flight SQL</a>
      
    </li>
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/reference/client-libraries/flight/python-flight/'>Python</a>
      
    </li>
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/reference/client-libraries/flight/python-flightsql-dbapi/'>Python Flight SQL</a>
      
    </li>
  

        </ul>
      
    </li>
  
    <li class="nav-item ">
      <a href="#" class="children-toggle "></a>
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/reference/client-libraries/v3/'>v3 client libraries</a>
      
        <ul class="children ">
        
  
  
  
  
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/reference/client-libraries/v3/csharp/'>C# .NET</a>
      
    </li>
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/reference/client-libraries/v3/go/'>Go</a>
      
    </li>
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/reference/client-libraries/v3/java/'>Java</a>
      
    </li>
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/reference/client-libraries/v3/javascript/'>JavaScript</a>
      
    </li>
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/reference/client-libraries/v3/python/'>Python</a>
      
    </li>
  

        </ul>
      
    </li>
  
    <li class="nav-item ">
      <a href="#" class="children-toggle "></a>
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/reference/client-libraries/v2/'>v2 client libraries</a>
      
        <ul class="children ">
        
  
  
  
  
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/reference/client-libraries/v2/arduino/'>Arduino</a>
      
    </li>
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/reference/client-libraries/v2/csharp/'>C#</a>
      
    </li>
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/reference/client-libraries/v2/dart/'>Dart</a>
      
    </li>
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/reference/client-libraries/v2/go/'>Go</a>
      
    </li>
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/reference/client-libraries/v2/java/'>Java</a>
      
    </li>
  
    <li class="nav-item ">
      <a href="#" class="children-toggle "></a>
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/reference/client-libraries/v2/javascript/'>JavaScript</a>
      
        <ul class="children ">
        
  
  
  
  
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/reference/client-libraries/v2/javascript/browser/'>Browsers and web clients</a>
      
    </li>
  
    <li class="nav-item ">
      <a href="#" class="children-toggle "></a>
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/reference/client-libraries/v2/javascript/nodejs/'>Node.js</a>
      
        <ul class="children ">
        
  
  
  
  
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/reference/client-libraries/v2/javascript/nodejs/install/'>Install</a>
      
    </li>
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/reference/client-libraries/v2/javascript/nodejs/write/'>Write</a>
      
    </li>
  

        </ul>
      
    </li>
  

        </ul>
      
    </li>
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/reference/client-libraries/v2/kotlin/'>Kotlin</a>
      
    </li>
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/reference/client-libraries/v2/php/'>PHP</a>
      
    </li>
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/reference/client-libraries/v2/python/'>Python</a>
      
    </li>
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/reference/client-libraries/v2/r/'>R</a>
      
    </li>
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/reference/client-libraries/v2/ruby/'>Ruby</a>
      
    </li>
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/reference/client-libraries/v2/scala/'>Scala</a>
      
    </li>
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/reference/client-libraries/v2/swift/'>Swift</a>
      
    </li>
  

        </ul>
      
    </li>
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/reference/client-libraries/v1/'>v1 client libraries</a>
      
    </li>
  

        </ul>
      
    </li>
  
    <li class="nav-item ">
      <a href="#" class="children-toggle "></a>
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/reference/internals/'>Core internals</a>
      
        <ul class="children ">
        
  
  
  
  
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/reference/internals/data-retention/'>Data retention</a>
      
    </li>
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/reference/internals/authentication/'>Authentication and authorization</a>
      
    </li>
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/reference/internals/durability/'>Data durability</a>
      
    </li>
  

        </ul>
      
    </li>
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/reference/naming-restrictions/'>Naming restrictions and conventions</a>
      
    </li>
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/reference/telemetry/'>Usage telemetry</a>
      
    </li>
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/reference/glossary/'>Glossary</a>
      
    </li>
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/reference/sample-data/'>Sample data</a>
      
    </li>
  
    <li class="nav-item ">
      
      <a href='/docs-v2/pr-preview/pr-6858/influxdb3/core/release-notes/'>Release Notes</a>
      
    </li>
  

        </ul>
      
    </li>
  



  
  

  
  
  
  
  

  
  
  
    <a class="feature-board-badge"  href="/influxdb3/core/feature-board/">
  <h5>Feature Board</h5>
  <p>
    View and give feedback on upcoming and launched InfluxDB 3 Core features
  </p>
</a>

  

  
  
  

  
  
  
  

  </ul>
</aside>

  <div class="content-wrapper">
    <div class="sidebar-toggle" data-component="sidebar-toggle" data-state="open" ><a data-action="toggle" href="#"><span
      class="cf-icon SidebarOpen"></span></a></div>
    <div class="article">
  <article class="article--content">
    <div class="title">
      <h1>SQL window functions</h1>
      






      
      <div
  class="format-selector"
  data-component="format-selector"
  data-child-count="0"
  data-estimated-tokens="0"data-mcp-docs-url="/influxdb3/core/admin/mcp-server/"
>
  
  <button
    class="format-selector__button"
    aria-haspopup="true"
    aria-expanded="false"
    aria-label="Copy page for AI - Access documentation in different formats"
  >
    <span class="format-selector__button-icon">
      
      <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M9 1H3C2.44772 1 2 1.44772 2 2V14C2 14.5523 2.44772 15 3 15H13C13.5523 15 14 14.5523 14 14V6L9 1Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
        <path d="M9 1V6H14" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
    </span>
    <span class="format-selector__button-text" data-button-text>
      Copy page for AI
    </span>
    <span class="format-selector__button-arrow">
      
      <svg width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M3 4.5L6 7.5L9 4.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
    </span>
  </button>

  
  <div
    class="format-selector__dropdown"
    data-dropdown-menu
    role="menu"
    aria-label="Format options"
  >
    
  </div>
</div>
    </div>
    













    
























    





    




    
    




  
  <p>Window functions let you calculate running totals, moving averages, or other aggregate-like results without collapsing rows into groups.
They perform their calculations over a window of rows, which you can partition and order in various ways, and return a calculated value for each row in the set.</p>
<p>Unlike non-window <a href="/influxdb3/version/reference/sql/functions/aggregate/">aggregate functions</a> that combine each group into a single row, window functions preserve each rows identity and calculate an additional value for every row in the partition.</p>
<p>For example, the following query uses the <a href="/influxdb3/pr-preview/reference/sample-data/#home-sensor-data">Home sensor sample data</a>
and returns each temperature reading with the average temperature per room over
the queried time range:</p>
<div class="custom-timestamps">


<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">SELECT</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="n">time</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="n">room</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="n">temp</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="k">avg</span><span class="p">(</span><span class="n">temp</span><span class="p">)</span><span class="w"> </span><span class="n">OVER</span><span class="w"> </span><span class="p">(</span><span class="n">PARTITION</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">room</span><span class="p">)</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">avg_room_temp</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="k">FROM</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="n">home</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="k">WHERE</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="n">time</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="s1">&#39;2022-01-01T08:00:00Z&#39;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="k">AND</span><span class="w"> </span><span class="n">time</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="s1">&#39;2022-01-01T09:00:00Z&#39;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="n">room</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="n">time</span></span></span></code></pre></div>
<table>
  <thead>
      <tr>
          <th style="text-align: left">time</th>
          <th style="text-align: left">room</th>
          <th style="text-align: right">temp</th>
          <th style="text-align: right">avg_room_temp</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: left">2022-01-01T08:00:00</td>
          <td style="text-align: left">Kitchen</td>
          <td style="text-align: right">21.0</td>
          <td style="text-align: right">22.0</td>
      </tr>
      <tr>
          <td style="text-align: left">2022-01-01T09:00:00</td>
          <td style="text-align: left">Kitchen</td>
          <td style="text-align: right">23.0</td>
          <td style="text-align: right">22.0</td>
      </tr>
      <tr>
          <td style="text-align: left">2022-01-01T08:00:00</td>
          <td style="text-align: left">Living Room</td>
          <td style="text-align: right">21.1</td>
          <td style="text-align: right">21.25</td>
      </tr>
      <tr>
          <td style="text-align: left">2022-01-01T09:00:00</td>
          <td style="text-align: left">Living Room</td>
          <td style="text-align: right">21.4</td>
          <td style="text-align: right">21.25</td>
      </tr>
  </tbody>
</table>
</div>
<ul>
<li>
<p><a href="#window-frames">Window frames</a></p>
<ul>
<li><a href="#over-clause">OVER clause</a></li>
<li><a href="#partition-by-clause">PARTITION BY clause</a></li>
<li><a href="#order-by-clause">ORDER BY clause</a></li>
<li><a href="#frame-clause">Frame clause</a>
<ul>
<li><a href="#frame-units">Frame units</a></li>
<li><a href="#frame-boundaries">Frame boundaries</a></li>
</ul>
</li>
<li><a href="#window-clause">WINDOW clause</a></li>
</ul>
</li>
<li>
<p><a href="#aggregate-functions">Aggregate functions</a></p>
</li>
<li>
<p><a href="#ranking-functions">Ranking Functions</a></p>
<ul>
<li><a href="#cume_dist">cume_dist</a></li>
<li><a href="#dense_rank">dense_rank</a></li>
<li><a href="#ntile">ntile</a></li>
<li><a href="#percent_rank">percent_rank</a></li>
<li><a href="#rank">rank</a></li>
<li><a href="#row_number">row_number</a></li>
</ul>
</li>
<li>
<p><a href="#analytical-functions">Analytical Functions</a></p>
<ul>
<li>
<p><a href="#first_value">first_value</a></p>
</li>
<li>
<p><a href="#lag">lag</a></p>
</li>
<li>
<p><a href="#last_value">last_value</a></p>
</li>
<li>
<p><a href="#lead">lead</a></p>
</li>
<li>
<p><a href="#nth_value">nth_value</a></p>
</li>
</ul>
</li>
</ul>
<h2 id="window-frames">Window frames</h2>
<p>As window functions operate on a row, there is a set of rows in the row&rsquo;s
partition that the window function uses to perform the operation. This set of
rows is called the <em>window frame</em>.
Window frame boundaries can be defined using
<code>RANGE</code>, <code>ROW</code>, or <code>GROUPS</code> frame units, each relative to the current row&ndash;for
example:</p>

<div class="code-tabs-wrapper">
  

<div class="code-tabs">
  <p><a href="#">RANGE</a>
<a href="#">ROWS</a>
<a href="#">GROUPS</a></p>

</div>


<section class="code-tab-content">
  

<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">SELECT</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="n">time</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="n">temp</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="k">avg</span><span class="p">(</span><span class="n">temp</span><span class="p">)</span><span class="w"> </span><span class="n">OVER</span><span class="w"> </span><span class="p">(</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">time</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">RANGE</span><span class="w"> </span><span class="nb">INTERVAL</span><span class="w"> </span><span class="s1">&#39;3 hours&#39;</span><span class="w"> </span><span class="n">PRECEDING</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="p">)</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="mi">3</span><span class="n">h_moving_avg</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="k">FROM</span><span class="w"> </span><span class="n">home</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="k">WHERE</span><span class="w"> </span><span class="n">room</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;Kitchen&#39;</span></span></span></code></pre></div>

</section>


<section class="code-tab-content">
  

<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">SELECT</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="n">time</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="n">temp</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="k">avg</span><span class="p">(</span><span class="n">temp</span><span class="p">)</span><span class="w"> </span><span class="n">OVER</span><span class="w"> </span><span class="p">(</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">ROWS</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="n">PRECEDING</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="p">)</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">moving_avg</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="k">FROM</span><span class="w"> </span><span class="n">home</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="k">WHERE</span><span class="w"> </span><span class="n">room</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;Kitchen&#39;</span></span></span></code></pre></div>

</section>


<section class="code-tab-content">
  

<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">SELECT</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="n">time</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="n">room</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="n">temp</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="k">avg</span><span class="p">(</span><span class="n">temp</span><span class="p">)</span><span class="w"> </span><span class="n">OVER</span><span class="w"> </span><span class="p">(</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">room</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">GROUPS</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="n">PRECEDING</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="p">)</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">moving_avg</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="k">FROM</span><span class="w"> </span><span class="n">home</span></span></span></code></pre></div>

</section>


</div>

<p><em>For more information about how window frames work, see the <a href="#frame-clause">frame clause</a>.</em></p>
<p>If you don&rsquo;t specify window frames, window functions use all rows in the current
partition to perform their operation.</p>


<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">function</span><span class="p">([</span><span class="n">expr</span><span class="p">])</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="n">OVER</span><span class="p">(</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">[</span><span class="n">PARTITION</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">expr</span><span class="p">[,</span><span class="w"> </span><span class="err"></span><span class="p">]]</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">[</span><span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">expr</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="k">ASC</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">DESC</span><span class="w"> </span><span class="p">][,</span><span class="w"> </span><span class="err"></span><span class="p">]]</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">[</span><span class="w"> </span><span class="n">frame_clause</span><span class="w"> </span><span class="p">]</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">)</span></span></span></code></pre></div>
<h3 id="over-clause">OVER clause</h3>
<p>Window functions use an <code>OVER</code> clause that directly follows the window function&rsquo;s<br>
name and arguments.<br>
The <code>OVER</code> clause syntactically distinguishes a window<br>
function from a non-window or aggregate function and defines how to group and order rows for the window operation.</p>
<h3 id="partition-by-clause">PARTITION BY clause</h3>
<p>The <code>PARTITION BY</code> clause in the <code>OVER</code> clause divides the rows into groups, or
partitions, that share the same values of the <code>PARTITION BY</code> expressions.
The window function operates on all the rows in the same partition as the
current row.</p>
<h3 id="order-by-clause">ORDER BY clause</h3>
<p>The <code>ORDER BY</code> clause inside of the <code>OVER</code> clause controls the order that the
window function processes rows in each partition.
When a window clause contains an <code>ORDER BY</code> clause, the window frame boundaries
may be explicit or implicit, limiting a window frame size in both directions
relative to the current row.</p>

<div class="block note">
  
  
  <p>The <code>ORDER BY</code> clause in an <code>OVER</code> clause determines the processing order for
rows in each partition and is separate from the <code>ORDER BY</code>
clause of the query.</p>
</div>
<h3 id="frame-clause">Frame clause</h3>
<p>The <em>frame clause</em> defines window frame boundaries and can be one of the following:</p>


<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="err">{</span><span class="w"> </span><span class="n">RANGE</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">ROWS</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">GROUPS</span><span class="w"> </span><span class="err">}</span><span class="w"> </span><span class="n">frame_start</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="err">{</span><span class="w"> </span><span class="n">RANGE</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">ROWS</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">GROUPS</span><span class="w"> </span><span class="err">}</span><span class="w"> </span><span class="k">BETWEEN</span><span class="w"> </span><span class="n">frame_start</span><span class="w"> </span><span class="k">AND</span><span class="w"> </span><span class="n">frame_end</span></span></span></code></pre></div>
<ul>
<li><a href="#frame-units">Frame units</a>
<ul>
<li><a href="#range">RANGE</a></li>
<li><a href="#rows">ROWS</a></li>
<li><a href="#groups">GROUPS</a></li>
</ul>
</li>
<li><a href="#frame-boundaries">Frame boundaries</a>
<ul>
<li><a href="#unbounded-preceding">UNBOUNDED PRECEDING</a></li>
<li><a href="#offset-preceding">offset PRECEDING</a></li>
<li><a href="#current-row">CURRENT ROW</a></li>
<li><a href="#offset-following">offset FOLLOWING</a></li>
<li><a href="#unbounded-following">UNBOUNDED FOLLOWING</a></li>
</ul>
</li>
</ul>
<h4 id="frame-units">Frame units</h4>
<p>When defining window frames, you can use one of the following frame units:</p>
<ul>
<li><a href="#range">RANGE</a></li>
<li><a href="#rows">ROWS</a></li>
<li><a href="#groups">GROUPS</a></li>
</ul>
<h5 id="range">RANGE</h5>
<p>Defines frame boundaries using rows with values for columns specified
in the <a href="#order-by-clause"><code>ORDER BY</code> clause</a> within a value range relative to
the current row value.</p>

<div class="block important">
  
  
  <p>When using <code>RANGE</code> frame units, you must include an <code>ORDER BY</code> clause with
<em>exactly one column</em>.</p>
</div>
<p>The offset is the difference between the current row value and surrounding
row values. <code>RANGE</code> supports the following offset types:</p>
<ul>
<li>Numeric <em>(non-negative)</em></li>
<li>Numeric string <em>(non-negative)</em></li>
<li>Interval</li>
</ul>
<div class="expand-wrapper">
  



<div class="expand" id="see-how-range-frame-units-work-with-numeric-offsets">
  <a class="expand-link" href="#see-how-range-frame-units-work-with-numeric-offsets"><span class="cf-icon Link"></span></a>
  <p class="expand-label">
      <span class="expand-toggle"></span><span>See how <code>RANGE</code> frame units work with numeric offsets</span>
  </p>
  <div class="expand-content" style="display: none;" >
      <p>To use a numeric offset with the <code>RANGE</code> frame unit, you must sort partitions
by a numeric-type column.</p>


<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="p">...</span><span class="w"> </span><span class="n">OVER</span><span class="w"> </span><span class="p">(</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">wind_direction</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="n">RANGE</span><span class="w"> </span><span class="k">BETWEEN</span><span class="w"> </span><span class="mi">45</span><span class="w"> </span><span class="n">PRECEDING</span><span class="w"> </span><span class="k">AND</span><span class="w"> </span><span class="mi">45</span><span class="w"> </span><span class="n">FOLLOWING</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="p">)</span></span></span></code></pre></div>
<p>The window frame includes rows with sort column values between 45 below and
45 above the current row&rsquo;s value:</p>
<table class="window-frame-units range-numeric">
  <thead>
      <tr>
          <th style="text-align: left">time</th>
          <th style="text-align: left">city</th>
          <th style="text-align: right">wind_direction</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: left">2025-02-17T13:00:00</td>
          <td style="text-align: left">Rome</td>
          <td style="text-align: right">33</td>
      </tr>
      <tr>
          <td style="text-align: left">2025-02-17T08:00:00</td>
          <td style="text-align: left">Rome</td>
          <td style="text-align: right">34</td>
      </tr>
  </tbody>
  <tbody class="frame">
      <tr>
          <td style="text-align: left">2025-02-17T23:00:00</td>
          <td style="text-align: left">Rome</td>
          <td style="text-align: right">49</td>
      </tr>
      <tr>
          <td style="text-align: left">2025-02-17T17:00:00</td>
          <td style="text-align: left">Rome</td>
          <td style="text-align: right">86</td>
      </tr>
      <tr class="current-row">
          <td style="text-align: left">2025-02-17T11:00:00</td>
          <td style="text-align: left">Rome</td>
          <td style="text-align: right">93</td>
      </tr>
      <tr>
          <td style="text-align: left">2025-02-17T12:00:00</td>
          <td style="text-align: left">Rome</td>
          <td style="text-align: right">115</td>
      </tr>
  </tbody>
  <tbody>
      <tr>
          <td style="text-align: left">2025-02-17T10:00:00</td>
          <td style="text-align: left">Rome</td>
          <td style="text-align: right">156</td>
      </tr>
  </tbody>
</table>

  </div>
</div>





<div class="expand" id="see-how-range-frame-units-work-with-interval-offsets">
  <a class="expand-link" href="#see-how-range-frame-units-work-with-interval-offsets"><span class="cf-icon Link"></span></a>
  <p class="expand-label">
      <span class="expand-toggle"></span><span>See how <code>RANGE</code> frame units work with interval offsets</span>
  </p>
  <div class="expand-content" style="display: none;" >
      <p>To use an interval offset with the <code>RANGE</code> frame unit, you must sort partitions
by <code>time</code> or a timestamp-type column.</p>


<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="p">...</span><span class="w"> </span><span class="n">OVER</span><span class="w"> </span><span class="p">(</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">time</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="n">RANGE</span><span class="w"> </span><span class="k">BETWEEN</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nb">INTERVAL</span><span class="w"> </span><span class="s1">&#39;3 hours&#39;</span><span class="w"> </span><span class="n">PRECEDING</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">AND</span><span class="w"> </span><span class="nb">INTERVAL</span><span class="w"> </span><span class="s1">&#39;1 hour&#39;</span><span class="w"> </span><span class="n">FOLLOWING</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="p">)</span></span></span></code></pre></div>
<p>The window frame includes rows with timestamps between three hours before and
one hour after the current row&rsquo;s timestamp:</p>
<div class="custom-timestamps">
  <table class="window-frame-units range-interval">
  <thead>
      <tr>
          <th style="text-align: left">time</th>
          <th style="text-align: left">room</th>
          <th style="text-align: right">temp</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: left">2022-01-01T08:00:00</td>
          <td style="text-align: left">Kitchen</td>
          <td style="text-align: right">21.0</td>
      </tr>
      <tr>
          <td style="text-align: left">2022-01-01T09:00:00</td>
          <td style="text-align: left">Kitchen</td>
          <td style="text-align: right">23.0</td>
      </tr>
  </tbody>
  <tbody class="frame">
      <tr>
          <td style="text-align: left">2022-01-01T10:00:00</td>
          <td style="text-align: left">Kitchen</td>
          <td style="text-align: right">22.7</td>
      </tr>
      <tr>
          <td style="text-align: left">2022-01-01T11:00:00</td>
          <td style="text-align: left">Kitchen</td>
          <td style="text-align: right">22.4</td>
      </tr>
      <tr>
          <td style="text-align: left">2022-01-01T12:00:00</td>
          <td style="text-align: left">Kitchen</td>
          <td style="text-align: right">22.5</td>
      </tr>
      <tr class="current-row">
          <td style="text-align: left">2022-01-01T13:00:00</td>
          <td style="text-align: left">Kitchen</td>
          <td style="text-align: right">22.8</td>
      </tr>
      <tr>
          <td style="text-align: left">2022-01-01T14:00:00</td>
          <td style="text-align: left">Kitchen</td>
          <td style="text-align: right">22.8</td>
      </tr>
  </tbody>
  <tbody>
      <tr>
          <td style="text-align: left">2022-01-01T15:00:00</td>
          <td style="text-align: left">Kitchen</td>
          <td style="text-align: right">22.7</td>
      </tr>
  </tbody>
</table>
</div>

  </div>
</div>


</div>

<h5 id="rows">ROWS</h5>
<p>Defines window frame boundaries using row positions relative to the current row.
The offset is the difference in row position from the current row.
<code>ROWS</code> supports the following offset types:</p>
<ul>
<li>Numeric <em>(non-negative)</em></li>
<li>Numeric string <em>(non-negative)</em></li>
</ul>
<div class="expand-wrapper">
  



<div class="expand" id="see-how-rows-frame-units-work">
  <a class="expand-link" href="#see-how-rows-frame-units-work"><span class="cf-icon Link"></span></a>
  <p class="expand-label">
      <span class="expand-toggle"></span><span>See how <code>ROWS</code> frame units work</span>
  </p>
  <div class="expand-content" style="display: none;" >
      <p>When using the <code>ROWS</code> frame unit, row positions relative to the current row
determine frame boundaries&ndash;for example:</p>


<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="p">...</span><span class="w"> </span><span class="n">OVER</span><span class="w"> </span><span class="p">(</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="k">ROWS</span><span class="w"> </span><span class="k">BETWEEN</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="n">PRECEDING</span><span class="w"> </span><span class="k">AND</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="n">FOLLOWING</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="p">)</span></span></span></code></pre></div>
<p>The window frame includes the two rows before and the one row after the current row:</p>
<table class="window-frame-units rows">
  <thead>
      <tr>
          <th style="text-align: left">time</th>
          <th style="text-align: left">city</th>
          <th style="text-align: right">wind_direction</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: left">2025-02-17T08:00:00</td>
          <td style="text-align: left">Rome</td>
          <td style="text-align: right">34</td>
      </tr>
      <tr>
          <td style="text-align: left">2025-02-17T10:00:00</td>
          <td style="text-align: left">Rome</td>
          <td style="text-align: right">156</td>
      </tr>      
  </tbody>
  <tbody class="frame">
      <tr>
          <td style="text-align: left">2025-02-17T11:00:00</td>
          <td style="text-align: left">Rome</td>
          <td style="text-align: right">93</td>
      </tr>
      <tr>
          <td style="text-align: left">2025-02-17T12:00:00</td>
          <td style="text-align: left">Rome</td>
          <td style="text-align: right">115</td>
      </tr>
      <tr class="current-row">
          <td style="text-align: left">2025-02-17T13:00:00</td>
          <td style="text-align: left">Rome</td>
          <td style="text-align: right">33</td>
      </tr>
      <tr>
          <td style="text-align: left">2025-02-17T17:00:00</td>
          <td style="text-align: left">Rome</td>
          <td style="text-align: right">86</td>
      </tr>
  </tbody>
  <tbody>    
      <tr>
          <td style="text-align: left">2025-02-17T23:00:00</td>
          <td style="text-align: left">Rome</td>
          <td style="text-align: right">49</td>
      </tr>
  </tbody>
</table>

  </div>
</div>


</div>

<h5 id="groups">GROUPS</h5>
<p>Defines window frame boundaries using row groups.
Rows with the same values for the columns in the <a href="#order-by-clause"><code>ORDER BY</code> clause</a>
comprise a row group.</p>

<div class="block important">
  
  
  <p>When using <code>GROUPS</code> frame units, include an <code>ORDER BY</code> clause.</p>
</div>
<p>The offset is the difference in row group position relative to the current row group.
<code>GROUPS</code> supports the following offset types:</p>
<ul>
<li>Numeric <em>(non-negative)</em></li>
<li>Numeric string <em>(non-negative)</em></li>
</ul>
<div class="expand-wrapper">
  



<div class="expand" id="see-how-groups-frame-units-work">
  <a class="expand-link" href="#see-how-groups-frame-units-work"><span class="cf-icon Link"></span></a>
  <p class="expand-label">
      <span class="expand-toggle"></span><span>See how <code>GROUPS</code> frame units work</span>
  </p>
  <div class="expand-content" style="display: none;" >
      <p>When using the <code>GROUPS</code> frame unit, unique combinations column values specified
in the <code>ORDER BY</code> clause determine each row group. For example, if you sort
partitions by <code>country</code> and <code>city</code>:</p>


<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="p">...</span><span class="w"> </span><span class="n">OVER</span><span class="w"> </span><span class="p">(</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">country</span><span class="p">,</span><span class="w"> </span><span class="n">city</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="n">GROUPS</span><span class="w"> </span><span class="p">...</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="p">)</span></span></span></code></pre></div>
<p>The query defines row groups in the following way:</p>
<table class="window-frame-units groups">
  <thead>
      <tr>
          <th style="text-align: left">time</th>
          <th style="text-align: left">country</th>
          <th style="text-align: left">city</th>
          <th style="text-align: right">wind_direction</th>
      </tr>
  </thead>
  <tbody class="group">
      <tr>
          <td style="text-align: left">2025-02-17T00:00:00</td>
          <td style="text-align: left">France</td>
          <td style="text-align: left">Strasbourg</td>
          <td style="text-align: right">181</td>
      </tr>
      <tr>
          <td style="text-align: left">2025-02-17T01:00:00</td>
          <td style="text-align: left">France</td>
          <td style="text-align: left">Strasbourg</td>
          <td style="text-align: right">228</td>
      </tr>
      <tr>
          <td style="text-align: left">2025-02-17T02:00:00</td>
          <td style="text-align: left">France</td>
          <td style="text-align: left">Strasbourg</td>
          <td style="text-align: right">289</td>
      </tr>
  </tbody>
  <tbody class="group">
      <tr>
          <td style="text-align: left">2025-02-17T00:00:00</td>
          <td style="text-align: left">France</td>
          <td style="text-align: left">Toulouse</td>
          <td style="text-align: right">24</td>
      </tr>
      <tr>
          <td style="text-align: left">2025-02-17T01:00:00</td>
          <td style="text-align: left">France</td>
          <td style="text-align: left">Toulouse</td>
          <td style="text-align: right">210</td>
      </tr>
      <tr>
          <td style="text-align: left">2025-02-17T02:00:00</td>
          <td style="text-align: left">France</td>
          <td style="text-align: left">Toulouse</td>
          <td style="text-align: right">206</td>
      </tr>
    </tbody>
    <tbody class="group">
      <tr>
          <td style="text-align: left">2025-02-17T00:00:00</td>
          <td style="text-align: left">Italy</td>
          <td style="text-align: left">Bari</td>
          <td style="text-align: right">2</td>
      </tr>
      <tr>
          <td style="text-align: left">2025-02-17T01:00:00</td>
          <td style="text-align: left">Italy</td>
          <td style="text-align: left">Bari</td>
          <td style="text-align: right">57</td>
      </tr>
    </tbody>
    <tbody class="group">
      <tr>
          <td style="text-align: left">2025-02-17T00:00:00</td>
          <td style="text-align: left">Italy</td>
          <td style="text-align: left">Bologna</td>
          <td style="text-align: right">351</td>
      </tr>
      <tr>
          <td style="text-align: left">2025-02-17T01:00:00</td>
          <td style="text-align: left">Italy</td>
          <td style="text-align: left">Bologna</td>
          <td style="text-align: right">232</td>
      </tr>
      <tr>
          <td style="text-align: left">2025-02-17T02:00:00</td>
          <td style="text-align: left">Italy</td>
          <td style="text-align: left">Bologna</td>
          <td style="text-align: right">29</td>
      </tr>
  </tbody>
</table>
<p>You can then use group offsets to determine frame boundaries:</p>


<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="p">...</span><span class="w"> </span><span class="n">OVER</span><span class="w"> </span><span class="p">(</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">country</span><span class="p">,</span><span class="w"> </span><span class="n">city</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="n">GROUPS</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="n">PRECEDING</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="p">)</span></span></span></code></pre></div>
<p>The window function uses all rows in the current row group and the two preceding row groups to perform the operation:</p>
<table class="window-frame-units groups-with-frame">
  <thead>
      <tr>
          <th style="text-align: left">time</th>
          <th style="text-align: left">country</th>
          <th style="text-align: left">city</th>
          <th style="text-align: right">wind_direction</th>
      </tr>
  </thead>
  <tbody class="frame">
      <tr>
          <td style="text-align: left">2025-02-17T00:00:00</td>
          <td style="text-align: left">France</td>
          <td style="text-align: left">Strasbourg</td>
          <td style="text-align: right">181</td>
      </tr>
      <tr>
          <td style="text-align: left">2025-02-17T01:00:00</td>
          <td style="text-align: left">France</td>
          <td style="text-align: left">Strasbourg</td>
          <td style="text-align: right">228</td>
      </tr>
      <tr>
          <td style="text-align: left">2025-02-17T02:00:00</td>
          <td style="text-align: left">France</td>
          <td style="text-align: left">Strasbourg</td>
          <td style="text-align: right">289</td>
      </tr>
      <tr>
          <td style="text-align: left">2025-02-17T00:00:00</td>
          <td style="text-align: left">France</td>
          <td style="text-align: left">Toulouse</td>
          <td style="text-align: right">24</td>
      </tr>
      <tr>
          <td style="text-align: left">2025-02-17T01:00:00</td>
          <td style="text-align: left">France</td>
          <td style="text-align: left">Toulouse</td>
          <td style="text-align: right">210</td>
      </tr>
      <tr>
          <td style="text-align: left">2025-02-17T02:00:00</td>
          <td style="text-align: left">France</td>
          <td style="text-align: left">Toulouse</td>
          <td style="text-align: right">206</td>
      </tr>
      <tr class="current-row">
          <td style="text-align: left">2025-02-17T00:00:00</td>
          <td style="text-align: left">Italy</td>
          <td style="text-align: left">Bari</td>
          <td style="text-align: right">2</td>
      </tr>
      <tr>
          <td style="text-align: left">2025-02-17T01:00:00</td>
          <td style="text-align: left">Italy</td>
          <td style="text-align: left">Bari</td>
          <td style="text-align: right">57</td>
      </tr>
    </tbody>
    <tbody class="group">
      <tr>
          <td style="text-align: left">2025-02-17T00:00:00</td>
          <td style="text-align: left">Italy</td>
          <td style="text-align: left">Bologna</td>
          <td style="text-align: right">351</td>
      </tr>
      <tr>
          <td style="text-align: left">2025-02-17T01:00:00</td>
          <td style="text-align: left">Italy</td>
          <td style="text-align: left">Bologna</td>
          <td style="text-align: right">232</td>
      </tr>
      <tr>
          <td style="text-align: left">2025-02-17T02:00:00</td>
          <td style="text-align: left">Italy</td>
          <td style="text-align: left">Bologna</td>
          <td style="text-align: right">29</td>
      </tr>
  </tbody>
</table>

  </div>
</div>


</div>

<h4 id="frame-boundaries">Frame boundaries</h4>
<p>Frame boundaries (<strong>frame_start</strong> and <strong>frame_end</strong>) define the boundaries of
each frame that the window function operates on.</p>
<ul>
<li><a href="#unbounded-preceding">UNBOUNDED PRECEDING</a></li>
<li><a href="#offset-preceding">offset PRECEDING</a></li>
<li><a href="#current-row">CURRENT_ROW</a></li>
<li><a href="#offset-following">offset FOLLOWING</a></li>
<li><a href="#unbounded-following">UNBOUNDED FOLLOWING</a></li>
</ul>
<h5 id="unbounded-preceding">UNBOUNDED PRECEDING</h5>
<p>Starts at the first row of the partition and ends at the current row.</p>


<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="n">UNBOUNDED</span><span class="w"> </span><span class="n">PRECEDING</span></span></span></code></pre></div>
<h5 id="offset-preceding">offset PRECEDING</h5>
<p>Starts at <code>offset</code> <a href="#frame-units">frame units</a> before the current row and ends at the current row.
For example, <code>3 PRECEDING</code> includes 3 rows before the current row.</p>


<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="o">&lt;</span><span class="k">offset</span><span class="o">&gt;</span><span class="w"> </span><span class="n">PRECEDING</span></span></span></code></pre></div>
<h5 id="current-row">CURRENT ROW</h5>
<p>Both starts and ends at the current row when used as a boundary.</p>


<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">CURRENT</span><span class="w"> </span><span class="k">ROW</span></span></span></code></pre></div>
<h5 id="offset-following">offset FOLLOWING</h5>
<p>Starts at the current row and ends at <code>offset</code> <a href="#frame-units">frame units</a> after the current row.
For example, <code>3 FOLLOWING</code> includes 3 rows after the current row.</p>


<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="o">&lt;</span><span class="k">offset</span><span class="o">&gt;</span><span class="w"> </span><span class="n">FOLLOWING</span></span></span></code></pre></div>
<h5 id="unbounded-following">UNBOUNDED FOLLOWING</h5>
<p>Use the current row to the end of the current partition the frame boundary.</p>


<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="n">UNBOUNDED</span><span class="w"> </span><span class="n">FOLLOWING</span></span></span></code></pre></div>
<h3 id="window-clause">WINDOW clause</h3>
<p>Use the <code>WINDOW</code> clause to define a reusable alias for a window specification.
This is useful when multiple window functions in your query share the same window definition.</p>
<p>Instead of repeating the same OVER clause for each function,
define the window once and reference it by alias&ndash;for example:</p>


<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">SELECT</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="k">sum</span><span class="p">(</span><span class="n">net_gain</span><span class="p">)</span><span class="w"> </span><span class="n">OVER</span><span class="w"> </span><span class="n">w</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="k">avg</span><span class="p">(</span><span class="n">net_net</span><span class="p">)</span><span class="w"> </span><span class="n">OVER</span><span class="w"> </span><span class="n">w</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="k">FROM</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="n">finance</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="n">WINDOW</span><span class="w"> </span><span class="n">w</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="n">PARTITION</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">ticker</span><span class="w"> </span><span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">time</span><span class="w"> </span><span class="k">DESC</span><span class="p">);</span></span></span></code></pre></div>
<hr>
<h2 id="aggregate-functions">Aggregate functions</h2>
<p>All <a href="/influxdb3/cloud-dedicated/reference/sql/functions/aggregate/">aggregate functions</a>
can be used as window functions.</p>
<h2 id="ranking-functions">Ranking Functions</h2>
<ul>
<li><a href="#cume_dist">cume_dist</a></li>
<li><a href="#dense_rank">dense_rank</a></li>
<li><a href="#ntile">ntile</a></li>
<li><a href="#percent_rank">percent_rank</a></li>
<li><a href="#rank">rank</a></li>
<li><a href="#row_number">row_number</a></li>
</ul>
<h3 id="cume_dist">cume_dist</h3>
<p>Returns the cumulative distribution of a value within a group of values.
The returned value is greater than 0 and less than or equal to 1 and represents
the relative rank of the value in the set of values.
The <a href="#order-by-clause"><code>ORDER BY</code> clause</a> in the <code>OVER</code> clause is used
to correctly calculate the cumulative distribution of the current row value.</p>


<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="n">cume_dist</span><span class="p">()</span></span></span></code></pre></div>

<div class="block important">
  
  
  <p>When using <code>cume_dist</code>, include an <a href="#order-by-clause"><code>ORDER BY</code> clause</a> in the <code>OVER</code> clause.</p>
</div>
<div class="expand-wrapper">
  



<div class="expand" id="view-cume_dist-query-example">
  <a class="expand-link" href="#view-cume_dist-query-example"><span class="cf-icon Link"></span></a>
  <p class="expand-label">
      <span class="expand-toggle"></span><span>View <code>cume_dist</code> query example</span>
  </p>
  <div class="expand-content" style="display: none;" >
      <p>The following example uses the <a href="/influxdb3/pr-preview/reference/sample-data/#home-sensor-data">Home sensor sample data</a>.</p>
<div class="custom-timestamps">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">SELECT</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="n">time</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="n">room</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="n">temp</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="n">cume_dist</span><span class="p">()</span><span class="w"> </span><span class="n">OVER</span><span class="w"> </span><span class="p">(</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">PARTITION</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">room</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">temp</span><span class="w"> 
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="p">)</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">cume_dist</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="k">FROM</span><span class="w"> </span><span class="n">home</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="k">WHERE</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="n">time</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="s1">&#39;2022-01-01T08:00:00Z&#39;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="k">AND</span><span class="w"> </span><span class="n">time</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="s1">&#39;2022-01-01T12:00:00Z&#39;</span></span></span></code></pre></div>
<table>
  <thead>
      <tr>
          <th style="text-align: left">time</th>
          <th style="text-align: left">room</th>
          <th style="text-align: right">temp</th>
          <th style="text-align: right">cume_dist</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: left">2022-01-01T08:00:00</td>
          <td style="text-align: left">Living Room</td>
          <td style="text-align: right">21.1</td>
          <td style="text-align: right">0.25</td>
      </tr>
      <tr>
          <td style="text-align: left">2022-01-01T09:00:00</td>
          <td style="text-align: left">Living Room</td>
          <td style="text-align: right">21.4</td>
          <td style="text-align: right">0.5</td>
      </tr>
      <tr>
          <td style="text-align: left">2022-01-01T10:00:00</td>
          <td style="text-align: left">Living Room</td>
          <td style="text-align: right">21.8</td>
          <td style="text-align: right">0.75</td>
      </tr>
      <tr>
          <td style="text-align: left">2022-01-01T11:00:00</td>
          <td style="text-align: left">Living Room</td>
          <td style="text-align: right">22.2</td>
          <td style="text-align: right">1.0</td>
      </tr>
      <tr>
          <td style="text-align: left">2022-01-01T08:00:00</td>
          <td style="text-align: left">Kitchen</td>
          <td style="text-align: right">21.0</td>
          <td style="text-align: right">0.25</td>
      </tr>
      <tr>
          <td style="text-align: left">2022-01-01T11:00:00</td>
          <td style="text-align: left">Kitchen</td>
          <td style="text-align: right">22.4</td>
          <td style="text-align: right">0.5</td>
      </tr>
      <tr>
          <td style="text-align: left">2022-01-01T10:00:00</td>
          <td style="text-align: left">Kitchen</td>
          <td style="text-align: right">22.7</td>
          <td style="text-align: right">0.75</td>
      </tr>
      <tr>
          <td style="text-align: left">2022-01-01T09:00:00</td>
          <td style="text-align: left">Kitchen</td>
          <td style="text-align: right">23.0</td>
          <td style="text-align: right">1.0</td>
      </tr>
  </tbody>
</table>
</div>

  </div>
</div>


</div>

<h3 id="dense_rank">dense_rank</h3>
<p>Returns the rank of the current row in its partition.
Ranking is consecutive; assigns duplicate values the same rank number and the rank sequence continues
with the next distinct value (unlike <a href="#rank"><code>rank()</code></a>).</p>
<p>The <a href="#order-by-clause"><code>ORDER BY</code> clause</a> in the <code>OVER</code> clause determines
ranking order.</p>


<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="n">dense_rank</span><span class="p">()</span></span></span></code></pre></div>
<div class="expand-wrapper">
  



<div class="expand" id="view-dense_rank-query-example">
  <a class="expand-link" href="#view-dense_rank-query-example"><span class="cf-icon Link"></span></a>
  <p class="expand-label">
      <span class="expand-toggle"></span><span>View <code>dense_rank</code> query example</span>
  </p>
  <div class="expand-content" style="display: none;" >
      <p>The following example uses the <a href="/influxdb3/pr-preview/reference/sample-data/#home-sensor-data">Home sensor sample data</a>.</p>
<div class="custom-timestamps">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">SELECT</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="n">time</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="n">room</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="n">temp</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="n">dense_rank</span><span class="p">()</span><span class="w"> </span><span class="n">OVER</span><span class="w"> </span><span class="p">(</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">PARTITION</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">room</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">temp</span><span class="w"> 
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="p">)</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">dense_rank</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="k">FROM</span><span class="w"> </span><span class="n">home</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="k">WHERE</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="n">time</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="s1">&#39;2022-01-01T08:00:00Z&#39;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="k">AND</span><span class="w"> </span><span class="n">time</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="s1">&#39;2022-01-01T12:00:00Z&#39;</span></span></span></code></pre></div>
<table>
  <thead>
      <tr>
          <th style="text-align: left">time</th>
          <th style="text-align: left">room</th>
          <th style="text-align: right">temp</th>
          <th style="text-align: right">dense_rank</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: left">2022-01-01T08:00:00</td>
          <td style="text-align: left">Kitchen</td>
          <td style="text-align: right">21.0</td>
          <td style="text-align: right">1</td>
      </tr>
      <tr>
          <td style="text-align: left">2022-01-01T11:00:00</td>
          <td style="text-align: left">Kitchen</td>
          <td style="text-align: right">22.4</td>
          <td style="text-align: right">2</td>
      </tr>
      <tr>
          <td style="text-align: left">2022-01-01T10:00:00</td>
          <td style="text-align: left">Kitchen</td>
          <td style="text-align: right">22.7</td>
          <td style="text-align: right">3</td>
      </tr>
      <tr>
          <td style="text-align: left">2022-01-01T09:00:00</td>
          <td style="text-align: left">Kitchen</td>
          <td style="text-align: right">23.0</td>
          <td style="text-align: right">4</td>
      </tr>
      <tr>
          <td style="text-align: left">2022-01-01T08:00:00</td>
          <td style="text-align: left">Living Room</td>
          <td style="text-align: right">21.1</td>
          <td style="text-align: right">1</td>
      </tr>
      <tr>
          <td style="text-align: left">2022-01-01T09:00:00</td>
          <td style="text-align: left">Living Room</td>
          <td style="text-align: right">21.4</td>
          <td style="text-align: right">2</td>
      </tr>
      <tr>
          <td style="text-align: left">2022-01-01T10:00:00</td>
          <td style="text-align: left">Living Room</td>
          <td style="text-align: right">21.8</td>
          <td style="text-align: right">3</td>
      </tr>
      <tr>
          <td style="text-align: left">2022-01-01T11:00:00</td>
          <td style="text-align: left">Living Room</td>
          <td style="text-align: right">22.2</td>
          <td style="text-align: right">4</td>
      </tr>
  </tbody>
</table>
</div>

  </div>
</div>




<div class="expand" id="compare-dense_rank-rank-and-row_number-functions">
  <a class="expand-link" href="#compare-dense_rank-rank-and-row_number-functions"><span class="cf-icon Link"></span></a>
  <p class="expand-label">
      <span class="expand-toggle"></span><span>Compare <code>dense_rank</code>, <code>rank</code>, and <code>row_number</code> functions</span>
  </p>
  <div class="expand-content" style="display: none;" >
      <p>Consider a table with duplicate ID values.
The following query shows how each ranking function handles duplicate values:</p>


<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">SELECT</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="n">id</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="n">rank</span><span class="p">()</span><span class="w"> </span><span class="n">OVER</span><span class="p">(</span><span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">id</span><span class="p">),</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="n">dense_rank</span><span class="p">()</span><span class="w"> </span><span class="n">OVER</span><span class="p">(</span><span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">id</span><span class="p">),</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="n">row_number</span><span class="p">()</span><span class="w"> </span><span class="n">OVER</span><span class="p">(</span><span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">id</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="k">FROM</span><span class="w"> </span><span class="n">my_table</span><span class="p">;</span></span></span></code></pre></div>
<table>
  <thead>
      <tr>
          <th style="text-align: left">ID</th>
          <th style="text-align: right">rank</th>
          <th style="text-align: right">dense_rank</th>
          <th style="text-align: right">row_number</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: left">1</td>
          <td style="text-align: right">1</td>
          <td style="text-align: right">1</td>
          <td style="text-align: right">1</td>
      </tr>
      <tr>
          <td style="text-align: left">1</td>
          <td style="text-align: right">1</td>
          <td style="text-align: right">1</td>
          <td style="text-align: right">2</td>
      </tr>
      <tr>
          <td style="text-align: left">1</td>
          <td style="text-align: right">1</td>
          <td style="text-align: right">1</td>
          <td style="text-align: right">3</td>
      </tr>
      <tr>
          <td style="text-align: left">2</td>
          <td style="text-align: right">4</td>
          <td style="text-align: right">2</td>
          <td style="text-align: right">4</td>
      </tr>
  </tbody>
</table>
<p>Key differences:</p>
<ul>
<li><a href="#rank"><code>rank()</code></a> assigns the same rank to equal values but skips ranks for subsequent values</li>
<li><a href="#dense_rank"><code>dense_rank()</code></a> assigns the same rank to equal values and uses consecutive ranks</li>
<li><a href="#row_number"><code>row_number()</code></a> assigns unique sequential numbers regardless of value (non-deterministic)</li>
</ul>

  </div>
</div>


</div>

<h3 id="ntile">ntile</h3>
<p>Distributes the rows in an ordered partition into the specified number of groups.
Each group is numbered, starting at one.
For each row, <code>ntile</code> returns the group number to which the row belongs.
Group numbers range from 1 to the <code>expression</code> value, dividing the partition as
equally as possible.
The <a href="#order-by-clause"><code>ORDER BY</code> clause</a> in the <code>OVER</code> clause determines
ranking order.</p>


<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="n">ntile</span><span class="p">(</span><span class="n">expression</span><span class="p">)</span></span></span></code></pre></div>
<h4 id="arguments">Arguments</h4>
<ul>
<li><strong>expression</strong>: An integer. The number of groups to split the partition into.</li>
</ul>
<div class="expand-wrapper">
  



<div class="expand" id="view-ntile-query-example">
  <a class="expand-link" href="#view-ntile-query-example"><span class="cf-icon Link"></span></a>
  <p class="expand-label">
      <span class="expand-toggle"></span><span>View <code>ntile</code> query example</span>
  </p>
  <div class="expand-content" style="display: none;" >
      <p>The following example uses the <a href="/influxdb3/pr-preview/reference/sample-data/#home-sensor-data">Home sensor sample data</a>.</p>
<div class="custom-timestamps">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">SELECT</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="n">time</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="n">temp</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="n">ntile</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span><span class="w"> </span><span class="n">OVER</span><span class="w"> </span><span class="p">(</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">time</span><span class="w"> 
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="p">)</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">ntile</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="k">FROM</span><span class="w"> </span><span class="n">home</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="k">WHERE</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="n">room</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;Kitchen&#39;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="k">AND</span><span class="w"> </span><span class="n">time</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="s1">&#39;2022-01-01T08:00:00Z&#39;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="k">AND</span><span class="w"> </span><span class="n">time</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="s1">&#39;2022-01-01T15:00:00Z&#39;</span></span></span></code></pre></div>
<table>
  <thead>
      <tr>
          <th style="text-align: left">time</th>
          <th style="text-align: right">temp</th>
          <th style="text-align: right">ntile</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: left">2022-01-01T08:00:00</td>
          <td style="text-align: right">21.0</td>
          <td style="text-align: right">1</td>
      </tr>
      <tr>
          <td style="text-align: left">2022-01-01T09:00:00</td>
          <td style="text-align: right">23.0</td>
          <td style="text-align: right">1</td>
      </tr>
      <tr>
          <td style="text-align: left">2022-01-01T10:00:00</td>
          <td style="text-align: right">22.7</td>
          <td style="text-align: right">2</td>
      </tr>
      <tr>
          <td style="text-align: left">2022-01-01T11:00:00</td>
          <td style="text-align: right">22.4</td>
          <td style="text-align: right">2</td>
      </tr>
      <tr>
          <td style="text-align: left">2022-01-01T12:00:00</td>
          <td style="text-align: right">22.5</td>
          <td style="text-align: right">3</td>
      </tr>
      <tr>
          <td style="text-align: left">2022-01-01T13:00:00</td>
          <td style="text-align: right">22.8</td>
          <td style="text-align: right">3</td>
      </tr>
      <tr>
          <td style="text-align: left">2022-01-01T14:00:00</td>
          <td style="text-align: right">22.8</td>
          <td style="text-align: right">4</td>
      </tr>
  </tbody>
</table>
</div>

  </div>
</div>


</div>

<h3 id="percent_rank">percent_rank</h3>
<p>Returns the percentage rank of the current row within its partition.
The returned value is between <code>0</code> and <code>1</code>, computed as:</p>


<pre tabindex="0"><code>(rank - 1) / (total_rows - 1)</code></pre>
<p>The <a href="#order-by-clause"><code>ORDER BY</code> clause</a> in the <code>OVER</code> clause determines
the ranking order.</p>


<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="n">percent_rank</span><span class="p">()</span></span></span></code></pre></div>
<div class="expand-wrapper">
  



<div class="expand" id="view-percent_rank-query-example">
  <a class="expand-link" href="#view-percent_rank-query-example"><span class="cf-icon Link"></span></a>
  <p class="expand-label">
      <span class="expand-toggle"></span><span>View <code>percent_rank</code> query example</span>
  </p>
  <div class="expand-content" style="display: none;" >
      <p>The following example uses the <a href="/influxdb3/pr-preview/reference/sample-data/#home-sensor-data">Home sensor sample data</a>.</p>
<div class="custom-timestamps">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">SELECT</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="n">time</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="n">room</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="n">temp</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="n">percent_rank</span><span class="p">()</span><span class="w"> </span><span class="n">OVER</span><span class="w"> </span><span class="p">(</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">PARTITION</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">room</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">temp</span><span class="w"> 
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="p">)</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">percent_rank</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="k">FROM</span><span class="w"> </span><span class="n">home</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="k">WHERE</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="n">time</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="s1">&#39;2022-01-01T08:00:00Z&#39;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="k">AND</span><span class="w"> </span><span class="n">time</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="s1">&#39;2022-01-01T11:00:00Z&#39;</span></span></span></code></pre></div>
<table>
  <thead>
      <tr>
          <th style="text-align: left">time</th>
          <th style="text-align: left">room</th>
          <th style="text-align: right">temp</th>
          <th style="text-align: right">percent_rank</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: left">2022-01-01T08:00:00</td>
          <td style="text-align: left">Kitchen</td>
          <td style="text-align: right">21.0</td>
          <td style="text-align: right">0.0</td>
      </tr>
      <tr>
          <td style="text-align: left">2022-01-01T10:00:00</td>
          <td style="text-align: left">Kitchen</td>
          <td style="text-align: right">22.7</td>
          <td style="text-align: right">0.5</td>
      </tr>
      <tr>
          <td style="text-align: left">2022-01-01T09:00:00</td>
          <td style="text-align: left">Kitchen</td>
          <td style="text-align: right">23.0</td>
          <td style="text-align: right">1.0</td>
      </tr>
      <tr>
          <td style="text-align: left">2022-01-01T08:00:00</td>
          <td style="text-align: left">Living Room</td>
          <td style="text-align: right">21.1</td>
          <td style="text-align: right">0.0</td>
      </tr>
      <tr>
          <td style="text-align: left">2022-01-01T09:00:00</td>
          <td style="text-align: left">Living Room</td>
          <td style="text-align: right">21.4</td>
          <td style="text-align: right">0.5</td>
      </tr>
      <tr>
          <td style="text-align: left">2022-01-01T10:00:00</td>
          <td style="text-align: left">Living Room</td>
          <td style="text-align: right">21.8</td>
          <td style="text-align: right">1.0</td>
      </tr>
  </tbody>
</table>
</div>

  </div>
</div>


</div>

<h3 id="rank">rank</h3>
<p>Returns the rank of the current row in its partition.
For duplicate values, <code>rank</code> assigns them the same rank number, skips subsequent ranks (unlike <a href="#dense_rank"><code>dense_rank()</code></a>),
and then continues ranking with the next distinct value.</p>
<p>The <a href="#order-by-clause"><code>ORDER BY</code> clause</a> in the <code>OVER</code> clause determines
ranking order.</p>


<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="n">rank</span><span class="p">()</span></span></span></code></pre></div>
<div class="expand-wrapper">
  



<div class="expand" id="view-rank-query-example">
  <a class="expand-link" href="#view-rank-query-example"><span class="cf-icon Link"></span></a>
  <p class="expand-label">
      <span class="expand-toggle"></span><span>View <code>rank</code> query example</span>
  </p>
  <div class="expand-content" style="display: none;" >
      <p>The following example uses the <a href="/influxdb3/pr-preview/reference/sample-data/#home-sensor-data">Home sensor sample data</a>.</p>
<div class="custom-timestamps">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">SELECT</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="n">time</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="n">room</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="n">temp</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="n">rank</span><span class="p">()</span><span class="w"> </span><span class="n">OVER</span><span class="w"> </span><span class="p">(</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">PARTITION</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">room</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">temp</span><span class="w"> 
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="p">)</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">rank</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="k">FROM</span><span class="w"> </span><span class="n">home</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="k">WHERE</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="n">time</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="s1">&#39;2022-01-01T08:00:00Z&#39;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="k">AND</span><span class="w"> </span><span class="n">time</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="s1">&#39;2022-01-01T11:00:00Z&#39;</span></span></span></code></pre></div>
<table>
  <thead>
      <tr>
          <th style="text-align: left">time</th>
          <th style="text-align: left">room</th>
          <th style="text-align: right">temp</th>
          <th style="text-align: right">rank</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: left">2022-01-01T08:00:00</td>
          <td style="text-align: left">Living Room</td>
          <td style="text-align: right">21.1</td>
          <td style="text-align: right">1</td>
      </tr>
      <tr>
          <td style="text-align: left">2022-01-01T09:00:00</td>
          <td style="text-align: left">Living Room</td>
          <td style="text-align: right">21.4</td>
          <td style="text-align: right">2</td>
      </tr>
      <tr>
          <td style="text-align: left">2022-01-01T10:00:00</td>
          <td style="text-align: left">Living Room</td>
          <td style="text-align: right">21.8</td>
          <td style="text-align: right">3</td>
      </tr>
      <tr>
          <td style="text-align: left">2022-01-01T08:00:00</td>
          <td style="text-align: left">Kitchen</td>
          <td style="text-align: right">21.0</td>
          <td style="text-align: right">1</td>
      </tr>
      <tr>
          <td style="text-align: left">2022-01-01T10:00:00</td>
          <td style="text-align: left">Kitchen</td>
          <td style="text-align: right">22.7</td>
          <td style="text-align: right">2</td>
      </tr>
      <tr>
          <td style="text-align: left">2022-01-01T09:00:00</td>
          <td style="text-align: left">Kitchen</td>
          <td style="text-align: right">23.0</td>
          <td style="text-align: right">3</td>
      </tr>
  </tbody>
</table>
</div>

  </div>
</div>




<div class="expand" id="compare-dense_rank-rank-and-row_number-functions">
  <a class="expand-link" href="#compare-dense_rank-rank-and-row_number-functions"><span class="cf-icon Link"></span></a>
  <p class="expand-label">
      <span class="expand-toggle"></span><span>Compare <code>dense_rank</code>, <code>rank</code>, and <code>row_number</code> functions</span>
  </p>
  <div class="expand-content" style="display: none;" >
      <p>Consider a table with duplicate ID values.
The following query shows how each ranking function handles duplicate values:</p>


<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">SELECT</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="n">id</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="n">rank</span><span class="p">()</span><span class="w"> </span><span class="n">OVER</span><span class="p">(</span><span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">id</span><span class="p">),</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="n">dense_rank</span><span class="p">()</span><span class="w"> </span><span class="n">OVER</span><span class="p">(</span><span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">id</span><span class="p">),</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="n">row_number</span><span class="p">()</span><span class="w"> </span><span class="n">OVER</span><span class="p">(</span><span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">id</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="k">FROM</span><span class="w"> </span><span class="n">my_table</span><span class="p">;</span></span></span></code></pre></div>
<table>
  <thead>
      <tr>
          <th style="text-align: left">ID</th>
          <th style="text-align: right">rank</th>
          <th style="text-align: right">dense_rank</th>
          <th style="text-align: right">row_number</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: left">1</td>
          <td style="text-align: right">1</td>
          <td style="text-align: right">1</td>
          <td style="text-align: right">1</td>
      </tr>
      <tr>
          <td style="text-align: left">1</td>
          <td style="text-align: right">1</td>
          <td style="text-align: right">1</td>
          <td style="text-align: right">2</td>
      </tr>
      <tr>
          <td style="text-align: left">1</td>
          <td style="text-align: right">1</td>
          <td style="text-align: right">1</td>
          <td style="text-align: right">3</td>
      </tr>
      <tr>
          <td style="text-align: left">2</td>
          <td style="text-align: right">4</td>
          <td style="text-align: right">2</td>
          <td style="text-align: right">4</td>
      </tr>
  </tbody>
</table>
<p>Key differences:</p>
<ul>
<li><a href="#rank"><code>rank()</code></a> assigns the same rank to equal values but skips ranks for subsequent values</li>
<li><a href="#dense_rank"><code>dense_rank()</code></a> assigns the same rank to equal values and uses consecutive ranks</li>
<li><a href="#row_number"><code>row_number()</code></a> assigns unique sequential numbers regardless of value (non-deterministic)</li>
</ul>

  </div>
</div>


</div>

<h3 id="row_number">row_number</h3>
<p>Returns the position of the current row in its partition, counting from 1.
The <a href="#order-by-clause"><code>ORDER BY</code> clause</a> in the <code>OVER</code> clause determines
row order.</p>


<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="n">row_number</span><span class="p">()</span></span></span></code></pre></div>
<div class="expand-wrapper">
  



<div class="expand" id="view-row_number-query-example">
  <a class="expand-link" href="#view-row_number-query-example"><span class="cf-icon Link"></span></a>
  <p class="expand-label">
      <span class="expand-toggle"></span><span>View <code>row_number</code> query example</span>
  </p>
  <div class="expand-content" style="display: none;" >
      <p>The following example uses the <a href="/influxdb3/pr-preview/reference/sample-data/#home-sensor-data">Home sensor sample data</a>.</p>
<div class="custom-timestamps">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">SELECT</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="n">time</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="n">room</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="n">temp</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="n">row_number</span><span class="p">()</span><span class="w"> </span><span class="n">OVER</span><span class="w"> </span><span class="p">(</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">PARTITION</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">room</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">temp</span><span class="w"> 
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="p">)</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">row_number</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="k">FROM</span><span class="w"> </span><span class="n">home</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="k">WHERE</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="n">time</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="s1">&#39;2022-01-01T08:00:00Z&#39;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="k">AND</span><span class="w"> </span><span class="n">time</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="s1">&#39;2022-01-01T11:00:00Z&#39;</span></span></span></code></pre></div>
<table>
  <thead>
      <tr>
          <th style="text-align: left">time</th>
          <th style="text-align: left">room</th>
          <th style="text-align: right">temp</th>
          <th style="text-align: right">row_number</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: left">2022-01-01T08:00:00</td>
          <td style="text-align: left">Living Room</td>
          <td style="text-align: right">21.1</td>
          <td style="text-align: right">1</td>
      </tr>
      <tr>
          <td style="text-align: left">2022-01-01T09:00:00</td>
          <td style="text-align: left">Living Room</td>
          <td style="text-align: right">21.4</td>
          <td style="text-align: right">2</td>
      </tr>
      <tr>
          <td style="text-align: left">2022-01-01T10:00:00</td>
          <td style="text-align: left">Living Room</td>
          <td style="text-align: right">21.8</td>
          <td style="text-align: right">3</td>
      </tr>
      <tr>
          <td style="text-align: left">2022-01-01T08:00:00</td>
          <td style="text-align: left">Kitchen</td>
          <td style="text-align: right">21.0</td>
          <td style="text-align: right">1</td>
      </tr>
      <tr>
          <td style="text-align: left">2022-01-01T10:00:00</td>
          <td style="text-align: left">Kitchen</td>
          <td style="text-align: right">22.7</td>
          <td style="text-align: right">2</td>
      </tr>
      <tr>
          <td style="text-align: left">2022-01-01T09:00:00</td>
          <td style="text-align: left">Kitchen</td>
          <td style="text-align: right">23.0</td>
          <td style="text-align: right">3</td>
      </tr>
  </tbody>
</table>
</div>

  </div>
</div>




<div class="expand" id="compare-dense_rank-rank-and-row_number-functions">
  <a class="expand-link" href="#compare-dense_rank-rank-and-row_number-functions"><span class="cf-icon Link"></span></a>
  <p class="expand-label">
      <span class="expand-toggle"></span><span>Compare <code>dense_rank</code>, <code>rank</code>, and <code>row_number</code> functions</span>
  </p>
  <div class="expand-content" style="display: none;" >
      <p>Consider a table with duplicate ID values.
The following query shows how each ranking function handles duplicate values:</p>


<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">SELECT</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="n">id</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="n">rank</span><span class="p">()</span><span class="w"> </span><span class="n">OVER</span><span class="p">(</span><span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">id</span><span class="p">),</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="n">dense_rank</span><span class="p">()</span><span class="w"> </span><span class="n">OVER</span><span class="p">(</span><span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">id</span><span class="p">),</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="n">row_number</span><span class="p">()</span><span class="w"> </span><span class="n">OVER</span><span class="p">(</span><span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">id</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="k">FROM</span><span class="w"> </span><span class="n">my_table</span><span class="p">;</span></span></span></code></pre></div>
<table>
  <thead>
      <tr>
          <th style="text-align: left">ID</th>
          <th style="text-align: right">rank</th>
          <th style="text-align: right">dense_rank</th>
          <th style="text-align: right">row_number</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: left">1</td>
          <td style="text-align: right">1</td>
          <td style="text-align: right">1</td>
          <td style="text-align: right">1</td>
      </tr>
      <tr>
          <td style="text-align: left">1</td>
          <td style="text-align: right">1</td>
          <td style="text-align: right">1</td>
          <td style="text-align: right">2</td>
      </tr>
      <tr>
          <td style="text-align: left">1</td>
          <td style="text-align: right">1</td>
          <td style="text-align: right">1</td>
          <td style="text-align: right">3</td>
      </tr>
      <tr>
          <td style="text-align: left">2</td>
          <td style="text-align: right">4</td>
          <td style="text-align: right">2</td>
          <td style="text-align: right">4</td>
      </tr>
  </tbody>
</table>
<p>Key differences:</p>
<ul>
<li><a href="#rank"><code>rank()</code></a> assigns the same rank to equal values but skips ranks for subsequent values</li>
<li><a href="#dense_rank"><code>dense_rank()</code></a> assigns the same rank to equal values and uses consecutive ranks</li>
<li><a href="#row_number"><code>row_number()</code></a> assigns unique sequential numbers regardless of value (non-deterministic)</li>
</ul>

  </div>
</div>


</div>

<h2 id="analytical-functions">Analytical Functions</h2>
<ul>
<li>
<p><a href="#first_value">first_value</a></p>
</li>
<li>
<p><a href="#lag">lag</a></p>
</li>
<li>
<p><a href="#last_value">last_value</a></p>
</li>
<li>
<p><a href="#lead">lead</a></p>
</li>
<li>
<p><a href="#nth_value">nth_value</a></p>
</li>
</ul>
<h3 id="first_value">first_value</h3>
<p>Returns the value from the first row of the window frame.</p>


<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="n">first_value</span><span class="p">(</span><span class="n">expression</span><span class="p">)</span></span></span></code></pre></div>
<h4 id="arguments-1">Arguments</h4>
<ul>
<li><strong>expression</strong>: Expression to operate on. Can be a constant, column, or
function, and any combination of arithmetic operators.</li>
</ul>
<h5 id="related-functions">Related functions</h5>
<p><a href="#last_value">last_value</a></p>
<div class="expand-wrapper">
  



<div class="expand" id="view-first_value-query-example">
  <a class="expand-link" href="#view-first_value-query-example"><span class="cf-icon Link"></span></a>
  <p class="expand-label">
      <span class="expand-toggle"></span><span>View <code>first_value</code> query example</span>
  </p>
  <div class="expand-content" style="display: none;" >
      <p>The following example uses the <a href="/influxdb3/pr-preview/reference/sample-data/#home-sensor-data">Home sensor sample data</a>.</p>
<div class="custom-timestamps">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">SELECT</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="n">time</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="n">room</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="n">temp</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="n">first_value</span><span class="p">(</span><span class="n">temp</span><span class="p">)</span><span class="w"> </span><span class="n">OVER</span><span class="w"> </span><span class="p">(</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">PARTITION</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">room</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">time</span><span class="w"> 
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="p">)</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">first_value</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="k">FROM</span><span class="w"> </span><span class="n">home</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="k">WHERE</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="n">time</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="s1">&#39;2022-01-01T08:00:00Z&#39;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="k">AND</span><span class="w"> </span><span class="n">time</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="s1">&#39;2022-01-01T11:00:00Z&#39;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">room</span><span class="p">,</span><span class="w"> </span><span class="n">time</span></span></span></code></pre></div>
<table>
  <thead>
      <tr>
          <th style="text-align: left">time</th>
          <th style="text-align: left">room</th>
          <th style="text-align: right">temp</th>
          <th style="text-align: right">first_value</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: left">2022-01-01T08:00:00</td>
          <td style="text-align: left">Kitchen</td>
          <td style="text-align: right">21.0</td>
          <td style="text-align: right">21.0</td>
      </tr>
      <tr>
          <td style="text-align: left">2022-01-01T09:00:00</td>
          <td style="text-align: left">Kitchen</td>
          <td style="text-align: right">23.0</td>
          <td style="text-align: right">21.0</td>
      </tr>
      <tr>
          <td style="text-align: left">2022-01-01T10:00:00</td>
          <td style="text-align: left">Kitchen</td>
          <td style="text-align: right">22.7</td>
          <td style="text-align: right">21.0</td>
      </tr>
      <tr>
          <td style="text-align: left">2022-01-01T08:00:00</td>
          <td style="text-align: left">Living Room</td>
          <td style="text-align: right">21.1</td>
          <td style="text-align: right">21.1</td>
      </tr>
      <tr>
          <td style="text-align: left">2022-01-01T09:00:00</td>
          <td style="text-align: left">Living Room</td>
          <td style="text-align: right">21.4</td>
          <td style="text-align: right">21.1</td>
      </tr>
      <tr>
          <td style="text-align: left">2022-01-01T10:00:00</td>
          <td style="text-align: left">Living Room</td>
          <td style="text-align: right">21.8</td>
          <td style="text-align: right">21.1</td>
      </tr>
  </tbody>
</table>
</div>

  </div>
</div>


</div>

<h3 id="lag">lag</h3>
<p>Returns the value from the row that is at the specified offset before the
current row in the partition. If the offset row is outside the partition,
the function returns the specified default.</p>


<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="n">lag</span><span class="p">(</span><span class="n">expression</span><span class="p">,</span><span class="w"> </span><span class="k">offset</span><span class="p">,</span><span class="w"> </span><span class="k">default</span><span class="p">)</span></span></span></code></pre></div>
<h4 id="arguments-2">Arguments</h4>
<ul>
<li><strong>expression</strong>: Expression to operate on.
Can be a constant, column, or function, and any combination of arithmetic or
string operators.</li>
<li><strong>offset</strong>: How many rows <em>before</em> the current row to retrieve the value of
<em>expression</em> from. Default is <code>1</code>.</li>
<li><strong>default</strong>: The default value to return if the offset is in the partition.
Must be of the same type as <em>expression</em>.</li>
</ul>
<h5 id="related-functions-1">Related functions</h5>
<p><a href="#lead">lead</a></p>
<div class="expand-wrapper">
  



<div class="expand" id="view-lag-query-example">
  <a class="expand-link" href="#view-lag-query-example"><span class="cf-icon Link"></span></a>
  <p class="expand-label">
      <span class="expand-toggle"></span><span>View <code>lag</code> query example</span>
  </p>
  <div class="expand-content" style="display: none;" >
      <p>The following example uses the <a href="/influxdb3/pr-preview/reference/sample-data/#home-sensor-data">Home sensor sample data</a>.</p>
<div class="custom-timestamps">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">SELECT</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="n">time</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="n">room</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="n">temp</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="n">lag</span><span class="p">(</span><span class="n">temp</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="n">OVER</span><span class="w"> </span><span class="p">(</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">PARTITION</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">room</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">time</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="p">)</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">previous_value</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="k">FROM</span><span class="w"> </span><span class="n">home</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="k">WHERE</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="n">time</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="s1">&#39;2022-01-01T08:00:00Z&#39;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="k">AND</span><span class="w"> </span><span class="n">time</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="s1">&#39;2022-01-01T11:00:00Z&#39;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">room</span><span class="p">,</span><span class="w"> </span><span class="n">time</span></span></span></code></pre></div>
<table>
  <thead>
      <tr>
          <th style="text-align: left">time</th>
          <th style="text-align: left">room</th>
          <th style="text-align: right">temp</th>
          <th style="text-align: right">previous_value</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: left">2022-01-01T08:00:00</td>
          <td style="text-align: left">Kitchen</td>
          <td style="text-align: right">21.0</td>
          <td style="text-align: right">0.0</td>
      </tr>
      <tr>
          <td style="text-align: left">2022-01-01T09:00:00</td>
          <td style="text-align: left">Kitchen</td>
          <td style="text-align: right">23.0</td>
          <td style="text-align: right">21.0</td>
      </tr>
      <tr>
          <td style="text-align: left">2022-01-01T10:00:00</td>
          <td style="text-align: left">Kitchen</td>
          <td style="text-align: right">22.7</td>
          <td style="text-align: right">23.0</td>
      </tr>
      <tr>
          <td style="text-align: left">2022-01-01T08:00:00</td>
          <td style="text-align: left">Living Room</td>
          <td style="text-align: right">21.1</td>
          <td style="text-align: right">0.0</td>
      </tr>
      <tr>
          <td style="text-align: left">2022-01-01T09:00:00</td>
          <td style="text-align: left">Living Room</td>
          <td style="text-align: right">21.4</td>
          <td style="text-align: right">21.1</td>
      </tr>
      <tr>
          <td style="text-align: left">2022-01-01T10:00:00</td>
          <td style="text-align: left">Living Room</td>
          <td style="text-align: right">21.8</td>
          <td style="text-align: right">21.4</td>
      </tr>
  </tbody>
</table>
</div>

  </div>
</div>





<div class="expand" id="calculate-the-difference-from-a-previous-value">
  <a class="expand-link" href="#calculate-the-difference-from-a-previous-value"><span class="cf-icon Link"></span></a>
  <p class="expand-label">
      <span class="expand-toggle"></span><span>Calculate the difference from a previous value</span>
  </p>
  <div class="expand-content" style="display: none;" >
      <p>Use <code>LAG</code> with arithmetic to calculate the difference between the current value and a previous value.
This is useful for detecting changes over time.</p>
<p>The following query calculates the temperature change from the previous reading:</p>


<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">SELECT</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="n">time</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="n">room</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="n">temp</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="n">temp</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">lag</span><span class="p">(</span><span class="n">temp</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="n">OVER</span><span class="w"> </span><span class="p">(</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">PARTITION</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">room</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">time</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="p">)</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">temp_change</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="k">FROM</span><span class="w"> </span><span class="n">home</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="k">WHERE</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="n">time</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="s1">&#39;2022-01-01T08:00:00Z&#39;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="k">AND</span><span class="w"> </span><span class="n">time</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="s1">&#39;2022-01-01T11:00:00Z&#39;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">room</span><span class="p">,</span><span class="w"> </span><span class="n">time</span></span></span></code></pre></div>
<table>
  <thead>
      <tr>
          <th style="text-align: left">time</th>
          <th style="text-align: left">room</th>
          <th style="text-align: right">temp</th>
          <th style="text-align: right">temp_change</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: left">2022-01-01T08:00:00</td>
          <td style="text-align: left">Kitchen</td>
          <td style="text-align: right">21.0</td>
          <td style="text-align: right">NULL</td>
      </tr>
      <tr>
          <td style="text-align: left">2022-01-01T09:00:00</td>
          <td style="text-align: left">Kitchen</td>
          <td style="text-align: right">23.0</td>
          <td style="text-align: right">2.0</td>
      </tr>
      <tr>
          <td style="text-align: left">2022-01-01T10:00:00</td>
          <td style="text-align: left">Kitchen</td>
          <td style="text-align: right">22.7</td>
          <td style="text-align: right">-0.3</td>
      </tr>
      <tr>
          <td style="text-align: left">2022-01-01T08:00:00</td>
          <td style="text-align: left">Living Room</td>
          <td style="text-align: right">21.1</td>
          <td style="text-align: right">NULL</td>
      </tr>
      <tr>
          <td style="text-align: left">2022-01-01T09:00:00</td>
          <td style="text-align: left">Living Room</td>
          <td style="text-align: right">21.4</td>
          <td style="text-align: right">0.3</td>
      </tr>
      <tr>
          <td style="text-align: left">2022-01-01T10:00:00</td>
          <td style="text-align: left">Living Room</td>
          <td style="text-align: right">21.8</td>
          <td style="text-align: right">0.4</td>
      </tr>
  </tbody>
</table>

  </div>
</div>





<div class="expand" id="calculate-the-difference-from-a-value-at-a-specific-time-offset">
  <a class="expand-link" href="#calculate-the-difference-from-a-value-at-a-specific-time-offset"><span class="cf-icon Link"></span></a>
  <p class="expand-label">
      <span class="expand-toggle"></span><span>Calculate the difference from a value at a specific time offset</span>
  </p>
  <div class="expand-content" style="display: none;" >
      <p>For regularly spaced data, use <code>LAG</code> with an offset to compare values from a specific time period ago.</p>
<p>The following query compares temperature values that are 1 hour apart (assuming hourly data):</p>


<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">SELECT</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="n">time</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="n">room</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="n">temp</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="n">lag</span><span class="p">(</span><span class="n">temp</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="n">OVER</span><span class="w"> </span><span class="p">(</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">PARTITION</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">room</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">time</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="p">)</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">temp_1h_ago</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="n">temp</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">lag</span><span class="p">(</span><span class="n">temp</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="n">OVER</span><span class="w"> </span><span class="p">(</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">PARTITION</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">room</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">time</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="p">)</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">hourly_change</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="k">FROM</span><span class="w"> </span><span class="n">home</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="k">WHERE</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="n">time</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="s1">&#39;2022-01-01T08:00:00Z&#39;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="k">AND</span><span class="w"> </span><span class="n">time</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="s1">&#39;2022-01-01T12:00:00Z&#39;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">room</span><span class="p">,</span><span class="w"> </span><span class="n">time</span></span></span></code></pre></div>

  </div>
</div>





<div class="expand" id="use-a-self-join-for-irregularly-spaced-data">
  <a class="expand-link" href="#use-a-self-join-for-irregularly-spaced-data"><span class="cf-icon Link"></span></a>
  <p class="expand-label">
      <span class="expand-toggle"></span><span>Use a self-join for irregularly spaced data</span>
  </p>
  <div class="expand-content" style="display: none;" >
      <p>For irregularly spaced time series data where you need to compare values from an exact time offset (like exactly 1 hour ago), use a self-join with interval arithmetic:</p>


<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">SELECT</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="k">current</span><span class="p">.</span><span class="n">time</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="k">current</span><span class="p">.</span><span class="n">room</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="k">current</span><span class="p">.</span><span class="n">temp</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">current_temp</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="n">previous</span><span class="p">.</span><span class="n">temp</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">temp_1h_ago</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="k">current</span><span class="p">.</span><span class="n">temp</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">previous</span><span class="p">.</span><span class="n">temp</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">hourly_diff</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="k">FROM</span><span class="w"> </span><span class="n">home</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="k">current</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="k">LEFT</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">home</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">previous</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="k">ON</span><span class="w"> </span><span class="k">current</span><span class="p">.</span><span class="n">room</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">previous</span><span class="p">.</span><span class="n">room</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="k">AND</span><span class="w"> </span><span class="n">previous</span><span class="p">.</span><span class="n">time</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">current</span><span class="p">.</span><span class="n">time</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="nb">INTERVAL</span><span class="w"> </span><span class="s1">&#39;1 hour&#39;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="k">WHERE</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="k">current</span><span class="p">.</span><span class="n">time</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="s1">&#39;2022-01-01T08:00:00Z&#39;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="k">AND</span><span class="w"> </span><span class="k">current</span><span class="p">.</span><span class="n">time</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="s1">&#39;2022-01-01T12:00:00Z&#39;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="k">current</span><span class="p">.</span><span class="n">room</span><span class="p">,</span><span class="w"> </span><span class="k">current</span><span class="p">.</span><span class="n">time</span></span></span></code></pre></div>
<p>This approach works when your data points don&rsquo;t fall at regular intervals, or when you need to compare against a specific time offset regardless of when the previous data point occurred.</p>

  </div>
</div>


</div>

<h3 id="last_value">last_value</h3>
<p>Returns the value from the last row of the window frame.</p>


<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="n">last_value</span><span class="p">(</span><span class="n">expression</span><span class="p">)</span></span></span></code></pre></div>
<h4 id="arguments-3">Arguments</h4>
<ul>
<li><strong>expression</strong>: Expression to operate on. Can be a constant, column, or
function, and any combination of arithmetic operators.</li>
</ul>
<h5 id="related-functions-2">Related functions</h5>
<p><a href="#first_value">first_value</a></p>
<div class="expand-wrapper">
  



<div class="expand" id="view-last_value-query-example">
  <a class="expand-link" href="#view-last_value-query-example"><span class="cf-icon Link"></span></a>
  <p class="expand-label">
      <span class="expand-toggle"></span><span>View <code>last_value</code> query example</span>
  </p>
  <div class="expand-content" style="display: none;" >
      <p>The following example uses the <a href="/influxdb3/pr-preview/reference/sample-data/#home-sensor-data">Home sensor sample data</a>.</p>
<div class="custom-timestamps">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">SELECT</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="n">time</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="n">room</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="n">temp</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="n">last_value</span><span class="p">(</span><span class="n">temp</span><span class="p">)</span><span class="w"> </span><span class="n">OVER</span><span class="w"> </span><span class="p">(</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">PARTITION</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">room</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">time</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">ROWS</span><span class="w"> </span><span class="k">BETWEEN</span><span class="w"> </span><span class="k">CURRENT</span><span class="w"> </span><span class="k">ROW</span><span class="w"> </span><span class="k">AND</span><span class="w"> </span><span class="n">UNBOUNDED</span><span class="w"> </span><span class="n">FOLLOWING</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="p">)</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">last_value</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="k">FROM</span><span class="w"> </span><span class="n">home</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="k">WHERE</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="n">time</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="s1">&#39;2022-01-01T08:00:00Z&#39;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="k">AND</span><span class="w"> </span><span class="n">time</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="s1">&#39;2022-01-01T11:00:00Z&#39;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">room</span><span class="p">,</span><span class="w"> </span><span class="n">time</span></span></span></code></pre></div>
<table>
  <thead>
      <tr>
          <th style="text-align: left">time</th>
          <th style="text-align: left">room</th>
          <th style="text-align: right">temp</th>
          <th style="text-align: right">last_value</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: left">2022-01-01T08:00:00</td>
          <td style="text-align: left">Kitchen</td>
          <td style="text-align: right">21.0</td>
          <td style="text-align: right">22.7</td>
      </tr>
      <tr>
          <td style="text-align: left">2022-01-01T09:00:00</td>
          <td style="text-align: left">Kitchen</td>
          <td style="text-align: right">23.0</td>
          <td style="text-align: right">22.7</td>
      </tr>
      <tr>
          <td style="text-align: left">2022-01-01T10:00:00</td>
          <td style="text-align: left">Kitchen</td>
          <td style="text-align: right">22.7</td>
          <td style="text-align: right">22.7</td>
      </tr>
      <tr>
          <td style="text-align: left">2022-01-01T08:00:00</td>
          <td style="text-align: left">Living Room</td>
          <td style="text-align: right">21.1</td>
          <td style="text-align: right">21.8</td>
      </tr>
      <tr>
          <td style="text-align: left">2022-01-01T09:00:00</td>
          <td style="text-align: left">Living Room</td>
          <td style="text-align: right">21.4</td>
          <td style="text-align: right">21.8</td>
      </tr>
      <tr>
          <td style="text-align: left">2022-01-01T10:00:00</td>
          <td style="text-align: left">Living Room</td>
          <td style="text-align: right">21.8</td>
          <td style="text-align: right">21.8</td>
      </tr>
  </tbody>
</table>
</div>

  </div>
</div>


</div>

<h3 id="lead">lead</h3>
<p>Returns the value from the row that is at the specified offset after the
current row in the partition. If the offset row is outside the partition,
the function returns the specified default.</p>


<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="n">lead</span><span class="p">(</span><span class="n">expression</span><span class="p">,</span><span class="w"> </span><span class="k">offset</span><span class="p">,</span><span class="w"> </span><span class="k">default</span><span class="p">)</span></span></span></code></pre></div>
<h4 id="arguments-4">Arguments</h4>
<ul>
<li><strong>expression</strong>: Expression to operate on.
Can be a constant, column, or function, and any combination of arithmetic or
string operators.</li>
<li><strong>offset</strong>: How many rows <em>before</em> the current row to retrieve the value of
<em>expression</em> from. Default is <code>1</code>.</li>
<li><strong>default</strong>: The default value to return if the offset is in the partition.
Must be of the same type as <em>expression</em>.</li>
</ul>
<h5 id="related-functions-3">Related functions</h5>
<p><a href="#lag">lag</a></p>
<div class="expand-wrapper">
  



<div class="expand" id="view-lead-query-example">
  <a class="expand-link" href="#view-lead-query-example"><span class="cf-icon Link"></span></a>
  <p class="expand-label">
      <span class="expand-toggle"></span><span>View <code>lead</code> query example</span>
  </p>
  <div class="expand-content" style="display: none;" >
      <p>The following example uses the <a href="/influxdb3/pr-preview/reference/sample-data/#home-sensor-data">Home sensor sample data</a>.</p>
<div class="custom-timestamps">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">SELECT</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="n">time</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="n">room</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="n">temp</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="n">lead</span><span class="p">(</span><span class="n">temp</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="n">OVER</span><span class="w"> </span><span class="p">(</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">PARTITION</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">room</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">time</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="p">)</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">next_value</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="k">FROM</span><span class="w"> </span><span class="n">home</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="k">WHERE</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="n">time</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="s1">&#39;2022-01-01T08:00:00Z&#39;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="k">AND</span><span class="w"> </span><span class="n">time</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="s1">&#39;2022-01-01T11:00:00Z&#39;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">room</span><span class="p">,</span><span class="w"> </span><span class="n">time</span></span></span></code></pre></div>
<table>
  <thead>
      <tr>
          <th style="text-align: left">time</th>
          <th style="text-align: left">room</th>
          <th style="text-align: right">temp</th>
          <th style="text-align: right">next_value</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: left">2022-01-01T08:00:00</td>
          <td style="text-align: left">Kitchen</td>
          <td style="text-align: right">21.0</td>
          <td style="text-align: right">23.0</td>
      </tr>
      <tr>
          <td style="text-align: left">2022-01-01T09:00:00</td>
          <td style="text-align: left">Kitchen</td>
          <td style="text-align: right">23.0</td>
          <td style="text-align: right">22.7</td>
      </tr>
      <tr>
          <td style="text-align: left">2022-01-01T10:00:00</td>
          <td style="text-align: left">Kitchen</td>
          <td style="text-align: right">22.7</td>
          <td style="text-align: right">0.0</td>
      </tr>
      <tr>
          <td style="text-align: left">2022-01-01T08:00:00</td>
          <td style="text-align: left">Living Room</td>
          <td style="text-align: right">21.1</td>
          <td style="text-align: right">21.4</td>
      </tr>
      <tr>
          <td style="text-align: left">2022-01-01T09:00:00</td>
          <td style="text-align: left">Living Room</td>
          <td style="text-align: right">21.4</td>
          <td style="text-align: right">21.8</td>
      </tr>
      <tr>
          <td style="text-align: left">2022-01-01T10:00:00</td>
          <td style="text-align: left">Living Room</td>
          <td style="text-align: right">21.8</td>
          <td style="text-align: right">0.0</td>
      </tr>
  </tbody>
</table>
</div>

  </div>
</div>


</div>

<h3 id="nth_value">nth_value</h3>
<p>Returns the value from the row that is the nth row of the window frame
(counting from 1). If the nth row doesn&rsquo;t exist, the function returns <em>null</em>.</p>


<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="n">nth_value</span><span class="p">(</span><span class="n">expression</span><span class="p">,</span><span class="w"> </span><span class="n">n</span><span class="p">)</span></span></span></code></pre></div>
<h4 id="arguments-5">Arguments</h4>
<ul>
<li><strong>expression</strong>: The expression to operator on.
Can be a constant, column, or function, and any combination of arithmetic or
string operators.</li>
<li><strong>n</strong>: Specifies the row number in the current frame and partition to reference.</li>
</ul>
<div class="expand-wrapper">
  



<div class="expand" id="view-lead-query-example">
  <a class="expand-link" href="#view-lead-query-example"><span class="cf-icon Link"></span></a>
  <p class="expand-label">
      <span class="expand-toggle"></span><span>View <code>lead</code> query example</span>
  </p>
  <div class="expand-content" style="display: none;" >
      <p>The following example uses the <a href="/influxdb3/pr-preview/reference/sample-data/#home-sensor-data">Home sensor sample data</a>.</p>
<div class="custom-timestamps">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">SELECT</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="n">time</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="n">room</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="n">temp</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="n">nth_value</span><span class="p">(</span><span class="n">temp</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="n">OVER</span><span class="w"> </span><span class="p">(</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">PARTITION</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">room</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="p">)</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">second_temp</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="k">FROM</span><span class="w"> </span><span class="n">home</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="k">WHERE</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="n">time</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="s1">&#39;2025-02-10T08:00:00Z&#39;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="k">AND</span><span class="w"> </span><span class="n">time</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="s1">&#39;2025-02-10T11:00:00Z&#39;</span></span></span></code></pre></div>
<table>
  <thead>
      <tr>
          <th style="text-align: left">time</th>
          <th style="text-align: left">room</th>
          <th style="text-align: right">temp</th>
          <th style="text-align: right">second_temp</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: left">2025-02-10T08:00:00</td>
          <td style="text-align: left">Kitchen</td>
          <td style="text-align: right">21.0</td>
          <td style="text-align: right">22.7</td>
      </tr>
      <tr>
          <td style="text-align: left">2025-02-10T10:00:00</td>
          <td style="text-align: left">Kitchen</td>
          <td style="text-align: right">22.7</td>
          <td style="text-align: right">22.7</td>
      </tr>
      <tr>
          <td style="text-align: left">2025-02-10T09:00:00</td>
          <td style="text-align: left">Kitchen</td>
          <td style="text-align: right">23.0</td>
          <td style="text-align: right">22.7</td>
      </tr>
      <tr>
          <td style="text-align: left">2025-02-10T08:00:00</td>
          <td style="text-align: left">Living Room</td>
          <td style="text-align: right">21.1</td>
          <td style="text-align: right">21.8</td>
      </tr>
      <tr>
          <td style="text-align: left">2025-02-10T10:00:00</td>
          <td style="text-align: left">Living Room</td>
          <td style="text-align: right">21.8</td>
          <td style="text-align: right">21.8</td>
      </tr>
      <tr>
          <td style="text-align: left">2025-02-10T09:00:00</td>
          <td style="text-align: left">Living Room</td>
          <td style="text-align: right">21.4</td>
          <td style="text-align: right">21.8</td>
      </tr>
  </tbody>
</table>
</div>

  </div>
</div>


</div>




    

    
    


    





    








  
  
    
  









<hr/>
<div class="helpful">
  <p>Was this page helpful?</p>
  <form onSubmit="return submitFeedbackForm('pagefeedback')" id="pagefeedback">
    <input type="text" name="fname" class="bowlofsweets" placeholder="First Name">
    <label class="radio-btns" id="helpful"><input  type="radio" name="helpful" value=true />Yes</label>
    <label class="radio-btns" id="not-helpful"><input  type="radio" name="helpful" value=false />No</label>
  </form>
  <div id="thank-you">
    <p>Thank you for your feedback!</p>
  </div>
  <div class="loader-wrapper">
    <div class="loader"></div>
  </div>
</div>
<hr/>
<div class="feedback block">
  <div class="support">
    <h4 id="bug-reports-and-feedback">Support and feedback</h4>
    <p>
      Thank you for being part of our community!
      We welcome and encourage your feedback and bug reports for  and this documentation.
      To find support, use the following resources:
    </p>
    <ul>
      
        <li><a class="slack" href="https://influxdata.com/slack" target="_blank"><strong>InfluxDB Community Slack</strong>  <em style="opacity:.5">(Preferred)</em></a></li>
        <li><a class="discord" href="https://discord.gg/9zaNCW2PRT" target="_blank">InfluxDB Discord Server</a></li>
      
      <li><a class="community" href="https://community.influxdata.com/" target="_blank">InfluxData Community</a></li>
      <li><a class="reddit" href="https://reddit.com/r/influxdb" target="_blank">InfluxDB Subreddit</a></li>
    </ul>
    
      <p><strong>Customers with an annual or support contract</strong> can <a href="https://support.influxdata.com/">contact InfluxData Support</a>.
         

    
  </div>
  <div class="actions">
    <a href="https://github.com/influxdata/docs-v2/edit/master/content/shared/sql-reference/functions/window.md" class="btn edit" target="_blank">Edit this page</a>
    <a href="https://github.com/influxdata/docs-v2/issues/new?body=_Describe%20the%20issue%20here._%0a%0a%23%23%23%23%23%20Relevant%20URLs%0a-%20https://influxdata.github.io/docs-v2/pr-preview/pr-6858/influxdb3/core/reference/sql/functions/window/%0a-%20_Provide%20other%20relevant%20URLs%20%28project%20issues,%20community%20threads,%20etc.%29_%0a" class="btn issue" target="_blank">Submit docs issue</a>
    <a href="https://github.com/influxdata/docs-v2/issues/new/choose/" class="btn issue" target="_blank">Submit  issue</a>
  </div>
</div>



  </article>
</div>

    <div class="copyright"> 2026 InfluxData, Inc.</div>
  </div>
</div>





  
  
<div class="modal">
  <div class="modal-overlay"></div>
  <div class="modal-wrapper">
    <div class="modal-body">
      <a id="modal-close"href="#"><span class="icon-remove"></span></a>
      
      















  




  













<div class="modal-content" id="influxdb-url-list">
  <h3>What is your InfluxDB 3 Core URL?</h3>
  <p>Customize your <strong>InfluxDB 3 Core URL</strong> and we&rsquo;ll update code examples for you.</p>
  <div class="products">
    
      <ul id="pref-tabs">
        <li class="pref-tab active" id="pref-cloud"><span class="ephemeral">InfluxDB </span>Cloud</li>
        <li class="pref-tab" id="pref-oss"><span class="ephemeral">InfluxDB </span>OSS or <span class="abbr">Ent</span><span class="ephemeral">erprise</span></li>
      </ul>
      
  
  
  
  
  <div class="product active" id="cloud-urls">
    <div class="providers">
      
      
        <div class="provider">
          
            <h5>AWS</h5>
            <ul>
            
            
              <li class="region-group">
                
                  <p class="region">
                    <span class="fake-radio"></span>
                    US West (Oregon)
                  </p>
                  <ul class="clusters">
                  
                    <li>
                      <label for="us-west-2-1" >
                      <input type="radio" name="influxdb-cloud-url" id="us-west-2-1" value="https://us-west-2-1.aws.cloud2.influxdata.com" checked>
                      <span class="radio"></span>
                      us-west-2-1
                    </label>
                    </li>
                  
                    <li>
                      <label for="us-west-2-2" >
                      <input type="radio" name="influxdb-cloud-url" id="us-west-2-2" value="https://us-west-2-2.aws.cloud2.influxdata.com" checked>
                      <span class="radio"></span>
                      us-west-2-2
                    </label>
                    </li>
                  
                  </ul>
                
              </li>
            
              <li class="region-group">
                
                  <label for="us-east-virginia" >
                    <input type="radio" name="influxdb-cloud-url" id="us-east-virginia" value="https://us-east-1-1.aws.cloud2.influxdata.com" checked>
                    <span class="radio"></span>
                    US East (Virginia)
                  </label>
                
              </li>
            
              <li class="region-group">
                
                  <label for="eu-frankfurt" >
                    <input type="radio" name="influxdb-cloud-url" id="eu-frankfurt" value="https://eu-central-1-1.aws.cloud2.influxdata.com" checked>
                    <span class="radio"></span>
                    EU Frankfurt
                  </label>
                
              </li>
            
          
          </ul>
        </div>
      
        <div class="provider">
          
            <h5>GCP</h5>
            <ul>
            
            
              <li class="region-group">
                
                  <label for="us-central-iowa" >
                    <input type="radio" name="influxdb-cloud-url" id="us-central-iowa" value="https://us-central1-1.gcp.cloud2.influxdata.com" checked>
                    <span class="radio"></span>
                    US Central (Iowa)
                  </label>
                
              </li>
            
          
          </ul>
        </div>
      
        <div class="provider">
          
            <h5>Azure</h5>
            <ul>
            
            
              <li class="region-group">
                
                  <label for="west-europe-amsterdam" >
                    <input type="radio" name="influxdb-cloud-url" id="west-europe-amsterdam" value="https://westeurope-1.azure.cloud2.influxdata.com" checked>
                    <span class="radio"></span>
                    West Europe (Amsterdam)
                  </label>
                
              </li>
            
              <li class="region-group">
                
                  <label for="east-us-virginia" >
                    <input type="radio" name="influxdb-cloud-url" id="east-us-virginia" value="https://eastus-1.azure.cloud2.influxdata.com" checked>
                    <span class="radio"></span>
                    East US (Virginia)
                  </label>
                
              </li>
            
          
          </ul>
        </div>
      
    </div>
  </div>

      
  
  
  
  
  <div class="product inactive" id="oss-urls">
    <div class="providers">
      
      
        <div class="provider">
          
            <h5>Default</h5>
            <ul>
            
            
              <li class="region-group">
                
                  <label for="localhost8086" >
                    <input type="radio" name="influxdb-oss-url" id="localhost8086" value="http://localhost:8086" checked>
                    <span class="radio"></span>
                    localhost:8086
                  </label>
                
              </li>
            
          
          </ul>
        </div>
      
        <div class="provider">
          
            <h5>Custom</h5>
            <ul>
              <li class="custom">
                <label for="custom">
                  <input type="radio" name="influxdb-oss-url" id="custom" value="http://example.com:8080" checked>
                  <span class="radio"></span>
                </label>
                <form action="#" id="custom-url" data-message="">
                  <input type="text" name="custom-url-field" id="custom-url-field" placeholder="http://example.com:8080">
                </form>
              </li>
            </ul>
          
          </ul>
        </div>
      
    </div>
  </div>

    
  </div>
  <p class="note">For more information, see <a href="/influxdb/cloud/reference/regions/">InfluxDB Cloud regions</a> or <a href="/influxdb/v2/reference/urls/">InfluxDB OSS URLs</a>.</p>
</div>


      




  

  
    
    
    
      
    
    
    
      
    
    
    
  

  

  
    
    
    
      
    
    
      
    
    
      
    
    
      
    
    
  

  
    
    
    
      
    
    
      
    
    
      
    
    
    
  

  
    
    
    
      
    
    
      
    
    
      
    
    
    
  

  
    
    
    
      
    
    
      
    
    
      
    
    
    
  

  
    
    
    
      
    
    
      
    
    
      
    
    
    
  

  
    
    
    
      
    
    
      
    
    
      
    
    
    
  

  

  
    
    
    
      
    
    
      
    
    
      
    
    
    
  

  
    
    
    
      
    
    
      
    
    
      
    
    
    
  

  

  

  


<div class="modal-content" id="influxdb-version-detector">
  <div data-component="influxdb-version-detector"
       data-products='{&#34;enterprise_influxdb&#34;:{&#34;ai_source_group_ids&#34;:&#34;d809f67b-867d-4f17-95f0-c33dbadbf15f&#34;,&#34;characteristics&#34;:[&#34;Paid&#34;,&#34;Self-hosted&#34;,&#34;InfluxQL/Flux&#34;,&#34;Username/Password&#34;,&#34;Databases&#34;],&#34;detection&#34;:{&#34;ping_headers&#34;:{&#34;x-influxdb-build&#34;:&#34;Enterprise&#34;}},&#34;name&#34;:&#34;InfluxDB Enterprise v1&#34;,&#34;query_languages&#34;:{&#34;Flux&#34;:{&#34;optional_params&#34;:[],&#34;required_params&#34;:[&#34;URL&#34;,&#34;User&#34;,&#34;Password&#34;,&#34;Default database&#34;]},&#34;InfluxQL&#34;:{&#34;optional_params&#34;:[],&#34;required_params&#34;:[&#34;URL&#34;,&#34;Database&#34;,&#34;User&#34;,&#34;Password&#34;]}}},&#34;influxdb&#34;:{&#34;ai_source_group_ids&#34;:&#34;3e905caa-dd6f-464b-abf9-c3880e09f128&#34;,&#34;ai_source_group_ids__v1&#34;:&#34;d809f67b-867d-4f17-95f0-c33dbadbf15f&#34;,&#34;characteristics&#34;:[&#34;Free&#34;,&#34;Self-hosted&#34;,&#34;InfluxQL/Flux&#34;,&#34;Token or Username/Password&#34;,&#34;Buckets&#34;],&#34;detection&#34;:{&#34;ping_headers&#34;:{&#34;x-influxdb-build&#34;:&#34;OSS&#34;,&#34;x-influxdb-version&#34;:&#34;^(1|2)\\.&#34;},&#34;url_contains&#34;:[&#34;localhost:8086&#34;]},&#34;name&#34;:&#34;InfluxDB&#34;,&#34;placeholder_host&#34;:&#34;localhost:8086&#34;,&#34;query_languages&#34;:{&#34;Flux&#34;:{&#34;optional_params&#34;:[],&#34;required_params&#34;:[&#34;URL&#34;,&#34;Token&#34;,&#34;Default bucket&#34;]},&#34;InfluxQL&#34;:{&#34;optional_params&#34;:[],&#34;required_params&#34;:[&#34;URL&#34;,&#34;Database&#34;,&#34;Auth Type (Basic or Token)&#34;]}}},&#34;influxdb3_cloud_dedicated&#34;:{&#34;ai_source_group_ids&#34;:&#34;b650cf0b-4b52-42e8-bde7-a02738f27262&#34;,&#34;characteristics&#34;:[&#34;Paid&#34;,&#34;Cloud&#34;,&#34;SQL/InfluxQL&#34;,&#34;Token&#34;,&#34;Databases&#34;],&#34;detection&#34;:{&#34;url_contains&#34;:[&#34;influxdb.io&#34;]},&#34;name&#34;:&#34;InfluxDB Cloud Dedicated&#34;,&#34;placeholder_host&#34;:&#34;cluster-id.a.influxdb.io&#34;,&#34;query_languages&#34;:{&#34;InfluxQL&#34;:{&#34;optional_params&#34;:[],&#34;required_params&#34;:[&#34;Host&#34;,&#34;Database&#34;,&#34;Token&#34;]},&#34;SQL&#34;:{&#34;optional_params&#34;:[],&#34;required_params&#34;:[&#34;Host&#34;,&#34;Database&#34;,&#34;Token&#34;]}}},&#34;influxdb3_cloud_serverless&#34;:{&#34;ai_source_group_ids&#34;:&#34;b650cf0b-4b52-42e8-bde7-a02738f27262&#34;,&#34;characteristics&#34;:[&#34;Paid/Free&#34;,&#34;Cloud&#34;,&#34;All languages&#34;,&#34;Token&#34;,&#34;Buckets&#34;],&#34;detection&#34;:{&#34;url_contains&#34;:[&#34;us-east-1-1.aws.cloud2.influxdata.com&#34;,&#34;eu-central-1-1.aws.cloud2.influxdata.com&#34;]},&#34;name&#34;:&#34;InfluxDB Cloud Serverless&#34;,&#34;placeholder_host&#34;:&#34;cloud2.influxdata.com&#34;,&#34;query_languages&#34;:{&#34;Flux&#34;:{&#34;optional_params&#34;:[],&#34;required_params&#34;:[&#34;Host&#34;,&#34;Organization&#34;,&#34;Token&#34;,&#34;Default bucket&#34;]},&#34;InfluxQL&#34;:{&#34;optional_params&#34;:[],&#34;required_params&#34;:[&#34;Host&#34;,&#34;Bucket&#34;,&#34;Token&#34;]},&#34;SQL&#34;:{&#34;optional_params&#34;:[],&#34;required_params&#34;:[&#34;Host&#34;,&#34;Bucket&#34;,&#34;Token&#34;]}}},&#34;influxdb3_clustered&#34;:{&#34;ai_source_group_ids&#34;:&#34;b650cf0b-4b52-42e8-bde7-a02738f27262&#34;,&#34;characteristics&#34;:[&#34;Paid&#34;,&#34;Self-hosted&#34;,&#34;SQL/InfluxQL&#34;,&#34;Token&#34;,&#34;Databases&#34;],&#34;detection&#34;:{&#34;ping_headers&#34;:{&#34;x-influxdb-version&#34;:&#34;influxqlbridged-development&#34;}},&#34;name&#34;:&#34;InfluxDB Clustered&#34;,&#34;placeholder_host&#34;:&#34;cluster-host.com&#34;,&#34;query_languages&#34;:{&#34;InfluxQL&#34;:{&#34;optional_params&#34;:[],&#34;required_params&#34;:[&#34;URL&#34;,&#34;Database&#34;,&#34;Token&#34;]},&#34;SQL&#34;:{&#34;optional_params&#34;:[],&#34;required_params&#34;:[&#34;Host&#34;,&#34;Database&#34;,&#34;Token&#34;]}}},&#34;influxdb3_core&#34;:{&#34;ai_source_group_ids&#34;:&#34;b650cf0b-4b52-42e8-bde7-a02738f27262&#34;,&#34;characteristics&#34;:[&#34;Free&#34;,&#34;Self-hosted&#34;,&#34;SQL/InfluxQL&#34;,&#34;No auth required&#34;,&#34;Databases&#34;],&#34;detection&#34;:{&#34;ping_headers&#34;:{&#34;x-influxdb-build&#34;:&#34;Core&#34;,&#34;x-influxdb-version&#34;:&#34;^3\\.&#34;},&#34;url_contains&#34;:[&#34;localhost:8181&#34;]},&#34;name&#34;:&#34;InfluxDB 3 Core&#34;,&#34;placeholder_host&#34;:&#34;localhost:8181&#34;,&#34;query_languages&#34;:{&#34;InfluxQL&#34;:{&#34;optional_params&#34;:[],&#34;required_params&#34;:[&#34;Host&#34;,&#34;Database&#34;]},&#34;SQL&#34;:{&#34;optional_params&#34;:[],&#34;required_params&#34;:[&#34;Host&#34;,&#34;Database&#34;]}}},&#34;influxdb3_enterprise&#34;:{&#34;ai_source_group_ids&#34;:&#34;b650cf0b-4b52-42e8-bde7-a02738f27262&#34;,&#34;characteristics&#34;:[&#34;Paid&#34;,&#34;Self-hosted&#34;,&#34;SQL/InfluxQL&#34;,&#34;Token&#34;,&#34;Databases&#34;],&#34;detection&#34;:{&#34;ping_headers&#34;:{&#34;x-influxdb-build&#34;:&#34;Enterprise&#34;,&#34;x-influxdb-version&#34;:&#34;^3\\.&#34;},&#34;url_contains&#34;:[&#34;localhost:8181&#34;]},&#34;name&#34;:&#34;InfluxDB 3 Enterprise&#34;,&#34;placeholder_host&#34;:&#34;localhost:8181&#34;,&#34;query_languages&#34;:{&#34;InfluxQL&#34;:{&#34;optional_params&#34;:[],&#34;required_params&#34;:[&#34;Host&#34;,&#34;Database&#34;,&#34;Token&#34;]},&#34;SQL&#34;:{&#34;optional_params&#34;:[],&#34;required_params&#34;:[&#34;Host&#34;,&#34;Database&#34;,&#34;Token&#34;]}}},&#34;influxdb_cloud&#34;:{&#34;ai_source_group_ids&#34;:&#34;3e905caa-dd6f-464b-abf9-c3880e09f128&#34;,&#34;characteristics&#34;:[&#34;Paid/Free&#34;,&#34;Cloud&#34;,&#34;InfluxQL/Flux&#34;,&#34;Token&#34;,&#34;Databases/Buckets&#34;],&#34;detection&#34;:{&#34;url_contains&#34;:[&#34;us-west-2-1.aws.cloud2.influxdata.com&#34;,&#34;us-west-2-2.aws.cloud2.influxdata.com&#34;,&#34;us-east-1-1.aws.cloud2.influxdata.com&#34;,&#34;eu-central-1-1.aws.cloud2.influxdata.com&#34;,&#34;us-central1-1.gcp.cloud2.influxdata.com&#34;,&#34;westeurope-1.azure.cloud2.influxdata.com&#34;,&#34;eastus-1.azure.cloud2.influxdata.com&#34;]},&#34;name&#34;:&#34;InfluxDB Cloud (TSM)&#34;,&#34;placeholder_host&#34;:&#34;cloud2.influxdata.com&#34;,&#34;query_languages&#34;:{&#34;Flux&#34;:{&#34;optional_params&#34;:[],&#34;required_params&#34;:[&#34;URL&#34;,&#34;Organization&#34;,&#34;Token&#34;,&#34;Default bucket&#34;]},&#34;InfluxQL&#34;:{&#34;optional_params&#34;:[],&#34;required_params&#34;:[&#34;URL&#34;,&#34;Database&#34;,&#34;Token&#34;]}}},&#34;influxdb_cloud1&#34;:{&#34;ai_source_group_ids&#34;:&#34;d809f67b-867d-4f17-95f0-c33dbadbf15f&#34;,&#34;characteristics&#34;:[&#34;Paid&#34;,&#34;Cloud&#34;,&#34;InfluxQL&#34;,&#34;Username/Password&#34;,&#34;Databases&#34;],&#34;detection&#34;:{&#34;url_contains&#34;:[&#34;cloud.influxdata.com&#34;]},&#34;name&#34;:&#34;InfluxDB Cloud 1&#34;,&#34;placeholder_host&#34;:&#34;cloud.influxdata.com&#34;,&#34;query_languages&#34;:{&#34;InfluxQL&#34;:{&#34;optional_params&#34;:[],&#34;required_params&#34;:[&#34;URL&#34;,&#34;Database&#34;,&#34;User&#34;,&#34;Password&#34;]}}}}'
       data-influxdb-urls='#ZgotmplZ'></div>
</div>

      <div class="modal-content" id="page-feedback">
  <h3>Thank you for your feedback!</h3>
  <p>Let us know what we can do better:</p>
  
  <form id="pagefeedbacktext">
    <input type="text" name="fname" class="bowlofsweets" placeholder="First Name">
    <div class="lifecycle-wrapper">
      <textarea name="feedback-text"  placeholder="Missing information? Unclear explanations? Help us improve this page!"></textarea>
      <div id="thank-you">
        <p>Thank you!</p>
      </div>
      <div class="loader-wrapper">
        <div class="loader"></div>
      </div>
    </div>
    <div class="form-buttons">
      <div id="no-thanks">
        No thanks
      </div>
      <div class="submit-wrapper">
        <input type="submit" value="Submit" onclick="return submitLifeCycleAndClose();">
      </div>
    </div>
  </form>
 
</div>

      
        




<div class="modal-content" id="influxdb-gs-date-select">
  <h3>Select a new date</h3>
  <p><em>Select a date in your bucket's retention period.</em></p>
  <div id="custom-date-selector"></div>
  <a class="btn" id="submit-custom-date" onclick="">Update</a>
</div>
      
      
    </div>
  </div>
</div>
  













  <div class="fullscreen-code highlight">
  <div id="fullscreen-code-placeholder"></div>
  <a class="fullscreen-close"><span class="icon-x"></span></a>
</div>


  
  









<div 
  data-component="doc-search"
  data-api-key="501434b53a46a92a7931aecc7c9672e2"
  data-app-id="WHM9UWMP6M"
  data-index-name="influxdata"
  data-input-selector="#algolia-search-input"
  data-search-tag="docs-v2-pr-preview"
  data-include-flux="false"
  data-include-resources="true"
  data-debug="true"
></div>


  
  <div id="docs-notifications">
  
    <div class="notification note min" id="influxdb3.8-explorer-1.6" data-scope='/' data-exclude=''>
      <div class="close-notification"><span class="cf-icon Remove_New"></span></div> 
      <div class="notification-title">
        
        <h3>New in InfluxDB 3.8</h3>
      </div>
      
      <div class="notification-slug">
        <p>Key enhancements in InfluxDB 3.8 and the InfluxDB 3 Explorer 1.6.</p>
<p><a class="btn" href="https://www.influxdata.com/blog/influxdb-3-8/">See the Blog Post</a></p>

      </div>
      
      
      <div class="notification-content">
        <p>InfluxDB 3.8 is now available for both Core and Enterprise, alongside the
1.6 release of the InfluxDB 3 Explorer UI. This release is focused on
operational maturity and making InfluxDB easier to deploy, manage, and run
reliably in production.</p>
<p>For more information, check out:</p>
<ul>
<li><a href="https://www.influxdata.com/blog/influxdb-3-8/">See the announcement blog post</a></li>
<li><a href="/influxdb3/core/release-notes/">InfluxDB 3 Core release notes</a></li>
<li><a href="/influxdb3/enterprise/release-notes/">InfluxDB 3 Enterprise release notes</a></li>
</ul>

      </div>
      <span class="show"></span>
           
    </div>
  
    <div class="notification warn min" id="influxdb-docker-latest-tag-apr" data-scope='/' data-exclude='/telegraf/,/platform/,/kapacitor/,/chronograf/,/enterprise_influxdb/,/influxdb3/explorer/,/influxdb3/cloud,/influxdb/cloud'>
      <div class="close-notification"><span class="cf-icon Remove_New"></span></div> 
      <div class="notification-title">
        
        <h3>InfluxDB Docker latest tag changing to InfluxDB 3 Core</h3>
      </div>
      
      <div class="notification-slug">
        On <strong>April 7, 2026</strong>, the <code>latest</code> tag for InfluxDB Docker images will
point to InfluxDB 3 Core. To avoid unexpected upgrades, use specific version
tags in your Docker deployments.
      </div>
      
      
      <div class="notification-content">
        <p>If using Docker to install and run InfluxDB, the <code>latest</code> tag will point to
InfluxDB 3 Core. To avoid unexpected upgrades, use specific version tags in
your Docker deployments. For example, if using Docker to run InfluxDB v2,
replace the <code>latest</code> version tag with a specific version tag in your Docker
pull command&ndash;for example:</p>


<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">docker pull influxdb:2</span></span></code></pre></div>
      </div>
      <span class="show"></span>
           
    </div>
  
</div>



  
  <div class="footer-widgets">
  
  
<div data-component="custom-time-trigger" class="custom-time-trigger widget blue" data-tooltip="Select custom date for sample data">
  <a role="button" class="custom-time-trigger__button" data-action="open">
    <span class="cf-icon Clock_New"></span>
  </a>
</div>

  
  <div class="ask-ai-trigger widget magenta" data-component="ask-ai-trigger" data-tooltip="Ask InfluxData AI for help" style="display: none;">
  <a class="ask-ai-open" >
    <div class="icon-influx-logo"></div>
    Ask AI
  </a>
</div>
</div>

  
  

  </body>
  
<script type="text/javascript">
  cloudUrls = ["https:\/\/us-west-2-1.aws.cloud2.influxdata.com", "https:\/\/us-east-1-1.aws.cloud2.influxdata.com", "https:\/\/eu-central-1-1.aws.cloud2.influxdata.com", "https:\/\/us-central1-1.gcp.cloud2.influxdata.com", "https:\/\/westeurope-1.azure.cloud2.influxdata.com", "https:\/\/eastus-1.azure.cloud2.influxdata.com", ]
</script>

</html>

