



<!doctype html>
<html lang="en">
  <head>
    

<script async src="https://www.googletagmanager.com/gtag/js?id=G-CNWQ54SDD8"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-CNWQ54SDD8', {
    'send_page_view': true,
    'transport_type': 'beacon'
  });
</script>


    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

    








  
    
  




  
  
  





<title>Optimize writes to InfluxDB | &lt;nil&gt; Documentation</title>


    <meta name="description" content="Tips and examples to optimize performance and system overhead when writing data to InfluxDB Cloud Dedicated.">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link rel="shortcut icon" href="/img/favicon.png" type="image/png" sizes="32x32">

    






    
  
    
  
    
  
    
  
    
  
    
  







  








  
  
    
      <script type="module" src="/docs-v2/pr-preview/pr-6599/js/main.js"></script>
    
  

    










<link rel="canonical" href="https://influxdata.github.io/docs-v2/pr-preview/pr-6599/docs-v2/pr-preview/pr-6599/influxdb3/cloud-dedicated/write-data/best-practices/optimize-writes/" />

    
<style>
  body {
    visibility: hidden;
  }
</style>


<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css"/>









<link rel="stylesheet" title="light-theme" type="text/css" href="/docs-v2/pr-preview/pr-6599/light-theme.8d5433f1b1d5c0b801a1f0e47e57e6de0bbdb1a3be335988a8db0424be68b7df.css">


<link rel="alternate stylesheet" title="dark-theme" type="text/css" href="/docs-v2/pr-preview/pr-6599/dark-theme.153183ad3915586035a473fc442de137ec8ba307b7f7d87160f893857e6bf11d.css">


<link rel="stylesheet" title="sidebar-open" type="text/css" href="/docs-v2/pr-preview/pr-6599/dark-theme.56ede7c71d3385876a1c762e207372a1699e829612d789f952885f820d50394a.css">


<link rel="alternate stylesheet" title="sidebar-closed" type="text/css" href="/docs-v2/pr-preview/pr-6599/light-theme.b9796198db2f4e595588f9612cc06faa5b6f61322119b20af095d82a792468f7.css">


<link rel="stylesheet" type="text/css" href="/docs-v2/pr-preview/pr-6599/api.css">

    <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:ital,wght@0,500;0,700;1,500;1,700&family=Rubik:ital,wght@0,400;0,500;0,700;1,400;1,500;1,700&display=swap" rel="stylesheet">
    








  
  
    <meta name="docsearch:searchTag" content="docs-v2-pr-preview">
  





    





<meta name="latest" content="false">
<meta name="last-modified" content="2025-12-12 18:02:14 -0500 -0500">
    
<script type="text/javascript">
(function() {
  var didInit = false;
  function initMunchkin() {
    if(didInit === false) {
      didInit = true;
      Munchkin.init('972-GDU-533');
    }
  }
  var s = document.createElement('script');
  s.type = 'text/javascript';
  s.async = true;
  s.src = '//munchkin.marketo.net/munchkin.js';
  s.onreadystatechange = function() {
    if (this.readyState == 'complete' || this.readyState == 'loaded') {
      initMunchkin();
    }
  };
  s.onload = initMunchkin;
  document.getElementsByTagName('head')[0].appendChild(s);
})();
</script>


<img referrerpolicy="no-referrer-when-downgrade" src="https://static.scarf.sh/a.png?x-pxid=5581ee6b-3e7c-42b8-a507-38ea055c35ca"/>



    <meta name="Copyright" content="InfluxData Inc." />
  </head>
  <body class='docs-v2' data-component="theme" data-theme-callback="setVisibility">
    
<noscript>
  <iframe src="https://www.googletagmanager.com/ns.html?id=GTM-WXRH9C" height="0" width="0" style="display:none;visibility:hidden"></iframe>
</noscript>







<div class="topnav">
  <div class="topnav-left">
    <a class="influx-home" href="https://www.influxdata.com" title="InfluxData"><span
        class="icon-influx-logo"></span><span class="icon-influx-logotype"></span></a>
    <span class="divider"></span>
    <a class="docs-home" href="/"><span class=short>Doc</span><span class="long">umentation</span></a>
  </div>
  <div class="topnav-right">
    <div class="selector-dropdowns">
      





























<div class="product-list" data-component="product-selector">
  <div id="product-dropdown">
    <p class="selected">Select product</p>
  </div>
  <div id="dropdown-items">
    <div class="product-group">
      <div class="group-title"><p>InfluxDB 3</p></div>
      <ul class="item-list products" data-category="Self-managed">
        <li>
  
  
  
  
  
  
  
  <a href='/influxdb3/core/' >InfluxDB 3 Core <span class="state">New</span></a>
</li>
        <li>
  
  
  
  
  
  
  
  <a href='/influxdb3/enterprise/' >InfluxDB 3 Enterprise <span class="state">New</span></a>
</li>
        <li>
  
  
  
  
  
  
  
  <a href='/influxdb3/clustered/' >InfluxDB Clustered</a>
</li>
      </ul>
      <ul class="item-list products" data-category="Fully-Managed">
        <li>
  
  
  
  
  
  
  
  <a href='/influxdb3/cloud-serverless/' >InfluxDB Cloud Serverless</a>
</li>
        <li>
  
  
  
  
  
  
  
  <a href='/influxdb3/cloud-dedicated/' class="active">InfluxDB Cloud Dedicated</a>
</li>
      </ul>
      <ul class="item-list products" data-category="Tools">
        <li>
  
  
  
  
  
  
  
  <a href='/influxdb3/explorer/' >InfluxDB 3 Explorer <span class="state">New</span></a>
</li>
      </ul>
    </div>
    <div class="product-group">
      <div class="group-title"><p>InfluxDB 2</p></div>
      <ul class="item-list products">
        <li>
  
  
  
  
  
  
  
  <a href='/influxdb/v2/' >InfluxDB OSS v2</a>
</li>
        <li>
  
  
  
  
  
  
  
  <a href='/influxdb/cloud/' >InfluxDB Cloud (TSM)</a>
</li>
        <li>
  
  
  
  
  
  
  
  <a href='/flux/v0/' >Flux</a>
</li>
      </ul>
    </div>
    <div class="product-group">
      <div class="group-title"><p>InfluxDB 1</p></div>
      <ul class="item-list products">
        <li>
  
  
  
  
  
  
  
  <a href='/influxdb/v1/' >InfluxDB OSS v1</a>
</li>
        <li>
  
  
  
  
  
  
  
  <a href='/enterprise_influxdb/v1/' >InfluxDB Enterprise</a>
</li>
      </ul>
    </div>
    <div class="product-group">
      <div class="group-title"><p>Other products</p></div>
      <ul class="item-list products">
        <li>
  
  
  
  
  
  
  
  <a href='/telegraf/v1/' >Telegraf</a>
</li>
        <li>
  
  
  
  
  
  
  
  <a href='/chronograf/v1/' >Chronograf</a>
</li>
        <li>
  
  
  
  
  
  
  
  <a href='/kapacitor/v1/' >Kapacitor</a>
</li>
      </ul>
    </div>
  </div>
</div>


    </div>
    <div class="buttons">
      <div class="search-btn" data-component="search-button">
        <button id="search-btn" data-action="toggle"><span class="cf-icon Search_New"></span></button>
      </div>
      <button class="url-trigger" href="#"><span class="cf-icon CogSolid_New"></span></button>
      <span data-component="theme-switch">
        <button class="theme-switch theme-switch-light">
          <span class="cf-icon Lightmode_New"></span></button>
        <button class="theme-switch theme-switch-dark">
          <span class="cf-icon Darkmode_New"></span></button>
      </span>
    </div>
  </div>
</div>

<div class="page-wrapper">
  








  











  




<aside class="sidebar">
  <div class="sidebar-toggle" data-component="sidebar-toggle" data-state="closed" ><a data-action="toggle" href="#"><span
      class="cf-icon SidebarClose"></span></a></div>
  <div class="search-and-nav-toggle">
    <div class="sidebar--search" data-component="sidebar-search">
      <input  class="sidebar--search-field"
              id="algolia-search-input"
              type="text"
              accesskey="s"
              autocomplete="off"
              autocorrect="off"
              autocapitalize="off"
              spellcheck="false"
              dir="auto"
              placeholder='Search the docs'>
    </div>
    <a id="contents-toggle-btn" href="#">
      <span class="toggle-hamburger"></span>
    </a>
  </div>
  <ul id="nav-tree">

  
  
  

  
  





  
  
  
  
  



  
  

  
  
  
  
  

  
  
  

  
  
  
  

  </ul>
</aside>

  <div class="content-wrapper">
    <div class="sidebar-toggle" data-component="sidebar-toggle" data-state="open" ><a data-action="toggle" href="#"><span
      class="cf-icon SidebarOpen"></span></a></div>
    <div class="article">
  <article class="article--content">
    <div class="title">
      <h1>Optimize writes to InfluxDB</h1>
      






      
      <div
  class="format-selector"
  data-component="format-selector"
  data-child-count="0"
  data-estimated-tokens="0">
  
  <button
    class="format-selector__button"
    aria-haspopup="true"
    aria-expanded="false"
    aria-label="Copy page for AI - Access documentation in different formats"
  >
    <span class="format-selector__button-icon">
      
      <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M9 1H3C2.44772 1 2 1.44772 2 2V14C2 14.5523 2.44772 15 3 15H13C13.5523 15 14 14.5523 14 14V6L9 1Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
        <path d="M9 1V6H14" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
    </span>
    <span class="format-selector__button-text" data-button-text>
      Copy page for AI
    </span>
    <span class="format-selector__button-arrow">
      
      <svg width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M3 4.5L6 7.5L9 4.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
    </span>
  </button>

  
  <div
    class="format-selector__dropdown"
    data-dropdown-menu
    role="menu"
    aria-label="Format options"
  >
    
  </div>
</div>
    </div>
    









    
























    





    




    
    




  <p>Use these tips to optimize performance and system overhead when writing data to InfluxDB.</p>
<ul>
<li><a href="#batch-writes">Batch writes</a></li>
<li><a href="#sort-tags-by-key">Sort tags by key</a></li>
<li><a href="#use-the-coarsest-time-precision-possible">Use the coarsest time precision possible</a></li>
<li><a href="#use-gzip-compression">Use gzip compression</a>
<ul>
<li><a href="#enable-gzip-compression-in-telegraf">Enable gzip compression in Telegraf</a></li>
<li><a href="#enable-gzip-compression-in-influxdb-client-libraries">Enable gzip compression in InfluxDB client libraries</a></li>
<li><a href="#use-gzip-compression-with-the-influxdb-api">Use gzip compression with the InfluxDB API</a></li>
</ul>
</li>
<li><a href="#synchronize-hosts-with-ntp">Synchronize hosts with NTP</a></li>
<li><a href="#write-multiple-data-points-in-one-request">Write multiple data points in one request</a></li>
<li><a href="#pre-process-data-before-writing">Pre-process data before writing</a>
<ul>
<li><a href="#prerequisites">Prerequisites</a></li>
<li><a href="#filter-data-from-a-batch">Filter data from a batch</a></li>
<li><a href="#coerce-data-types-to-avoid-rejected-point-errors">Coerce data types to avoid rejected point errors</a></li>
<li><a href="#merge-lines-to-optimize-memory-and-bandwidth">Merge lines to optimize memory and bandwidth</a></li>
<li><a href="#avoid-sending-duplicate-data">Avoid sending duplicate data</a></li>
<li><a href="#run-custom-preprocessing-code">Run custom preprocessing code</a></li>
</ul>
</li>
</ul>

<div class="block note">
  
  
  <p>The following tools write to InfluxDB and employ <em>most</em> write optimizations by default:</p>
<ul>
<li><a href="/influxdb3/cloud-dedicated/write-data/use-telegraf/">Telegraf</a></li>
<li><a href="/influxdb3/cloud-dedicated/reference/client-libraries/">InfluxDB client libraries</a></li>
</ul>
</div>
<h2 id="batch-writes">Batch writes</h2>
<p>Write data in batches to minimize network overhead when writing data to InfluxDB.</p>

<div class="block note">
  
  
  <p>The optimal batch size is 10,000 lines of line protocol or 10 MBs,
whichever threshold is met first.</p>
</div>
<h2 id="sort-tags-by-key">Sort tags by key</h2>
<p>Before writing data points to InfluxDB, sort tags by key in lexicographic order.
<em>Verify sort results match results from the <a href="http://golang.org/pkg/bytes/#Compare">Go <code>bytes.Compare</code> function</a>.</em></p>


<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl"># Line protocol example with unsorted tags
</span></span><span class="line"><span class="cl">measurement,tagC=therefore,tagE=am,tagA=i,tagD=i,tagB=think fieldKey=fieldValue 1562020262
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"># Optimized line protocol example with tags sorted by key
</span></span><span class="line"><span class="cl">measurement,tagA=i,tagB=think,tagC=therefore,tagD=i,tagE=am fieldKey=fieldValue 1562020262</span></span></code></pre></div>
<h2 id="use-the-coarsest-time-precision-possible">Use the coarsest time precision possible</h2>
<p>By default, InfluxDB writes data in nanosecond precision.
However if your data isn&rsquo;t collected in nanoseconds, there is no need to write at that precision.
For better performance, use the coarsest precision possible for timestamps.</p>
<p><em>Specify timestamp precision when <a href="/influxdb3/cloud-dedicated/write-data/">writing to InfluxDB</a>.</em></p>
<h2 id="use-gzip-compression">Use gzip compression</h2>
<p>Use gzip compression to speed up writes to InfluxDB.
Benchmarks have shown up to a 5x speed improvement when data is compressed.</p>

<div class="tabs-wrapper">
  




<div class="tabs">
  <p><a href="#">Telegraf</a>
<a href="#">Client libraries</a>
<a href="#">InfluxDB API</a></p>

</div>


<section class="tab-content">
  <h3 id="enable-gzip-compression-in-telegraf">Enable gzip compression in Telegraf</h3>
<p>In the <code>influxdb_v2</code> output plugin configuration in your <code>telegraf.conf</code>, set the
<code>content_encoding</code> option to <code>gzip</code>:</p>


<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-toml" data-lang="toml"><span class="line"><span class="cl"><span class="p">[[</span><span class="nx">outputs</span><span class="p">.</span><span class="nx">influxdb_v2</span><span class="p">]]</span>
</span></span><span class="line"><span class="cl">  <span class="nx">urls</span> <span class="p">=</span> <span class="p">[</span><span class="s2">&#34;https://cluster-id.a.influxdb.io&#34;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">  <span class="c"># ...</span>
</span></span><span class="line"><span class="cl">  <span class="nx">content_encoding</span> <span class="p">=</span> <span class="s2">&#34;gzip&#34;</span></span></span></code></pre></div>

</section>


<section class="tab-content">
  <h3 id="enable-gzip-compression-in-influxdb-client-libraries">Enable gzip compression in InfluxDB client libraries</h3>
<p>Each <a href="/influxdb3/cloud-dedicated/reference/client-libraries/">InfluxDB client library</a> provides
options for compressing write requests or enforces compression by default.
The method for enabling compression is different for each library.
For specific instructions, see the
<a href="/influxdb3/cloud-dedicated/reference/client-libraries/">InfluxDB client libraries documentation</a>.</p>

</section>


<section class="tab-content">
  <h3 id="use-gzip-compression-with-the-influxdb-api">Use gzip compression with the InfluxDB API</h3>
<p>When using the InfluxDB API <code>/api/v2/write</code> endpoint to write data,
compress the data with <code>gzip</code> and set the <code>Content-Encoding</code> header to <code>gzip</code>&ndash;for example:</p>
<div class="custom-timestamps">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;mem,host=host1 used_percent=23.43234543 1641024000
</span></span></span><span class="line"><span class="cl"><span class="s2">mem,host=host2 used_percent=26.81522361 1641027600
</span></span></span><span class="line"><span class="cl"><span class="s2">mem,host=host1 used_percent=22.52984738 1641031200
</span></span></span><span class="line"><span class="cl"><span class="s2">mem,host=host2 used_percent=27.18294630 1641034800&#34;</span> <span class="p">|</span> gzip &gt; system.gzip <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>
</span></span><span class="line"><span class="cl">curl --request POST <span class="s2">&#34;https://cluster-id.a.influxdb.io/api/v2/write?org=ignored&amp;bucket=<div data-component='code-placeholder' class='code-placeholder-wrapper'><var title='Edit DATABASE_NAME' class='code-placeholder magenta' data-code-var='DATABASE_NAME' data-code-var-value='DATABASE_NAME' data-code-var-escaped="DATABASE_NAME">DATABASE_NAME<span class='code-placeholder-edit-icon cf-icon Pencil'></span></var></div>&amp;precision=s&#34;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  --header <span class="s2">&#34;Authorization: Token <div data-component='code-placeholder' class='code-placeholder-wrapper'><var title='Edit DATABASE_TOKEN' class='code-placeholder magenta' data-code-var='DATABASE_TOKEN' data-code-var-value='DATABASE_TOKEN' data-code-var-escaped="DATABASE_TOKEN">DATABASE_TOKEN<span class='code-placeholder-edit-icon cf-icon Pencil'></span></var></div>&#34;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  --header <span class="s2">&#34;Content-Type: text/plain; charset=utf-8&#34;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  --header <span class="s2">&#34;<span class='code-callout orange'>Content-Encoding: gzip</span>&#34;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  --data-binary @system.gzip</span></span></code></pre></div>
</div>
<p>Replace the following:</p>
<ul>
<li><span class="code-placeholder-key"><code>DATABASE_NAME</code></span>: the name of the <a href="/influxdb3/cloud-dedicated/admin/databases/">database</a> to write data to</li>
<li><span class="code-placeholder-key"><code>DATABASE_TOKEN</code></span>:
a <a href="/influxdb3/cloud-dedicated/admin/tokens/#database-tokens">database token</a>
with <em>write</em> access to the specified database.
<em>Store this in a secret store or environment variable to avoid exposing the raw token string.</em></li>
</ul>

</section>


</div>

<h2 id="synchronize-hosts-with-ntp">Synchronize hosts with NTP</h2>
<p>Use the Network Time Protocol (NTP) to synchronize time between hosts.
If a timestamp isn&rsquo;t included in line protocol, InfluxDB uses its host&rsquo;s local
time (in UTC) to assign timestamps to each point.
If a host&rsquo;s clocks isn&rsquo;t synchronized with NTP, timestamps may be inaccurate.</p>
<h2 id="write-multiple-data-points-in-one-request">Write multiple data points in one request</h2>
<p>To write multiple lines in one request, each line of line protocol must be delimited by a new line (<code>\n</code>).</p>
<h2 id="pre-process-data-before-writing">Pre-process data before writing</h2>
<p>Pre-processing data in your write workload can help you avoid <a href="/influxdb3/cloud-dedicated/write-data/troubleshoot/#troubleshoot-failures">write failures</a> due to schema conflicts or resource use.
For example, if you have many devices that write to the same measurement, and some devices use different data types for the same field, then you might want to generate an alert or convert field data to fit your schema before you send the data to InfluxDB.</p>
<p>With <a href="/telegraf/v1/">Telegraf</a>, you can process data from other services and files and then write it to InfluxDB.
In addition to processing data with Telegraf&rsquo;s included plugins, you can use the <a href="/telegraf/v1/plugins/#processor-execd">Execd processor plugin</a> to integrate your own code and external applications.</p>
<p>The following examples show how to <a href="/telegraf/v1/configuration">configure the Telegraf agent</a> and <a href="/telegraf/v1/plugins/">plugins</a> to optimize writes.
The examples use the <a href="/telegraf/v1/plugins/#input-file">File input plugin</a> to read data from a file
and use the <a href="/telegraf/v1/plugins/#input-influxdb">InfluxDB v2 output plugin</a> to write data to a database, but you can use any input and output plugin.</p>
<h3 id="prerequisites">Prerequisites</h3>
<p><a href="/telegraf/v1/install/">Install Telegraf</a> if you haven&rsquo;t already.</p>
<h3 id="filter-data-from-a-batch">Filter data from a batch</h3>
<p>Use Telegraf and metric filtering to filter data before writing it to InfluxDB.</p>
<p>Configure <a href="/telegraf/v1/configuration/#filters">metric filters</a> to retain or remove data elements (before processor and aggregator plugins run).</p>
<ol>
<li>
<p>Enter the following command to create a Telegraf configuration that parses system usage data, removes the specified fields and tags, and then writes the data to InfluxDB:</p>
<!--pytest-codeblocks:cont-->


<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">cat <span class="s">&lt;&lt;EOF &gt;&gt; ./telegraf.conf
</span></span></span><span class="line"><span class="cl"><span class="s">  [[inputs.cpu]]
</span></span></span><span class="line"><span class="cl"><span class="s">    # Remove the specified fields from points.
</span></span></span><span class="line"><span class="cl"><span class="s">    fieldpass = [&#34;usage_system&#34;, &#34;usage_idle&#34;]
</span></span></span><span class="line"><span class="cl"><span class="s">    # Remove the specified tags from points.
</span></span></span><span class="line"><span class="cl"><span class="s">    tagexclude = [&#34;host&#34;]
</span></span></span><span class="line"><span class="cl"><span class="s">  [[outputs.influxdb_v2]]
</span></span></span><span class="line"><span class="cl"><span class="s">    urls = [&#34;https://cluster-id.a.influxdb.io&#34;]
</span></span></span><span class="line"><span class="cl"><span class="s">    token = &#34;<div data-component='code-placeholder' class='code-placeholder-wrapper'><var title='Edit DATABASE_TOKEN' class='code-placeholder magenta' data-code-var='DATABASE_TOKEN' data-code-var-value='DATABASE_TOKEN' data-code-var-escaped="DATABASE_TOKEN">DATABASE_TOKEN<span class='code-placeholder-edit-icon cf-icon Pencil'></span></var></div>&#34;
</span></span></span><span class="line"><span class="cl"><span class="s">    organization = &#34;&#34;
</span></span></span><span class="line"><span class="cl"><span class="s">    bucket = &#34;<div data-component='code-placeholder' class='code-placeholder-wrapper'><var title='Edit DATABASE_NAME' class='code-placeholder magenta' data-code-var='DATABASE_NAME' data-code-var-value='DATABASE_NAME' data-code-var-escaped="DATABASE_NAME">DATABASE_NAME<span class='code-placeholder-edit-icon cf-icon Pencil'></span></var></div>&#34;
</span></span></span><span class="line"><span class="cl"><span class="s">EOF</span></span></span></code></pre></div>

<p>Replace the following:</p>
<ul>
<li><span class="code-placeholder-key"><code>DATABASE_NAME</code></span>: the name of the <a href="/influxdb3/cloud-dedicated/admin/databases/">database</a> to write data to</li>
<li><span class="code-placeholder-key"><code>DATABASE_TOKEN</code></span>: a <a href="/influxdb3/cloud-dedicated/admin/tokens/#database-tokens">database token</a> with <em>write</em> access to the specified database.
<em>Store this in a secret store or environment variable to avoid exposing the raw token string.</em></li>
</ul>
</li>
<li>
<p>To test the input and processor, enter the following command:</p>
<!--pytest-codeblocks:cont-->
</li>
</ol>


<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">telegraf --test --config telegraf.conf</span></span></code></pre></div>
<p>The output is similar to the following.
For each row of input data, the filters pass the metric name, tags, specified fields, and timestamp.</p>


<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">&gt; cpu,cpu=cpu0 usage_idle=100,usage_system=0 1702067201000000000
</span></span><span class="line"><span class="cl">...
</span></span><span class="line"><span class="cl">&gt; cpu,cpu=cpu-total usage_idle=99.80198019802448,usage_system=0.1980198019802045 1702067201000000000</span></span></code></pre></div>
<h3 id="coerce-data-types-to-avoid-rejected-point-errors">Coerce data types to avoid rejected point errors</h3>
<p>Use Telegraf and the <a href="/telegraf/v1/plugins/#processor-converter">Converter processor plugin</a> to convert field data types to fit your schema.</p>
<p>For example, if you write the sample data in
<a href="/influxdb3/cloud-dedicated/reference/sample-data/#get-started-home-sensor-data">Get started home sensor data</a> to a database, and then try to write the following batch to the same measurement:</p>


<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">home,room=Kitchen temp=23.1,hum=36.6,co=22.1 1641063600
</span></span><span class="line"><span class="cl">home,room=Living\ Room temp=22i,hum=36.4,co=17i 1641067200
</span></span><span class="line"><span class="cl">home,room=Kitchen temp=22.7,hum=36.5,co=26i 1641067200</span></span></code></pre></div>
<p>InfluxDB expects <code>co</code> to contain an integer value and rejects points with <code>co</code> floating-point decimal (<code>22.1</code>) values.
To avoid the error, configure Telegraf to convert fields to the data types in your schema columns.</p>
<p>The following example converts the <code>temp</code>, <code>hum</code>, and <code>co</code> fields to fit the <a href="/influxdb3/cloud-dedicated/reference/sample-data/#get-started-home-sensor-data">sample data</a> schema:</p>
<!--before-test
```sh
curl -s "https://cluster-id.a.influxdb.io/api/v2/write?bucket=DATABASE_NAME&precision=s" \
  --header "Authorization: Token DATABASE_TOKEN" \
  --header "Content-type: text/plain; charset=utf-8" \
  --header "Accept: application/json" \
  --data-binary "
    home,room=Kitchen temp=23.1,hum=36.6,co=22i 1641063600
    home,room=Living\ Room temp=22.2,hum=36.4,co=17i 1641067200
    home,room=Kitchen temp=22.7,hum=36.5,co=26i 1641067200"
```
-->
<ol>
<li>
<p>In your terminal, enter the following command to create the sample data file:</p>
<!--pytest-codeblocks:cont-->


<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">cat <span class="s">&lt;&lt;EOF &gt; ./home.lp
</span></span></span><span class="line"><span class="cl"><span class="s">home,room=Kitchen temp=23.1,hum=36.6,co=22.1 1641063600
</span></span></span><span class="line"><span class="cl"><span class="s">home,room=Living\ Room temp=22i,hum=36.4,co=17i 1641067200
</span></span></span><span class="line"><span class="cl"><span class="s">home,room=Kitchen temp=22.7,hum=36.5,co=26i 1641067200
</span></span></span><span class="line"><span class="cl"><span class="s">EOF</span></span></span></code></pre></div>
</li>
<li>
<p>Enter the following command to create a Telegraf configuration that parses the sample data, converts the field values to the specified data types, and then writes the data to InfluxDB:</p>
 <!--pytest-codeblocks:cont-->


<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">cat <span class="s">&lt;&lt;EOF &gt; ./telegraf.conf
</span></span></span><span class="line"><span class="cl"><span class="s">[[inputs.file]]
</span></span></span><span class="line"><span class="cl"><span class="s">  ## For each interval, parse data from files in the list.
</span></span></span><span class="line"><span class="cl"><span class="s">  files = [&#34;home.lp&#34;]
</span></span></span><span class="line"><span class="cl"><span class="s">  influx_timestamp_precision = &#34;1s&#34;
</span></span></span><span class="line"><span class="cl"><span class="s">  precision = &#34;1s&#34;
</span></span></span><span class="line"><span class="cl"><span class="s">  tagexclude = [&#34;host&#34;]
</span></span></span><span class="line"><span class="cl"><span class="s">[[processors.converter]]
</span></span></span><span class="line"><span class="cl"><span class="s">  [processors.converter.fields]
</span></span></span><span class="line"><span class="cl"><span class="s">    ## A data type and a list of fields to convert to the data type.
</span></span></span><span class="line"><span class="cl"><span class="s">    float = [&#34;temp&#34;, &#34;hum&#34;]
</span></span></span><span class="line"><span class="cl"><span class="s">    integer = [&#34;co&#34;]
</span></span></span><span class="line"><span class="cl"><span class="s">[[outputs.influxdb_v2]]
</span></span></span><span class="line"><span class="cl"><span class="s">  ## InfluxDB v2 API credentials and the database to write to.
</span></span></span><span class="line"><span class="cl"><span class="s">  urls = [&#34;https://cluster-id.a.influxdb.io&#34;]
</span></span></span><span class="line"><span class="cl"><span class="s">  token = &#34;<div data-component='code-placeholder' class='code-placeholder-wrapper'><var title='Edit DATABASE_TOKEN' class='code-placeholder magenta' data-code-var='DATABASE_TOKEN' data-code-var-value='DATABASE_TOKEN' data-code-var-escaped="DATABASE_TOKEN">DATABASE_TOKEN<span class='code-placeholder-edit-icon cf-icon Pencil'></span></var></div>&#34;
</span></span></span><span class="line"><span class="cl"><span class="s">  organization = &#34;&#34;
</span></span></span><span class="line"><span class="cl"><span class="s">  bucket = &#34;<div data-component='code-placeholder' class='code-placeholder-wrapper'><var title='Edit DATABASE_NAME' class='code-placeholder magenta' data-code-var='DATABASE_NAME' data-code-var-value='DATABASE_NAME' data-code-var-escaped="DATABASE_NAME">DATABASE_NAME<span class='code-placeholder-edit-icon cf-icon Pencil'></span></var></div>&#34;
</span></span></span><span class="line"><span class="cl"><span class="s">EOF</span></span></span></code></pre></div>

<p>Replace the following:</p>
<ul>
<li><span class="code-placeholder-key"><code>DATABASE_NAME</code></span>: the name of the <a href="/influxdb3/cloud-dedicated/admin/databases/">database</a> to write data to</li>
<li><span class="code-placeholder-key"><code>DATABASE_TOKEN</code></span>: a <a href="/influxdb3/cloud-dedicated/admin/tokens/#database-tokens">database token</a> with <em>write</em> access to the specified database.
<em>Store this in a secret store or environment variable to avoid exposing the raw token string.</em></li>
</ul>
</li>
<li>
<p>To test the input and processor, enter the following command:</p>
<!--pytest-codeblocks:cont-->


<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">telegraf --test --config telegraf.conf</span></span></code></pre></div>
<p>Telegraf outputs the following to stdout, and then exits:</p>
<!--pytest-codeblocks:expected-output-->


<pre tabindex="0"><code>&gt; home,room=Kitchen co=22i,hum=36.6,temp=23.1 1641063600000000000
&gt; home,room=Living\ Room co=17i,hum=36.4,temp=22 1641067200000000000
&gt; home,room=Kitchen co=26i,hum=36.5,temp=22.7 1641067200000000000</code></pre>
<!-- hidden-test >

```bash
# Run once and exit.
telegraf --once --config telegraf.conf
```
-->
</li>
</ol>
<h3 id="merge-lines-to-optimize-memory-and-bandwidth">Merge lines to optimize memory and bandwidth</h3>
<p>Use Telegraf and the <a href="/telegraf/v1/plugins/#aggregator-merge">Merge aggregator plugin</a> to merge points that share the same measurement, tag set, and timestamp.</p>
<p>The following example creates sample data for two series (the combination of measurement, tag set, and timestamp), and then merges points in each series:</p>
<ol>
<li>
<p>In your terminal, enter the following command to create the sample data file and calculate the number of seconds between the earliest timestamp and <em>now</em>.
The command assigns the calculated value to a <code>grace_duration</code> variable that you&rsquo;ll use in the next step.</p>


<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">cat <span class="s">&lt;&lt;EOF &gt; ./home.lp
</span></span></span><span class="line"><span class="cl"><span class="s">home,room=Kitchen temp=23.1 1641063600
</span></span></span><span class="line"><span class="cl"><span class="s">home,room=Kitchen hum=36.6 1641063600
</span></span></span><span class="line"><span class="cl"><span class="s">home,room=Kitchen co=22i 1641063600
</span></span></span><span class="line"><span class="cl"><span class="s">home,room=Living\ Room temp=22.7 1641063600
</span></span></span><span class="line"><span class="cl"><span class="s">home,room=Living\ Room hum=36.4 1641063600
</span></span></span><span class="line"><span class="cl"><span class="s">home,room=Living\ Room co=17i 1641063600
</span></span></span><span class="line"><span class="cl"><span class="s">EOF</span>
</span></span><span class="line"><span class="cl"><span class="nv">grace_duration</span><span class="o">=</span><span class="s2">&#34;</span><span class="k">$(($(</span>date +%s<span class="k">)</span><span class="o">-</span><span class="m">1641063000</span><span class="k">))</span><span class="s2">s&#34;</span></span></span></code></pre></div>
</li>
<li>
<p>Enter the following command to configure Telegraf to parse the file, merge the points, and write the data to InfluxDB&ndash;specifically, the configuration sets the following properties:</p>
<ul>
<li><code>influx_timestamp_precision</code>: for parsers, specifies the timestamp precision in the input data</li>
<li>Optional: <code>aggregators.merge.grace</code> extends the duration for merging points.
To ensure the sample data is included, the configuration uses the calculated variable from the preceding step.</li>
</ul>
<!--pytest-codeblocks:cont-->


<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">cat <span class="s">&lt;&lt;EOF &gt; ./telegraf.conf
</span></span></span><span class="line"><span class="cl"><span class="s"># Parse metrics from a file
</span></span></span><span class="line"><span class="cl"><span class="s">[[inputs.file]]
</span></span></span><span class="line"><span class="cl"><span class="s">  ## A list of files to parse during each interval.
</span></span></span><span class="line"><span class="cl"><span class="s">  files = [&#34;home.lp&#34;]
</span></span></span><span class="line"><span class="cl"><span class="s">  ## The precision of timestamps in your data.
</span></span></span><span class="line"><span class="cl"><span class="s">  influx_timestamp_precision = &#34;1s&#34;
</span></span></span><span class="line"><span class="cl"><span class="s">  tagexclude = [&#34;host&#34;]
</span></span></span><span class="line"><span class="cl"><span class="s"># Merge separate metrics that share a series key
</span></span></span><span class="line"><span class="cl"><span class="s">[[aggregators.merge]]
</span></span></span><span class="line"><span class="cl"><span class="s">  grace = &#34;$grace_duration&#34;
</span></span></span><span class="line"><span class="cl"><span class="s">  ## If true, drops the original metric.
</span></span></span><span class="line"><span class="cl"><span class="s">  drop_original = true
</span></span></span><span class="line"><span class="cl"><span class="s"># Writes metrics as line protocol to the InfluxDB v2 API
</span></span></span><span class="line"><span class="cl"><span class="s">[[outputs.influxdb_v2]]
</span></span></span><span class="line"><span class="cl"><span class="s">  ## InfluxDB v2 API credentials and the database to write data to.
</span></span></span><span class="line"><span class="cl"><span class="s">  urls = [&#34;https://cluster-id.a.influxdb.io&#34;]
</span></span></span><span class="line"><span class="cl"><span class="s">  token = &#34;<div data-component='code-placeholder' class='code-placeholder-wrapper'><var title='Edit DATABASE_TOKEN' class='code-placeholder magenta' data-code-var='DATABASE_TOKEN' data-code-var-value='DATABASE_TOKEN' data-code-var-escaped="DATABASE_TOKEN">DATABASE_TOKEN<span class='code-placeholder-edit-icon cf-icon Pencil'></span></var></div>&#34;
</span></span></span><span class="line"><span class="cl"><span class="s">  organization = &#34;&#34;
</span></span></span><span class="line"><span class="cl"><span class="s">  bucket = &#34;<div data-component='code-placeholder' class='code-placeholder-wrapper'><var title='Edit DATABASE_NAME' class='code-placeholder magenta' data-code-var='DATABASE_NAME' data-code-var-value='DATABASE_NAME' data-code-var-escaped="DATABASE_NAME">DATABASE_NAME<span class='code-placeholder-edit-icon cf-icon Pencil'></span></var></div>&#34;
</span></span></span><span class="line"><span class="cl"><span class="s">EOF</span></span></span></code></pre></div>

<p>Replace the following:</p>
<ul>
<li><span class="code-placeholder-key"><code>DATABASE_NAME</code></span>: the name of the <a href="/influxdb3/cloud-dedicated/admin/databases/">database</a> to write data to</li>
<li><span class="code-placeholder-key"><code>DATABASE_TOKEN</code></span>: a <a href="/influxdb3/cloud-dedicated/admin/tokens/#database-tokens">database token</a> with <em>write</em> access to the specified database.
<em>Store this in a secret store or environment variable to avoid exposing the raw token string.</em></li>
</ul>
</li>
<li>
<p>To test the input and aggregator, enter the following command:</p>
<!--pytest-codeblocks:cont-->


<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">telegraf --test --config telegraf.conf</span></span></code></pre></div>
<p>Telegraf outputs the following to stdout, and then exits:</p>
<!--pytest-codeblocks:expected-output-->


<pre tabindex="0"><code>&gt; home,room=Kitchen co=22i,hum=36.6,temp=23.1 1641063600000000000
&gt; home,room=Living\ Room co=17i,hum=36.4,temp=22.7 1641063600000000000</code></pre>
<!-- hidden-test >

```bash
# Run once and exit.
telegraf --once --config telegraf.conf
```
-->
</li>
</ol>
<h3 id="avoid-sending-duplicate-data">Avoid sending duplicate data</h3>
<p>When writing duplicate points (points with the same timestamp and tag set),
InfluxDB deduplicates the data by creating a union of the duplicate points.
Deduplicating your data can reduce your write payload size and resource usage.</p>

<div class="block important">
  
  
  <h4 id="write-ordering-for-duplicate-points">Write ordering for duplicate points</h4>
<p>InfluxDB attempts to honor write ordering for duplicate points, with the most
recently written point taking precedence. However, when data is flushed from
the in-memory buffer to Parquet files—typically every 15 minutes, but
sometimes sooner—this ordering is not guaranteed if duplicate points are flushed
at the same time. As a result, the last written duplicate point may not always
be retained in storage.</p>
<p>For recommended patterns and anti-patterns to avoid, see
<a href="/influxdb3/cloud-dedicated/reference/syntax/line-protocol/#duplicate-points">Duplicate points</a>
in the line protocol reference.</p>
</div>
<p>Use Telegraf and the <a href="/telegraf/v1/plugins/#processor-dedup">Dedup processor plugin</a>
to filter data whose field values are exact repetitions of previous values.</p>
<p>The following example shows how to use Telegraf to remove points that repeat field values, and then write the data to InfluxDB:</p>
<ol>
<li>
<p>In your terminal, enter the following command to create the sample data file and calculate the number of seconds between the earliest timestamp and <em>now</em>.
The command assigns the calculated value to a <code>dedup_duration</code> variable that you&rsquo;ll use in the next step.</p>


<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">cat <span class="s">&lt;&lt;EOF &gt; ./home.lp
</span></span></span><span class="line"><span class="cl"><span class="s">home,room=Kitchen temp=23.1,hum=36.6,co=22i 1641063600
</span></span></span><span class="line"><span class="cl"><span class="s">home,room=Living\ Room temp=22.5,hum=36.4,co=17i 1641063600
</span></span></span><span class="line"><span class="cl"><span class="s">home,room=Kitchen temp=22.7,hum=36.5,co=26i 1641063605
</span></span></span><span class="line"><span class="cl"><span class="s">home,room=Living\ Room temp=22.5,hum=36.4,co=17i 1641063605
</span></span></span><span class="line"><span class="cl"><span class="s">home,room=Kitchen temp=23.1,hum=36.6,co=22i 1641063610
</span></span></span><span class="line"><span class="cl"><span class="s">home,room=Living\ Room temp=23.0,hum=36.4,co=17i 1641063610
</span></span></span><span class="line"><span class="cl"><span class="s">EOF</span>
</span></span><span class="line"><span class="cl"><span class="nv">dedup_duration</span><span class="o">=</span><span class="s2">&#34;</span><span class="k">$(($(</span>date +%s<span class="k">)</span><span class="o">-</span><span class="m">1641063000</span><span class="k">))</span><span class="s2">s&#34;</span></span></span></code></pre></div>
</li>
<li>
<p>Enter the following command to configure Telegraf to parse the file, drop duplicate points, and write the data to InfluxDB&ndash;specifically, the sample configuration sets the following:</p>
<ul>
<li><code>influx_timestamp_precision</code>: for parsers, specifies the timestamp precision in the input data</li>
<li><code>processors.dedup</code>: configures the Dedup processor plugin</li>
<li>Optional: <code>processors.dedup.dedup_interval</code>. Points in the range <code>dedup_interval</code> <em>to now</em> are considered for removal.
To ensure the sample data is included, the configuration uses the calculated variable from the preceding step.</li>
</ul>
<!--pytest-codeblocks:cont-->


<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">cat <span class="s">&lt;&lt;EOF &gt; ./telegraf.conf
</span></span></span><span class="line"><span class="cl"><span class="s"># Parse metrics from a file
</span></span></span><span class="line"><span class="cl"><span class="s">[[inputs.file]]
</span></span></span><span class="line"><span class="cl"><span class="s">  ## A list of files to parse during each interval.
</span></span></span><span class="line"><span class="cl"><span class="s">  files = [&#34;home.lp&#34;]
</span></span></span><span class="line"><span class="cl"><span class="s">  ## The precision of timestamps in your data.
</span></span></span><span class="line"><span class="cl"><span class="s">  influx_timestamp_precision = &#34;1s&#34;
</span></span></span><span class="line"><span class="cl"><span class="s">  tagexclude = [&#34;host&#34;]
</span></span></span><span class="line"><span class="cl"><span class="s"># Filter metrics that repeat previous field values
</span></span></span><span class="line"><span class="cl"><span class="s">[[processors.dedup]]
</span></span></span><span class="line"><span class="cl"><span class="s">  ## Drops duplicates within the specified duration
</span></span></span><span class="line"><span class="cl"><span class="s">  dedup_interval = &#34;$dedup_duration&#34;
</span></span></span><span class="line"><span class="cl"><span class="s"># Writes metrics as line protocol to the InfluxDB v2 API
</span></span></span><span class="line"><span class="cl"><span class="s">[[outputs.influxdb_v2]]
</span></span></span><span class="line"><span class="cl"><span class="s">  ## InfluxDB v2 API credentials and the database to write data to.
</span></span></span><span class="line"><span class="cl"><span class="s">  urls = [&#34;https://cluster-id.a.influxdb.io&#34;]
</span></span></span><span class="line"><span class="cl"><span class="s">  token = &#34;<div data-component='code-placeholder' class='code-placeholder-wrapper'><var title='Edit DATABASE_TOKEN' class='code-placeholder magenta' data-code-var='DATABASE_TOKEN' data-code-var-value='DATABASE_TOKEN' data-code-var-escaped="DATABASE_TOKEN">DATABASE_TOKEN<span class='code-placeholder-edit-icon cf-icon Pencil'></span></var></div>&#34;
</span></span></span><span class="line"><span class="cl"><span class="s">  organization = &#34;&#34;
</span></span></span><span class="line"><span class="cl"><span class="s">  bucket = &#34;<div data-component='code-placeholder' class='code-placeholder-wrapper'><var title='Edit DATABASE_NAME' class='code-placeholder magenta' data-code-var='DATABASE_NAME' data-code-var-value='DATABASE_NAME' data-code-var-escaped="DATABASE_NAME">DATABASE_NAME<span class='code-placeholder-edit-icon cf-icon Pencil'></span></var></div>&#34;
</span></span></span><span class="line"><span class="cl"><span class="s">EOF</span></span></span></code></pre></div>

<p>Replace the following:</p>
<ul>
<li><span class="code-placeholder-key"><code>DATABASE_NAME</code></span>: the name of the <a href="/influxdb3/cloud-dedicated/admin/databases/">database</a> to write data to</li>
<li><span class="code-placeholder-key"><code>DATABASE_TOKEN</code></span>: a <a href="/influxdb3/cloud-dedicated/admin/tokens/#database-tokens">database token</a> with <em>write</em> access to the specified database.
<em>Store this in a secret store or environment variable to avoid exposing the raw token string.</em></li>
</ul>
</li>
<li>
<p>To test the input and processor, enter the following command:</p>
<!--pytest-codeblocks:cont-->


<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">telegraf --test --config telegraf.conf</span></span></code></pre></div>
<p>Telegraf outputs the following to stdout, and then exits:</p>
<!--pytest-codeblocks:expected-output-->


<pre tabindex="0"><code>&gt; home,room=Kitchen co=22i,hum=36.6,temp=23.1 1641063600000000000
&gt; home,room=Living\ Room co=17i,hum=36.4,temp=22.5 1641063600000000000
&gt; home,room=Kitchen co=26i,hum=36.5,temp=22.7 1641063605000000000
&gt; home,room=Kitchen co=22i,hum=36.6,temp=23.1 1641063610000000000
&gt; home,room=Living\ Room co=17i,hum=36.4,temp=23 1641063610000000000</code></pre>
<!-- hidden-test >

```bash
# Run once and exit.
telegraf --once --config telegraf.conf
```
-->
</li>
</ol>
<h3 id="run-custom-preprocessing-code">Run custom preprocessing code</h3>
<p>Use Telegraf and the <a href="/telegraf/v1/plugins/#processor-execd">Execd processor plugin</a> to execute code external to Telegraf and then write the processed data.
The Execd plugin expects line protocol data in stdin, passes the data to the configured executable, and then outputs line protocol to stdout.</p>
<p>The following example shows how to use Telegraf to execute Go code for processing metrics and then write the output to InfluxDB.
The Go <code>multiplier.go</code> sample code does the following:</p>
<ol>
<li>
<p>Imports <code>influx</code> parser and serializer plugins from Telegraf.</p>
</li>
<li>
<p>Parses each line of data into a Telegraf metric.</p>
</li>
<li>
<p>If the metric contains a <code>count</code> field, multiplies the field value by <code>2</code>; otherwise, prints a message to stderr and exits.</p>
</li>
<li>
<p>In your editor, enter the following sample code and save the file as <code>multiplier.go</code>:</p>


<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kn">package</span><span class="w"> </span><span class="nx">main</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="p">(</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="s">&#34;fmt&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="s">&#34;os&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="s">&#34;github.com/influxdata/telegraf/plugins/parsers/influx&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">influxSerializer</span><span class="w"> </span><span class="s">&#34;github.com/influxdata/telegraf/plugins/serializers/influx&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">func</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">parser</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">influx</span><span class="p">.</span><span class="nf">NewStreamParser</span><span class="p">(</span><span class="nx">os</span><span class="p">.</span><span class="nx">Stdin</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">serializer</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">influxSerializer</span><span class="p">.</span><span class="nx">Serializer</span><span class="p">{}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">serializer</span><span class="p">.</span><span class="nf">Init</span><span class="p">();</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">nil</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nx">fmt</span><span class="p">.</span><span class="nf">Fprintf</span><span class="p">(</span><span class="nx">os</span><span class="p">.</span><span class="nx">Stderr</span><span class="p">,</span><span class="w"> </span><span class="s">&#34;serializer init failed: %v\n&#34;</span><span class="p">,</span><span class="w"> </span><span class="nx">err</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nx">os</span><span class="p">.</span><span class="nf">Exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nx">metric</span><span class="p">,</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">parser</span><span class="p">.</span><span class="nf">Next</span><span class="p">()</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">nil</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nx">influx</span><span class="p">.</span><span class="nx">EOF</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="k">return</span><span class="w"> </span><span class="c1">// stream ended</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="nx">parseErr</span><span class="p">,</span><span class="w"> </span><span class="nx">isParseError</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">err</span><span class="p">.(</span><span class="o">*</span><span class="nx">influx</span><span class="p">.</span><span class="nx">ParseError</span><span class="p">);</span><span class="w"> </span><span class="nx">isParseError</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="nx">fmt</span><span class="p">.</span><span class="nf">Fprintf</span><span class="p">(</span><span class="nx">os</span><span class="p">.</span><span class="nx">Stderr</span><span class="p">,</span><span class="w"> </span><span class="s">&#34;parse ERR %v\n&#34;</span><span class="p">,</span><span class="w"> </span><span class="nx">parseErr</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="nx">os</span><span class="p">.</span><span class="nf">Exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="nx">fmt</span><span class="p">.</span><span class="nf">Fprintf</span><span class="p">(</span><span class="nx">os</span><span class="p">.</span><span class="nx">Stderr</span><span class="p">,</span><span class="w"> </span><span class="s">&#34;ERR %v\n&#34;</span><span class="p">,</span><span class="w"> </span><span class="nx">err</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="nx">os</span><span class="p">.</span><span class="nf">Exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nx">c</span><span class="p">,</span><span class="w"> </span><span class="nx">found</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">metric</span><span class="p">.</span><span class="nf">GetField</span><span class="p">(</span><span class="s">&#34;count&#34;</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">!</span><span class="nx">found</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="nx">fmt</span><span class="p">.</span><span class="nf">Fprintf</span><span class="p">(</span><span class="nx">os</span><span class="p">.</span><span class="nx">Stderr</span><span class="p">,</span><span class="w"> </span><span class="s">&#34;metric has no count field\n&#34;</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="nx">os</span><span class="p">.</span><span class="nf">Exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">switch</span><span class="w"> </span><span class="nx">t</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">c</span><span class="p">.(</span><span class="kd">type</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="kt">float64</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="nx">t</span><span class="w"> </span><span class="o">*=</span><span class="w"> </span><span class="mi">2</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="nx">metric</span><span class="p">.</span><span class="nf">AddField</span><span class="p">(</span><span class="s">&#34;count&#34;</span><span class="p">,</span><span class="w"> </span><span class="nx">t</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="kt">int64</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="nx">t</span><span class="w"> </span><span class="o">*=</span><span class="w"> </span><span class="mi">2</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="nx">metric</span><span class="p">.</span><span class="nf">AddField</span><span class="p">(</span><span class="s">&#34;count&#34;</span><span class="p">,</span><span class="w"> </span><span class="nx">t</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">default</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="nx">fmt</span><span class="p">.</span><span class="nf">Fprintf</span><span class="p">(</span><span class="nx">os</span><span class="p">.</span><span class="nx">Stderr</span><span class="p">,</span><span class="w"> </span><span class="s">&#34;count is not an unknown type, it&#39;s a %T\n&#34;</span><span class="p">,</span><span class="w"> </span><span class="nx">c</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="nx">os</span><span class="p">.</span><span class="nf">Exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nx">b</span><span class="p">,</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">serializer</span><span class="p">.</span><span class="nf">Serialize</span><span class="p">(</span><span class="nx">metric</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">nil</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="nx">fmt</span><span class="p">.</span><span class="nf">Fprintf</span><span class="p">(</span><span class="nx">os</span><span class="p">.</span><span class="nx">Stderr</span><span class="p">,</span><span class="w"> </span><span class="s">&#34;ERR %v\n&#34;</span><span class="p">,</span><span class="w"> </span><span class="nx">err</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="nx">os</span><span class="p">.</span><span class="nf">Exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nx">fmt</span><span class="p">.</span><span class="nf">Fprint</span><span class="p">(</span><span class="nx">os</span><span class="p">.</span><span class="nx">Stdout</span><span class="p">,</span><span class="w"> </span><span class="nb">string</span><span class="p">(</span><span class="nx">b</span><span class="p">))</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span></span></span></code></pre></div>
<!-- hidden-test
```bash
cat <<EOF > ./multiplier.go
package main

import (
    "fmt"
    "os"
    "github.com/influxdata/telegraf/plugins/parsers/influx"
    influxSerializer "github.com/influxdata/telegraf/plugins/serializers/influx"
)

func main() {
    parser := influx.NewStreamParser(os.Stdin)
    serializer := influxSerializer.Serializer{}
    if err := serializer.Init(); err != nil {
        fmt.Fprintf(os.Stderr, "serializer init failed: %v\n", err)
        os.Exit(1)
    }

    for {
        metric, err := parser.Next()
        if err != nil {
            if err == influx.EOF {
                return // stream ended
            }
            if parseErr, isParseError := err.(*influx.ParseError); isParseError {
                fmt.Fprintf(os.Stderr, "parse ERR %v\n", parseErr)
                os.Exit(1)
            }
            fmt.Fprintf(os.Stderr, "ERR %v\n", err)
            os.Exit(1)
        }

        c, found := metric.GetField("count")
        if !found {
            fmt.Fprintf(os.Stderr, "metric has no count field\n")
            os.Exit(1)
        }
        switch t := c.(type) {
        case float64:
            t *= 2
            metric.AddField("count", t)
        case int64:
            t *= 2
            metric.AddField("count", t)
        default:
            fmt.Fprintf(os.Stderr, "count is not an unknown type, it's a %T\n", c)
            os.Exit(1)
        }
        b, err := serializer.Serialize(metric)
        if err != nil {
            fmt.Fprintf(os.Stderr, "ERR %v\n", err)
            os.Exit(1)
        }
        fmt.Fprint(os.Stdout, string(b))
    }
}
EOF
```
-->
</li>
<li>
<p>Initialize the module and install dependencies:</p>
<!--pytest-codeblocks:cont-->


<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">go mod init processlp
</span></span><span class="line"><span class="cl">go mod tidy</span></span></code></pre></div>
</li>
<li>
<p>In your terminal, enter the following command to create the sample data file:</p>
<!--pytest-codeblocks:cont-->


<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">cat <span class="s">&lt;&lt;EOF &gt; ./home.lp
</span></span></span><span class="line"><span class="cl"><span class="s">home,room=Kitchen temp=23.1,count=1 1641063600
</span></span></span><span class="line"><span class="cl"><span class="s">home,room=Living\ Room temp=22.7,count=1 1641063600
</span></span></span><span class="line"><span class="cl"><span class="s">home,room=Kitchen temp=23.1 1641063601
</span></span></span><span class="line"><span class="cl"><span class="s">home,room=Living\ Room temp=22.7 1641063601
</span></span></span><span class="line"><span class="cl"><span class="s">EOF</span></span></span></code></pre></div>
</li>
<li>
<p>Enter the following command to configure Telegraf to parse the file, execute the Go binary, and write the data&ndash;specifically, the sample configuration sets the following:</p>
<ul>
<li><code>influx_timestamp_precision</code>: for parsers, specifies the timestamp precision in the input data</li>
<li><code>processors.execd</code>: configures the Execd plugin</li>
<li><code>processors.execd.command</code>: sets the executable and arguments for Execd to run</li>
</ul>
<!--pytest-codeblocks:cont-->


<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">cat <span class="s">&lt;&lt;EOF &gt; ./telegraf.conf
</span></span></span><span class="line"><span class="cl"><span class="s"># Parse metrics from a file
</span></span></span><span class="line"><span class="cl"><span class="s">[[inputs.file]]
</span></span></span><span class="line"><span class="cl"><span class="s">  ## A list of files to parse during each interval.
</span></span></span><span class="line"><span class="cl"><span class="s">  files = [&#34;home.lp&#34;]
</span></span></span><span class="line"><span class="cl"><span class="s">  ## The precision of timestamps in your data.
</span></span></span><span class="line"><span class="cl"><span class="s">  influx_timestamp_precision = &#34;1s&#34;
</span></span></span><span class="line"><span class="cl"><span class="s">  tagexclude = [&#34;host&#34;]
</span></span></span><span class="line"><span class="cl"><span class="s"># Filter metrics that repeat previous field values
</span></span></span><span class="line"><span class="cl"><span class="s">[[processors.execd]]
</span></span></span><span class="line"><span class="cl"><span class="s">  ## A list that contains the executable command and arguments to run as a daemon.
</span></span></span><span class="line"><span class="cl"><span class="s">  command = [&#34;go&#34;, &#34;run&#34;, &#34;multiplier.go&#34;]
</span></span></span><span class="line"><span class="cl"><span class="s"># Writes metrics as line protocol to the InfluxDB v2 API
</span></span></span><span class="line"><span class="cl"><span class="s">[[outputs.influxdb_v2]]
</span></span></span><span class="line"><span class="cl"><span class="s">  ## InfluxDB v2 API credentials and the database to write data to.
</span></span></span><span class="line"><span class="cl"><span class="s">  urls = [&#34;https://cluster-id.a.influxdb.io&#34;]
</span></span></span><span class="line"><span class="cl"><span class="s">  token = &#34;<div data-component='code-placeholder' class='code-placeholder-wrapper'><var title='Edit DATABASE_TOKEN' class='code-placeholder magenta' data-code-var='DATABASE_TOKEN' data-code-var-value='DATABASE_TOKEN' data-code-var-escaped="DATABASE_TOKEN">DATABASE_TOKEN<span class='code-placeholder-edit-icon cf-icon Pencil'></span></var></div>&#34;
</span></span></span><span class="line"><span class="cl"><span class="s">  organization = &#34;&#34;
</span></span></span><span class="line"><span class="cl"><span class="s">  bucket = &#34;<div data-component='code-placeholder' class='code-placeholder-wrapper'><var title='Edit DATABASE_NAME' class='code-placeholder magenta' data-code-var='DATABASE_NAME' data-code-var-value='DATABASE_NAME' data-code-var-escaped="DATABASE_NAME">DATABASE_NAME<span class='code-placeholder-edit-icon cf-icon Pencil'></span></var></div>&#34;
</span></span></span><span class="line"><span class="cl"><span class="s">EOF</span></span></span></code></pre></div>

<p>Replace the following:</p>
<ul>
<li><span class="code-placeholder-key"><code>DATABASE_NAME</code></span>: the name of the <a href="/influxdb3/cloud-dedicated/admin/databases/">database</a> to write data to</li>
<li><span class="code-placeholder-key"><code>DATABASE_TOKEN</code></span>: a <a href="/influxdb3/cloud-dedicated/admin/tokens/#database-tokens">database token</a> with <em>write</em> access to the specified database.
<em>Store this in a secret store or environment variable to avoid exposing the raw token string.</em></li>
</ul>
</li>
<li>
<p>To test the input and processor, enter the following command:</p>
<!--pytest-codeblocks:cont-->


<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">telegraf --test --config telegraf.conf</span></span></code></pre></div>
<p>Telegraf outputs the following to stdout, and then exits:</p>
<!--pytest-codeblocks:expected-output-->


<pre tabindex="0"><code>&gt; home,room=Kitchen count=2,temp=23.1 1641063600000000000
&gt; home,room=Living\ Room count=2,temp=22.7 1641063600000000000</code></pre>
</li>
</ol>
   <!-- hidden-test >
   ```bash
   # Run once and exit.
   telegraf --once --config telegraf.conf
   ```
   -->



    

    
    

  <div class="related">
    <h4 id="related">Related</h4>
    <ul>
    
      
      

      
      
        
      

      
      

      
      
        
        
        
        <li><a href="/resources/videos/ingest-data/" target="">How to Ingest Data in InfluxDB (Video)</a></li>

      
      
    
      
      

      
      

      
      

      
      
        
        
          <li><a href="/docs-v2/pr-preview/pr-6599/influxdb3/cloud-dedicated/write-data/use-telegraf/" >Use Telegraf to write data</a></li>
        
      
    
    </ul>
  </div>


    





    








  
  








<hr/>
<div class="helpful">
  <p>Was this page helpful?</p>
  <form onSubmit="return submitFeedbackForm('pagefeedback')" id="pagefeedback">
    <input type="text" name="fname" class="bowlofsweets" placeholder="First Name">
    <label class="radio-btns" id="helpful"><input  type="radio" name="helpful" value=true />Yes</label>
    <label class="radio-btns" id="not-helpful"><input  type="radio" name="helpful" value=false />No</label>
  </form>
  <div id="thank-you">
    <p>Thank you for your feedback!</p>
  </div>
  <div class="loader-wrapper">
    <div class="loader"></div>
  </div>
</div>
<hr/>
<div class="feedback block">
  <div class="support">
    <h4 id="bug-reports-and-feedback">Support and feedback</h4>
    <p>
      Thank you for being part of our community!
      We welcome and encourage your feedback and bug reports for  and this documentation.
      To find support, use the following resources:
    </p>
    <ul>
      
        <li><a class="slack" href="https://influxdata.com/slack" target="_blank"><strong>InfluxDB Community Slack</strong>  <em style="opacity:.5">(Preferred)</em></a></li>
        <li><a class="discord" href="https://discord.gg/9zaNCW2PRT" target="_blank">InfluxDB Discord Server</a></li>
      
      <li><a class="community" href="https://community.influxdata.com/" target="_blank">InfluxData Community</a></li>
      <li><a class="reddit" href="https://reddit.com/r/influxdb" target="_blank">InfluxDB Subreddit</a></li>
    </ul>
    
      <p><strong>Customers with an annual or support contract</strong> can <a href="https://support.influxdata.com/">contact InfluxData Support</a>.
         

    
  </div>
  <div class="actions">
    <a href="https://github.com/influxdata/docs-v2/edit/master/content/influxdb3/cloud-dedicated/write-data/best-practices/optimize-writes.md" class="btn edit" target="_blank">Edit this page</a>
    <a href="https://github.com/influxdata/docs-v2/issues/new?body=_Describe%20the%20issue%20here._%0a%0a%23%23%23%23%23%20Relevant%20URLs%0a-%20https://influxdata.github.io/docs-v2/pr-preview/pr-6599/influxdb3/cloud-dedicated/write-data/best-practices/optimize-writes/%0a-%20_Provide%20other%20relevant%20URLs%20%28project%20issues,%20community%20threads,%20etc.%29_%0a" class="btn issue" target="_blank">Submit docs issue</a>
    <a href="https://github.com/influxdata/docs-v2/issues/new/choose/" class="btn issue" target="_blank">Submit  issue</a>
  </div>
</div>



  </article>
</div>

    <div class="copyright">© 2025 InfluxData, Inc.</div>
  </div>
</div>





  
  
<div class="modal">
  <div class="modal-overlay"></div>
  <div class="modal-wrapper">
    <div class="modal-body">
      <a id="modal-close"href="#"><span class="icon-remove"></span></a>
      
      















  




  













<div class="modal-content" id="influxdb-url-list">
  <h3>What is your InfluxDB Cloud Dedicated cluster URL?</h3>
  <p>Enter your <strong>InfluxDB Cloud Dedicated cluster URL</strong> and we&rsquo;ll update code examples for you.</p>
  <div class="products">
    
      <ul id="pref-tabs">
        <li class="pref-tab active" id="pref-cloud"><span class="ephemeral">InfluxDB </span>Cloud</li>
        <li class="pref-tab" id="pref-oss"><span class="ephemeral">InfluxDB </span>OSS or <span class="abbr">Ent</span><span class="ephemeral">erprise</span></li>
      </ul>
      
  
  
  
  
  <div class="product active" id="cloud-urls">
    <div class="providers">
      
      
        <div class="provider">
          
            <h5>AWS</h5>
            <ul>
            
            
              <li class="region-group">
                
                  <p class="region">
                    <span class="fake-radio"></span>
                    US West (Oregon)
                  </p>
                  <ul class="clusters">
                  
                    <li>
                      <label for="us-west-2-1" >
                      <input type="radio" name="influxdb-cloud-url" id="us-west-2-1" value="https://us-west-2-1.aws.cloud2.influxdata.com" checked>
                      <span class="radio"></span>
                      us-west-2-1
                    </label>
                    </li>
                  
                    <li>
                      <label for="us-west-2-2" >
                      <input type="radio" name="influxdb-cloud-url" id="us-west-2-2" value="https://us-west-2-2.aws.cloud2.influxdata.com" checked>
                      <span class="radio"></span>
                      us-west-2-2
                    </label>
                    </li>
                  
                  </ul>
                
              </li>
            
              <li class="region-group">
                
                  <label for="us-east-virginia" >
                    <input type="radio" name="influxdb-cloud-url" id="us-east-virginia" value="https://us-east-1-1.aws.cloud2.influxdata.com" checked>
                    <span class="radio"></span>
                    US East (Virginia)
                  </label>
                
              </li>
            
              <li class="region-group">
                
                  <label for="eu-frankfurt" >
                    <input type="radio" name="influxdb-cloud-url" id="eu-frankfurt" value="https://eu-central-1-1.aws.cloud2.influxdata.com" checked>
                    <span class="radio"></span>
                    EU Frankfurt
                  </label>
                
              </li>
            
          
          </ul>
        </div>
      
        <div class="provider">
          
            <h5>GCP</h5>
            <ul>
            
            
              <li class="region-group">
                
                  <label for="us-central-iowa" >
                    <input type="radio" name="influxdb-cloud-url" id="us-central-iowa" value="https://us-central1-1.gcp.cloud2.influxdata.com" checked>
                    <span class="radio"></span>
                    US Central (Iowa)
                  </label>
                
              </li>
            
          
          </ul>
        </div>
      
        <div class="provider">
          
            <h5>Azure</h5>
            <ul>
            
            
              <li class="region-group">
                
                  <label for="west-europe-amsterdam" >
                    <input type="radio" name="influxdb-cloud-url" id="west-europe-amsterdam" value="https://westeurope-1.azure.cloud2.influxdata.com" checked>
                    <span class="radio"></span>
                    West Europe (Amsterdam)
                  </label>
                
              </li>
            
              <li class="region-group">
                
                  <label for="east-us-virginia" >
                    <input type="radio" name="influxdb-cloud-url" id="east-us-virginia" value="https://eastus-1.azure.cloud2.influxdata.com" checked>
                    <span class="radio"></span>
                    East US (Virginia)
                  </label>
                
              </li>
            
          
          </ul>
        </div>
      
    </div>
  </div>

      
  
  
  
  
  <div class="product inactive" id="oss-urls">
    <div class="providers">
      
      
        <div class="provider">
          
            <h5>Default</h5>
            <ul>
            
            
              <li class="region-group">
                
                  <label for="localhost8086" >
                    <input type="radio" name="influxdb-oss-url" id="localhost8086" value="http://localhost:8086" checked>
                    <span class="radio"></span>
                    localhost:8086
                  </label>
                
              </li>
            
          
          </ul>
        </div>
      
        <div class="provider">
          
            <h5>Custom</h5>
            <ul>
              <li class="custom">
                <label for="custom">
                  <input type="radio" name="influxdb-oss-url" id="custom" value="http://example.com:8080" checked>
                  <span class="radio"></span>
                </label>
                <form action="#" id="custom-url" data-message="">
                  <input type="text" name="custom-url-field" id="custom-url-field" placeholder="http://example.com:8080">
                </form>
              </li>
            </ul>
          
          </ul>
        </div>
      
    </div>
  </div>

    
  </div>
  
</div>


      




  

  
    
    
    
      
    
    
    
  

  

  
    
    
    
      
    
    
      
    
    
  

  
    
    
    
      
    
    
      
    
    
  

  
    
    
    
      
    
    
      
    
    
  

  
    
    
    
      
    
    
      
    
    
  

  
    
    
    
      
    
    
      
    
    
  

  
    
    
    
      
    
    
      
    
    
  

  

  
    
    
    
      
    
    
      
    
    
  

  

  


<div class="modal-content" id="influxdb-version-detector">
  <div data-component="influxdb-version-detector"
       data-products='{&#34;enterprise_influxdb&#34;:{&#34;characteristics&#34;:[&#34;Paid&#34;,&#34;Self-hosted&#34;,&#34;InfluxQL/Flux&#34;,&#34;Username/Password&#34;,&#34;Databases&#34;],&#34;detection&#34;:{&#34;ping_headers&#34;:{&#34;x-influxdb-build&#34;:&#34;Enterprise&#34;}},&#34;name&#34;:&#34;InfluxDB Enterprise v1&#34;,&#34;query_languages&#34;:{&#34;Flux&#34;:{&#34;optional_params&#34;:[],&#34;required_params&#34;:[&#34;URL&#34;,&#34;User&#34;,&#34;Password&#34;,&#34;Default database&#34;]},&#34;InfluxQL&#34;:{&#34;optional_params&#34;:[],&#34;required_params&#34;:[&#34;URL&#34;,&#34;Database&#34;,&#34;User&#34;,&#34;Password&#34;]}}},&#34;influxdb&#34;:{&#34;characteristics&#34;:[&#34;Free&#34;,&#34;Self-hosted&#34;,&#34;InfluxQL/Flux&#34;,&#34;Token or Username/Password&#34;,&#34;Buckets&#34;],&#34;detection&#34;:{&#34;ping_headers&#34;:{&#34;x-influxdb-build&#34;:&#34;OSS&#34;,&#34;x-influxdb-version&#34;:&#34;^(1|2)\\.&#34;},&#34;url_contains&#34;:[&#34;localhost:8086&#34;]},&#34;name&#34;:&#34;InfluxDB&#34;,&#34;placeholder_host&#34;:&#34;localhost:8086&#34;,&#34;query_languages&#34;:{&#34;Flux&#34;:{&#34;optional_params&#34;:[],&#34;required_params&#34;:[&#34;URL&#34;,&#34;Token&#34;,&#34;Default bucket&#34;]},&#34;InfluxQL&#34;:{&#34;optional_params&#34;:[],&#34;required_params&#34;:[&#34;URL&#34;,&#34;Database&#34;,&#34;Auth Type (Basic or Token)&#34;]}}},&#34;influxdb3_cloud_dedicated&#34;:{&#34;characteristics&#34;:[&#34;Paid&#34;,&#34;Cloud&#34;,&#34;SQL/InfluxQL&#34;,&#34;Token&#34;,&#34;Databases&#34;],&#34;detection&#34;:{&#34;url_contains&#34;:[&#34;influxdb.io&#34;]},&#34;name&#34;:&#34;InfluxDB Cloud Dedicated&#34;,&#34;placeholder_host&#34;:&#34;cluster-id.a.influxdb.io&#34;,&#34;query_languages&#34;:{&#34;InfluxQL&#34;:{&#34;optional_params&#34;:[],&#34;required_params&#34;:[&#34;Host&#34;,&#34;Database&#34;,&#34;Token&#34;]},&#34;SQL&#34;:{&#34;optional_params&#34;:[],&#34;required_params&#34;:[&#34;Host&#34;,&#34;Database&#34;,&#34;Token&#34;]}}},&#34;influxdb3_cloud_serverless&#34;:{&#34;characteristics&#34;:[&#34;Paid/Free&#34;,&#34;Cloud&#34;,&#34;All languages&#34;,&#34;Token&#34;,&#34;Buckets&#34;],&#34;detection&#34;:{&#34;url_contains&#34;:[&#34;us-east-1-1.aws.cloud2.influxdata.com&#34;,&#34;eu-central-1-1.aws.cloud2.influxdata.com&#34;]},&#34;name&#34;:&#34;InfluxDB Cloud Serverless&#34;,&#34;placeholder_host&#34;:&#34;cloud2.influxdata.com&#34;,&#34;query_languages&#34;:{&#34;Flux&#34;:{&#34;optional_params&#34;:[],&#34;required_params&#34;:[&#34;Host&#34;,&#34;Organization&#34;,&#34;Token&#34;,&#34;Default bucket&#34;]},&#34;InfluxQL&#34;:{&#34;optional_params&#34;:[],&#34;required_params&#34;:[&#34;Host&#34;,&#34;Bucket&#34;,&#34;Token&#34;]},&#34;SQL&#34;:{&#34;optional_params&#34;:[],&#34;required_params&#34;:[&#34;Host&#34;,&#34;Bucket&#34;,&#34;Token&#34;]}}},&#34;influxdb3_clustered&#34;:{&#34;characteristics&#34;:[&#34;Paid&#34;,&#34;Self-hosted&#34;,&#34;SQL/InfluxQL&#34;,&#34;Token&#34;,&#34;Databases&#34;],&#34;detection&#34;:{&#34;ping_headers&#34;:{&#34;x-influxdb-version&#34;:&#34;influxqlbridged-development&#34;}},&#34;name&#34;:&#34;InfluxDB Clustered&#34;,&#34;placeholder_host&#34;:&#34;cluster-host.com&#34;,&#34;query_languages&#34;:{&#34;InfluxQL&#34;:{&#34;optional_params&#34;:[],&#34;required_params&#34;:[&#34;URL&#34;,&#34;Database&#34;,&#34;Token&#34;]},&#34;SQL&#34;:{&#34;optional_params&#34;:[],&#34;required_params&#34;:[&#34;Host&#34;,&#34;Database&#34;,&#34;Token&#34;]}}},&#34;influxdb3_core&#34;:{&#34;characteristics&#34;:[&#34;Free&#34;,&#34;Self-hosted&#34;,&#34;SQL/InfluxQL&#34;,&#34;No auth required&#34;,&#34;Databases&#34;],&#34;detection&#34;:{&#34;ping_headers&#34;:{&#34;x-influxdb-build&#34;:&#34;Core&#34;,&#34;x-influxdb-version&#34;:&#34;^3\\.&#34;},&#34;url_contains&#34;:[&#34;localhost:8181&#34;]},&#34;name&#34;:&#34;InfluxDB 3 Core&#34;,&#34;placeholder_host&#34;:&#34;localhost:8181&#34;,&#34;query_languages&#34;:{&#34;InfluxQL&#34;:{&#34;optional_params&#34;:[],&#34;required_params&#34;:[&#34;Host&#34;,&#34;Database&#34;]},&#34;SQL&#34;:{&#34;optional_params&#34;:[],&#34;required_params&#34;:[&#34;Host&#34;,&#34;Database&#34;]}}},&#34;influxdb3_enterprise&#34;:{&#34;characteristics&#34;:[&#34;Paid&#34;,&#34;Self-hosted&#34;,&#34;SQL/InfluxQL&#34;,&#34;Token&#34;,&#34;Databases&#34;],&#34;detection&#34;:{&#34;ping_headers&#34;:{&#34;x-influxdb-build&#34;:&#34;Enterprise&#34;,&#34;x-influxdb-version&#34;:&#34;^3\\.&#34;},&#34;url_contains&#34;:[&#34;localhost:8181&#34;]},&#34;name&#34;:&#34;InfluxDB 3 Enterprise&#34;,&#34;placeholder_host&#34;:&#34;localhost:8181&#34;,&#34;query_languages&#34;:{&#34;InfluxQL&#34;:{&#34;optional_params&#34;:[],&#34;required_params&#34;:[&#34;Host&#34;,&#34;Database&#34;,&#34;Token&#34;]},&#34;SQL&#34;:{&#34;optional_params&#34;:[],&#34;required_params&#34;:[&#34;Host&#34;,&#34;Database&#34;,&#34;Token&#34;]}}},&#34;influxdb_cloud&#34;:{&#34;characteristics&#34;:[&#34;Paid/Free&#34;,&#34;Cloud&#34;,&#34;InfluxQL/Flux&#34;,&#34;Token&#34;,&#34;Databases/Buckets&#34;],&#34;detection&#34;:{&#34;url_contains&#34;:[&#34;us-west-2-1.aws.cloud2.influxdata.com&#34;,&#34;us-west-2-2.aws.cloud2.influxdata.com&#34;,&#34;us-east-1-1.aws.cloud2.influxdata.com&#34;,&#34;eu-central-1-1.aws.cloud2.influxdata.com&#34;,&#34;us-central1-1.gcp.cloud2.influxdata.com&#34;,&#34;westeurope-1.azure.cloud2.influxdata.com&#34;,&#34;eastus-1.azure.cloud2.influxdata.com&#34;]},&#34;name&#34;:&#34;InfluxDB Cloud (TSM)&#34;,&#34;placeholder_host&#34;:&#34;cloud2.influxdata.com&#34;,&#34;query_languages&#34;:{&#34;Flux&#34;:{&#34;optional_params&#34;:[],&#34;required_params&#34;:[&#34;URL&#34;,&#34;Organization&#34;,&#34;Token&#34;,&#34;Default bucket&#34;]},&#34;InfluxQL&#34;:{&#34;optional_params&#34;:[],&#34;required_params&#34;:[&#34;URL&#34;,&#34;Database&#34;,&#34;Token&#34;]}}}}'
       data-influxdb-urls='#ZgotmplZ'></div>
</div>
      <div class="modal-content" id="page-feedback">
  <h3>Thank you for your feedback!</h3>
  <p>Let us know what we can do better:</p>
  
  <form id="pagefeedbacktext">
    <input type="text" name="fname" class="bowlofsweets" placeholder="First Name">
    <div class="lifecycle-wrapper">
      <textarea name="feedback-text"  placeholder="Missing information? Unclear explanations? Help us improve this page!"></textarea>
      <div id="thank-you">
        <p>Thank you!</p>
      </div>
      <div class="loader-wrapper">
        <div class="loader"></div>
      </div>
    </div>
    <div class="form-buttons">
      <div id="no-thanks">
        No thanks
      </div>
      <div class="submit-wrapper">
        <input type="submit" value="Submit" onclick="return submitLifeCycleAndClose();">
      </div>
    </div>
  </form>
 
</div>

      
        




<div class="modal-content" id="influxdb-gs-date-select">
  <h3>Select a new date</h3>
  <p><em>Select a date in your bucket's retention period.</em></p>
  <div id="custom-date-selector"></div>
  <a class="btn" id="submit-custom-date" onclick="">Update</a>
</div>
      
      
    </div>
  </div>
</div>
  













  <div class="fullscreen-code highlight">
  <div id="fullscreen-code-placeholder"></div>
  <a class="fullscreen-close"><span class="icon-x"></span></a>
</div>


  
  









<div 
  data-component="doc-search"
  data-api-key="501434b53a46a92a7931aecc7c9672e2"
  data-app-id="WHM9UWMP6M"
  data-index-name="influxdata"
  data-input-selector="#algolia-search-input"
  data-search-tag="docs-v2-pr-preview"
  data-include-flux="false"
  data-include-resources="true"
  data-debug="true"
></div>


  
  <div id="docs-notifications">
  
    <div class="notification note min" id="influxdb3.8-explorer-1.6" data-scope='/' data-exclude=''>
      <div class="close-notification"><span class="cf-icon Remove_New"></span></div> 
      <div class="notification-title">
        
        <h3>New in InfluxDB 3.8</h3>
      </div>
      
      <div class="notification-slug">
        <p>Key enhancements in InfluxDB 3.8 and the InfluxDB 3 Explorer 1.6.</p>
<p><a class="btn" href="https://www.influxdata.com/blog/influxdb-3-8/">See the Blog Post</a></p>

      </div>
      
      
      <div class="notification-content">
        <p>InfluxDB 3.8 is now available for both Core and Enterprise, alongside the
1.6 release of the InfluxDB 3 Explorer UI. This release is focused on
operational maturity and making InfluxDB easier to deploy, manage, and run
reliably in production.</p>
<p>For more information, check out:</p>
<ul>
<li><a href="https://www.influxdata.com/blog/influxdb-3-8/">See the announcement blog post</a></li>
<li><a href="/influxdb3/core/release-notes/">InfluxDB 3 Core release notes</a></li>
<li><a href="/influxdb3/enterprise/release-notes/">InfluxDB 3 Enterprise release notes</a></li>
</ul>

      </div>
      <span class="show"></span>
           
    </div>
  
    <div class="notification warn min" id="influxdb-docker-latest-tag" data-scope='/' data-exclude='/telegraf/,/platform/,/kapacitor/,/chronograf/,/enterprise_influxdb/,/influxdb3/explorer/,/influxdb3/cloud,/influxdb/cloud'>
      <div class="close-notification"><span class="cf-icon Remove_New"></span></div> 
      <div class="notification-title">
        
        <h3>InfluxDB Docker latest tag changing to InfluxDB 3 Core</h3>
      </div>
      
      <div class="notification-slug">
        On <strong>February 3, 2026</strong>, the <code>latest</code> tag for InfluxDB Docker images will
point to InfluxDB 3 Core. To avoid unexpected upgrades, use specific version
tags in your Docker deployments.
      </div>
      
      
      <div class="notification-content">
        <p>If using Docker to install and run InfluxDB, the <code>latest</code> tag will point to
InfluxDB 3 Core. To avoid unexpected upgrades, use specific version tags in
your Docker deployments. For example, if using Docker to run InfluxDB v2,
replace the <code>latest</code> version tag with a specific version tag in your Docker
pull command&ndash;for example:</p>


<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">docker pull influxdb:2</span></span></code></pre></div>
      </div>
      <span class="show"></span>
           
    </div>
  
</div>



  
  <div class="footer-widgets">
  
  
<div data-component="custom-time-trigger" class="custom-time-trigger widget blue" data-tooltip="Select custom date for sample data">
  <a role="button" class="custom-time-trigger__button" data-action="open">
    <span class="cf-icon Clock_New"></span>
  </a>
</div>

  
  <div class="ask-ai-trigger widget magenta" data-component="ask-ai-trigger" data-tooltip="Ask InfluxData AI for help" style="display: none;">
  <a class="ask-ai-open" >
    <div class="icon-influx-logo"></div>
    Ask AI
  </a>
</div>
</div>

  
  

  </body>
  
<script type="text/javascript">
  cloudUrls = ["https:\/\/us-west-2-1.aws.cloud2.influxdata.com", "https:\/\/us-east-1-1.aws.cloud2.influxdata.com", "https:\/\/eu-central-1-1.aws.cloud2.influxdata.com", "https:\/\/us-central1-1.gcp.cloud2.influxdata.com", "https:\/\/westeurope-1.azure.cloud2.influxdata.com", "https:\/\/eastus-1.azure.cloud2.influxdata.com", ]
</script>

</html>

