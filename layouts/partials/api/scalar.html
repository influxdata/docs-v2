{{/*
  Scalar API Documentation Renderer

  Modern, accessible API documentation powered by Scalar.
  Features:
  - Dark/light theme support synchronized with site theme
  - InfluxData brand colors
  - Responsive layout
  - AI agent spec discovery via link[rel=alternate]
  - Download link for OpenAPI spec

  Required page params:
  - staticFilePath: Path to the OpenAPI specification file
*/}}

{{ $specPath := .Params.staticFilePath }}
{{ $specPathJSON := replace $specPath ".yaml" ".json" | replace ".yml" ".json" }}

{{/* Machine-readable links for AI agent discovery */}}
{{ if $specPath }}
<link rel="alternate" type="application/x-yaml" href="{{ $specPath | absURL }}" title="OpenAPI Specification (YAML)" />
<link rel="alternate" type="application/json" href="{{ $specPathJSON | absURL }}" title="OpenAPI Specification (JSON)" />
{{ end }}

<div class="api-reference-wrapper">
  {{/* Download button is now in single.html header row above tabs */}}

  {{/* Scalar API Reference container (component-driven) */}}
  <div
    class="api-reference-container"
    data-component="api-scalar"
    data-spec-path="{{ $specPath }}"
    data-cdn="https://cdn.jsdelivr.net/npm/@scalar/api-reference@latest"
  ></div>
</div>

<style>
.api-reference-wrapper {
  width: 100%;
}

.api-reference-container {
  min-height: 600px;
}
</style>
