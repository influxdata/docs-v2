{{ if and hugo.IsServer (not (eq .Site.Params.environment "staging")) }}
<!-- Development: GA4 in debug mode -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-CNWQ54SDD8"></script>
<script>
  const gtagID = 'G-CNWQ54SDD8';
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', gtagID, {
    'debug_mode': true,
    'send_page_view': false,
    'transport_type': 'beacon'
  });
  console.log('GA4 loaded in debug mode -', gtagID);
</script>
{{ else }}
<!-- Production/Staging: Normal GA4 -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-CNWQ54SDD8"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-CNWQ54SDD8', {
    'send_page_view': true,
    'transport_type': 'beacon'
  });
</script>
{{ end }}
