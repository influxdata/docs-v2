{{ $versionSelector := resources.Get "js/version-selector.js" }}
{{ $contentInteractions := resources.Get "js/content-interactions.js" }}
{{ $searchInteractions := resources.Get "js/search-interactions.js" }}
{{ $telegrafFilters := resources.Get "js/telegraf-filters.js" }}
{{ $influxdbURLs := resources.Get "js/influxdb-url.js" }}
{{ $featureCallouts := resources.Get "js/feature-callouts.js" }}
{{ $notifications := resources.Get "js/notifications.js" }}
{{ $keybindings := resources.Get "js/keybindings.js" }}
{{ $footerjs := slice $versionSelector $contentInteractions $searchInteractions $telegrafFilters $influxdbURLs $featureCallouts $notifications $keybindings | resources.Concat "js/footer.bundle.js" | resources.Fingerprint }}

<!-- Load cloudUrls array -->
<script type="text/javascript">
  cloudUrls = [
    {{- range .Site.Data.influxdb_urls.cloud.providers }}
      {{- range .regions }}"{{ safeHTML .url }}",{{ end -}}
    {{ end -}}
  ]
</script>

<!-- Load footer.js -->
<script type="text/javascript" src="{{ $footerjs.RelPermalink }}" ></script>

{{ if .Page.HasShortcode "diagram" }}
<!-- Load mermaid.js for diagrams -->
<script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
<script>
  mermaid.initialize({
    startOnLoad:true,
    mermaid: {
      callback:function(id) {
        $('.mermaid').css('opacity', 1);
      }
    },
    themeVariables: {
      fontFamily: "Rubik",
      fontSize: '18px',
    }
  })
</script>
{{ end }}